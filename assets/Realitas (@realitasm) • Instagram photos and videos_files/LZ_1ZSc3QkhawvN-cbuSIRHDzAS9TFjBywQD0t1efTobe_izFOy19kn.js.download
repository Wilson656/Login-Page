;/*FB_PKG_DELIM*/

__d("PolarisPostCommentInputDeferred.react",["deferredLoadComponent","react","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";d("react");a=c("deferredLoadComponent")(c("requireDeferredForDisplay")("PolarisPostCommentInput.react").__setRef("PolarisPostCommentInputDeferred.react"));b=a;g["default"]=b}),98);
__d("PolarisSponsoredPostCTAFooter.react",["PolarisClickEventLoggerProvider.react","PolarisODS","PolarisPostFooterCTA.react","PolarisPostUtils","PolarisTrackingNodeProvider.react","polarisAdsSelectors","react","usePolarisSponsoredPostCTAFooterDominantColor"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.isMediaRendered,e=a.post;a=a.sidecarIndex;var f=d("polarisAdsSelectors").useFeedAdInfo(e.id,function(a){return a}),g=e.isSidecar;a=g===!0?(g=d("PolarisPostUtils").getCurrentSidecarItemFromPost(e,a))==null?void 0:g.id:e.id;g=c("usePolarisSponsoredPostCTAFooterDominantColor")({post:e,mediaId:a,isMediaRendered:b});e=g.ctaDominantColor;b=g.ctaFooterViewpointRef;if(a==null)return null;g=f==null?void 0:(g=f.ctaItems)==null?void 0:(g=g.get(a))==null?void 0:g.ctaLinkUrl;a=f==null?void 0:(f=f.ctaItems)==null?void 0:(f=f.get(a))==null?void 0:f.ctaLinkText;f=function(){c("PolarisODS").incr("web.ads.feed.link_click")};return g!=null&&a!=null?h.jsx(c("PolarisClickEventLoggerProvider.react"),{children:h.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:86,children:h.jsx("div",{ref:b,children:h.jsx(c("PolarisPostFooterCTA.react"),{ctaDominantColor:e,"data-testid":void 0,disableAnimation:!1,externalURL:g,forceBottomBorder:!0,isActive:!0,isForAd:!0,onClick:f,showChevron:!0,text:a})})})}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisLoggedOutSidecarUpsell.react",["IGDSBox.react","PolarisLoggedOutAppUpsellInnerContent.react","PolarisLoggedOutCtaLogger","PolarisPreviewPhoto.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useEffect;function a(a){var b;i(function(){d("PolarisLoggedOutCtaLogger").logLoggedOutCtaEvent({ctaType:"sidecar_item_upsell",ctaVersion:"app_upsell",eventName:"impression"})});if(a.upsellSidecarChild.dimensions==null||a.upsellSidecarChild.owner==null||a.upsellSidecarChild.mediaPreview==null)throw new Error("Invalid SidecarChildItem for upsell");return h.jsxs(c("IGDSBox.react"),{direction:"column",justifyContent:"center",position:"relative",children:[h.jsx(d("PolarisPreviewPhoto.react").PreviewPhoto,{dimensions:a.upsellSidecarChild.dimensions,previewData:a.upsellSidecarChild.mediaPreview}),h.jsx(c("IGDSBox.react"),{alignContent:"center",alignItems:"center",alignSelf:"center",color:"alwaysWhite",direction:"column",flex:"shrink",justifyContent:"center",marginEnd:13,marginStart:13,maxWidth:"300px",overflow:"hidden",position:"absolute",shape:"extraRounded",children:h.jsx(c("PolarisLoggedOutAppUpsellInnerContent.react"),{ctaType:"sidecar_item_upsell",ctaVersion:"app_upsell",intentSource:"post_sidecar_upsell",isSidecarPostLandscape:a.upsellSidecarChild.dimensions.height<a.upsellSidecarChild.dimensions.width,triggeringPageType:"post",triggeringUserDisplayName:(b=a.upsellSidecarChild.owner)==null?void 0:b.username,triggeringUserPicUrl:a.upsellSidecarChild.owner.profilePictureUrl,triggeringUserUsername:a.upsellSidecarChild.owner.username})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisAPILikePost",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("PolarisInstapi").apiPost("/api/v1/web/likes/{media_id}/like/",{path:{media_id:a}})}g.likePost=a}),98);
__d("PolarisPostActionLikePost",["PolarisAPILikePost","PolarisAdsEngagementLogger","PolarisEngagementLogger","PolarisGenericStrings","PolarisLogger","PolarisSentryFeedbackActions","PolarisToastActions"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){return function(e){d("PolarisLogger").logAction("likeAttempt",b);e({type:"LIKE_POST_REQUESTED",postId:a});return d("PolarisAPILikePost").likePost(a).then(function(){c!=null?d("PolarisAdsEngagementLogger").logAdLike(b,c):d("PolarisEngagementLogger").logOrganicLike(b),e({type:"LIKE_POST_SUCCEEDED",postId:a})},function(c){var f;d("PolarisLogger").logAction("likeFailure",b);f=((f=c.responseObject)==null?void 0:f.spam)||!1;if(f){var g,i;f=(f=c.responseObject)==null?void 0:f.feedback_title;g=(g=c.responseObject)==null?void 0:g.feedback_message;i=(i=c.responseObject)==null?void 0:i.feedback_url;c=(c=c.responseObject)==null?void 0:c.feedback_action;e(d("PolarisSentryFeedbackActions").showSentryFeedback({source:b.source,sourceOfAction:"like_post",title:f,message:g,url:i,action:c}))}e({type:"LIKE_POST_FAILED",postId:a});e(d("PolarisToastActions").showToast({text:d("PolarisGenericStrings").GENERIC_ERROR_MESSAGE,actionText:d("PolarisGenericStrings").RETRY_TEXT,actionHandler:function(){return e(h(a,b))}}))})}}g.likePost=h}),98);
__d("PolarisAPISavePost",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("PolarisInstapi").apiPost("/api/v1/web/save/{media_id}/save/",{path:{media_id:a}})}g.savePost=a}),98);
__d("PolarisPostActionSavePost",["PolarisAPISavePost","PolarisAdsEngagementLogger","PolarisLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return function(e){d("PolarisLogger").logAction("saveAttempt",b);e({type:"SAVE_POST_REQUESTED",postId:a});return d("PolarisAPISavePost").savePost(a).then(function(){d("PolarisLogger").logAction("saveSuccess",b),e({type:"SAVE_POST_SUCCEEDED",postId:a}),c!=null&&d("PolarisAdsEngagementLogger").logAdSave(c)},function(){d("PolarisLogger").logAction("saveFailure",b),e({type:"SAVE_POST_FAILED",postId:a})})}}g.savePost=a}),98);
__d("PolarisAPIUnlikePost",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("PolarisInstapi").apiPost("/api/v1/web/likes/{media_id}/unlike/",{path:{media_id:a}})}g.unlikePost=a}),98);
__d("PolarisPostActionUnlikePost",["PolarisAPIUnlikePost","PolarisAdsEngagementLogger","PolarisEngagementLogger","PolarisGenericStrings","PolarisLogger","PolarisSentryFeedbackActions","PolarisToastActions"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){return function(e){d("PolarisLogger").logAction("unlikeAttempt",b);e({type:"UNLIKE_POST_REQUESTED",postId:a});return d("PolarisAPIUnlikePost").unlikePost(a).then(function(){c!=null?d("PolarisAdsEngagementLogger").logAdUnlike(b,c):d("PolarisEngagementLogger").logOrganicUnlike(b),e({type:"UNLIKE_POST_SUCCEEDED",postId:a})},function(c){var f;f=((f=c.responseObject)==null?void 0:f.spam)||!1;if(f){var g,i;f=(f=c.responseObject)==null?void 0:f.feedback_title;g=(g=c.responseObject)==null?void 0:g.feedback_message;i=(i=c.responseObject)==null?void 0:i.feedback_url;c=(c=c.responseObject)==null?void 0:c.feedback_action;e(d("PolarisSentryFeedbackActions").showSentryFeedback({source:b.source,sourceOfAction:"unlike_post",title:f,message:g,url:i,action:c}))}d("PolarisLogger").logAction("unlikeFailure",b);e({type:"UNLIKE_POST_FAILED",postId:a});e(d("PolarisToastActions").showToast({text:d("PolarisGenericStrings").GENERIC_ERROR_MESSAGE,actionText:d("PolarisGenericStrings").RETRY_TEXT,actionHandler:function(){return e(h(a,b))}}))})}}g.unlikePost=h}),98);
__d("PolarisAPIUnsavePost",["PolarisInstapi"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("PolarisInstapi").apiPost("/api/v1/web/save/{media_id}/unsave/",{path:{media_id:a}})}g.unsavePost=a}),98);
__d("PolarisPostActionUnsavePost",["PolarisAPIUnsavePost","PolarisAdsEngagementLogger","PolarisLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return function(e){d("PolarisLogger").logAction("unsaveAttempt",b);e({type:"UNSAVE_POST_REQUESTED",postId:a});return d("PolarisAPIUnsavePost").unsavePost(a).then(function(){d("PolarisLogger").logAction("unsaveSuccess",b),e({type:"UNSAVE_POST_SUCCEEDED",postId:a}),c!=null&&d("PolarisAdsEngagementLogger").logAdUnsave(c)},function(){d("PolarisLogger").logAction("unsaveFailure",b),e({type:"UNSAVE_POST_FAILED",postId:a})})}}g.unsavePost=a}),98);
__d("PolarisPostFeatures",["PolarisPostConstants","PolarisPostModalRenderingContext","PolarisPostVariants","PolarisReactRedux","PolarisRelationshipTypes","PolarisUA","polarisRelationshipSelectors","polarisUserSelectors","usePolarisDisplayProperties"],(function(a,b,c,d,e,f,g){"use strict";var h=[{predicate:"isThreeLineHeaderEnabled",overrides:{threeLineHeaderEnabled:!0}},{predicate:"isFeed",overrides:{avatarSize:d("PolarisPostConstants").AVATAR_SIZE_SMALL,commentsAreStacked:!0}},{predicate:"isWidePhotoOnMediumScreen",overrides:{avatarSize:d("PolarisPostConstants").AVATAR_SIZE_SMALL,commentsAreStacked:!0}},{predicate:"isRichCommentsEnabled",overrides:{avatarSize:d("PolarisPostConstants").AVATAR_SIZE_SMALL,showPostButton:!0,hasThreadedSidebarComments:!0}},{predicate:"isStackedScreenSize",overrides:{avatarSize:d("PolarisPostConstants").AVATAR_SIZE_SMALL,commentsAreStacked:!0,showPostButton:!0,hasThreadedSidebarComments:!1}},{predicate:"isViewerInUserTags",overrides:{hasPhotosOfYouOption:!0}},{predicate:"isFeedAndOwnerFollowedByViewer",overrides:{showFollowButton:!1}},{predicate:"isModalAndOwnerFollowedByViewer",overrides:{showFollowButton:!1}},{predicate:"isOwnerPrivate",overrides:{canViewerProvideFeedback:!1}},{predicate:"isOwnerFollowedByViewer",overrides:{canViewerProvideFeedback:!0}},{predicate:"isOwnerTheViewer",overrides:{canViewerProvideFeedback:!0,showFollowButton:!1}},{predicate:"isOwnerUnpublished",overrides:{showFollowButton:!1}},{predicate:"isBlocked",overrides:{showFollowButton:!1}},{predicate:"hasFollowHashtagInfo",overrides:{showFollowButton:!1}},{predicate:"isLoggedOut",overrides:{canViewerProvideFeedback:!1}}],i={avatarSize:d("PolarisPostConstants").AVATAR_SIZE_LARGE,showPostButton:!1,showFollowButton:!0,threeLineHeaderEnabled:!1,commentsAreStacked:!1,hasThreadedSidebarComments:!1,canViewerProvideFeedback:!0,hasPhotosOfYouOption:!1};function j(a){var b=a.isInModal,c=a.isMobile;c===void 0?!1:c;c=a.owner;a.path;var e=a.post,f=a.relationship,g=a.variant,h=a.viewer;a=a.viewportWidth;g=g===d("PolarisPostVariants").VARIANTS.feed;var i=Boolean(h),j=!h,k=(h==null?void 0:h.id)===c.id,l=f.followedByViewer.state===d("PolarisRelationshipTypes").FOLLOW_STATUS_FOLLOWING,m=Boolean(e.followHashtagInfo),n=Boolean(e.location)&&(e.sponsors||[]).length>0;return{isFeed:g,isSidecar:(e.sidecarChildren||[]).length>0,isThreeLineHeaderEnabled:n,hasFollowHashtagInfo:m,isLoggedIn:i,isLoggedOut:j,isOwnerTheViewer:k,isOwnerFollowedByViewer:l,isFavorited:((n=f.favoritedByViewer)==null?void 0:n.state)===d("PolarisRelationshipTypes").FAVORITE_STATUS_FAVORITED,isFeedAndOwnerFollowedByViewer:g&&l,isModalAndOwnerFollowedByViewer:b&&l,isOwnerPrivate:Boolean(c.isPrivate),isOwnerUnpublished:Boolean(c.isUnpublished),isViewerInUserTags:i&&(e.usertags||[]).some(function(a){return a.user.id===(h==null?void 0:h.id)}),isBlocked:f.hasBlockedViewer.state===d("PolarisRelationshipTypes").BLOCK_STATUS_BLOCKED,isStackedScreenSize:a<d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF,isWidePhotoOnMediumScreen:Boolean(e.dimensions&&e.dimensions.width/e.dimensions.height>1.5&&a>d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF&&a<=d("PolarisPostConstants").MEDIUM_SCREEN_MAX),isRichCommentsEnabled:!0}}function k(a){var b=j(a);a=b.isBlocked;var c=b.isFavorited,d=b.isLoggedIn,e=b.isSidecar,f=b.isStackedScreenSize;return babelHelpers["extends"]({isSidecar:e,isFavorited:c,isLoggedIn:d,isBlocked:a,isStackedScreenSize:f},h.filter(function(a){a=a.predicate;var c=b[a];if(typeof c!=="boolean")throw new Error("Could not find predicate "+a);return c}).reduce(function(a,b){var c=b.overrides;b.predicate;return babelHelpers["extends"]({},a,c)},i))}function a(a){var b=a.owner,e=a.path,f=a.post;a=a.variant;var g=d("PolarisReactRedux").useSelector(function(a){return d("polarisRelationshipSelectors").getRelationship(a.relationships,b.id)}),h=d("PolarisReactRedux").useSelector(d("polarisUserSelectors").getViewer),i=c("usePolarisDisplayProperties")(),j=i.viewportHeight;i=i.viewportWidth;var l=d("PolarisPostModalRenderingContext").usePolarisPostModalRenderingContext();l=l.isInModal;e={isMobile:d("PolarisUA").isMobile(),owner:b,path:e,post:f,relationship:g,variant:a,viewer:h,viewportHeight:j,viewportWidth:i,isInModal:l};return k(e)}g.getPostFeatures=k;g.usePolarisPostFeatures=a}),98);
__d("PolarisVideoViewedTimeAction",["convertToViewabilityPercentage","gkx","memoizeStringOnly","polarisVideoEventLogger","polarisVideoUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=c("memoizeStringOnly")(function(a){return new Map()}),i=c("memoizeStringOnly")(function(a){return new Map()}),j=c("memoizeStringOnly")(function(){return new Map()});function k(a){a=a.video;var b=a.getDeclarativeVideoRef();return{lastStartPosition:(b=b==null?void 0:b.getCurrentTime())!=null?b:0,loopCount:a.getLoopCount()}}function l(a){var b,c=a.adTrackingToken,e=a.context,f=a.initialData,g=a.post;a=a.video;var h=a.getDeclarativeVideoRef();return{carouselParentId:g.carouselParentId,videoWidth:h==null?void 0:(b=h.getVideo())==null?void 0:b.videoWidth,currentVideoTime:d("polarisVideoUtils").getCurrentVideoTime(h),dashInfo:d("polarisVideoUtils").getDashInfo(g),duration:h==null?void 0:h.getDuration(),id:g.id,owner:g.owner,postedAt:g.postedAt,sequenceNumber:a.getNextSequenceNumber(),loopCount:a.getLoopCount()-f.loopCount,lastStartPosition:f.lastStartPosition,adTrackingToken:c,analyticsContext:e,isAd:!0,timeAtVideoPause:d("polarisVideoUtils").getTimeAtVideoPause(h),trackingToken:g.trackingToken}}function a(a,b,e,f){return function(g){if(b.current==null)return;var m=b.current,n=h(e),o=i(e),p=a.id;g.percentVisible>=.5&&!n.has(p)&&n.set(p,k({video:m}));g.percentVisible>=1&&!o.has(p)&&o.set(p,k({video:m}));var q=n.get(p);q!=null&&g.percentVisible<.5&&(n["delete"](p),d("polarisVideoEventLogger").logVideoViewedTime(l({adTrackingToken:f,context:e,initialData:q,post:a,video:m})));n=o.get(p);n&&g.percentVisible<1&&(o["delete"](p),d("polarisVideoEventLogger").logVideoFullViewedTime(l({adTrackingToken:f,context:e,initialData:n,post:a,video:m})));if(!c("gkx")("464"))return;q=j(e);o=q.get(p);n=c("convertToViewabilityPercentage")(g.percentVisible);g=m.getDeclarativeVideoRef();n!==o&&(q.set(p,n),d("polarisVideoEventLogger").logVideoViewabilityChanged({carouselParentId:a.carouselParentId,currentVideoTime:d("polarisVideoUtils").getCurrentVideoTime(g),dashInfo:d("polarisVideoUtils").getDashInfo(a),duration:g==null?void 0:g.getDuration(),id:a.id,owner:a.owner,sequenceNumber:m.getNextSequenceNumber(),adTrackingToken:f,analyticsContext:e,isAd:!0,trackingToken:a.trackingToken,currentViewabilityPercentage:n}))}}g.makeVideoViewTimeAction=a}),98);
__d("PolarisAsyncLikedByListContainer",["JSResourceForInteraction","PolarisAsyncComponent","xigRequireInterop"],(function(a,b,c,d,e,f,g){"use strict";a=d("PolarisAsyncComponent").createAsyncComponent_DEPRECATED({displayName:"LikedByListContainer",resolve:function(){return c("JSResourceForInteraction")("PolarisLikedByListContainer.react").__setRef("PolarisAsyncLikedByListContainer").load().then(function(a){return c("xigRequireInterop")(a)})}});g["default"]=a}),98);
__d("PolarisEmbedHashHelpers",["memoize"],(function(a,b,c,d,e,f,g){"use strict";a=c("memoize")(function(){var a=window.location.hash;a=decodeURIComponent(a.substring(a.indexOf("#")+1));try{a=JSON.parse(a)}catch(b){a={}}return{clientId:a.ci,offset:a.os,sdkLoadStart:a.ls,sdkLoadEnd:a.le}});g.getHashPayload=a}),98);
__d("polarisGetEmbedRequestID",["nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("nullthrows")(document.querySelector(".Embed"));return a.getAttribute("data-request-id")}g["default"]=a}),98);
__d("PolarisEmbedLogger",["PolarisEmbedHashHelpers","PolarisLogger","PolarisLoggerUtils","PolarisPigeonLogger","PolarisQueryParamsHelper","gkx","polarisGetEmbedRequestID"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=d("PolarisLoggerUtils").trimAndSanitizeUrl(a||window.location.href);var b=c("polarisGetEmbedRequestID")();return b!=null?d("PolarisQueryParamsHelper").appendQueryParams(a,{ig_rid:b}):a}function a(a,b,e){if(!c("gkx")("4952"))return;var f=d("PolarisLogger").getExtra(),g=f.url;f=babelHelpers.objectWithoutPropertiesLoose(f,["url"]);a=babelHelpers["extends"]({client_id:d("PolarisEmbedHashHelpers").getHashPayload().clientId,event_name:a.actionName,is_copyright_blocked:a.isCopyrightBlocked,media_id:a.mediaId,media_type:a.mediaType,owner_id:a.ownerId===""?null:a.ownerId},f);f=babelHelpers["extends"]({obj_type:"url",obj_id:h(g)},e);d("PolarisLogger").logPigeonEvent(d("PolarisPigeonLogger").createEvent("instagram_web_embeds",a,f),b)}function i(a,b,c){var e=d("PolarisLogger").getAnonymousExtra(),f=e.url;e=babelHelpers.objectWithoutPropertiesLoose(e,["url"]);a=babelHelpers["extends"]({client_id:d("PolarisEmbedHashHelpers").getHashPayload().clientId,event_name:a.actionName,is_copyright_blocked:a.isCopyrightBlocked,media_id:a.mediaId,media_type:a.mediaType,owner_id:a.ownerId===""?null:a.ownerId},e);e=babelHelpers["extends"]({obj_type:"url",obj_id:h(f)},c);d("PolarisLogger").logPigeonEvent(d("PolarisPigeonLogger").createEvent("instagram_web_embeds_anonymous",a,e),b)}function b(a){var b=a.isCopyrightBlocked,c=a.mediaId,d=a.mediaType;a=a.ownerId;i({actionName:"view",mediaId:c,mediaType:d,ownerId:a,isCopyrightBlocked:b})}function e(a,b,e){if(!c("gkx")("4952"))return;a=d("PolarisLogger").getExtra(a);var f=a.url;a=babelHelpers.objectWithoutPropertiesLoose(a,["url"]);a=babelHelpers["extends"]({client_id:d("PolarisEmbedHashHelpers").getHashPayload().clientId,parent_url:window.document.referrer},a);f=babelHelpers["extends"]({obj_type:"url",obj_id:h(f)},e);d("PolarisLogger").logPigeonEvent(d("PolarisPigeonLogger").createEvent("instagram_web_embed_perf_events",a,f),b)}g.logEmbedAction=a;g.logEmbedPageView=b;g.logEmbedTimings=e}),98);
__d("PolarisEmbedVideoWatchAgain.react",["cx","fbt","PolarisEmbedLogger","PolarisFastLink.react","PolarisLinkBuilder","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=i._("Control"),l=i._("Watch again on Instagram"),m="https://www.instagram.com";function n(a){return j.jsx(c("PolarisFastLink.react"),{"aria-label":k,className:a.className,href:a.href,onClick:a.onClick,target:"_blank"})}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=a.post;a=b.code;a=a!=null&&a.length>0?d("PolarisLinkBuilder").buildMediaLink(a):"";var e="utm_source=ig_embed&utm_campaign=embed_video_watch_again";a=""+m+a+"?"+e;e=function(){var a;d("PolarisEmbedLogger").logEmbedAction({actionName:"videoWatchAgainClick",mediaId:b.id,mediaType:"video",ownerId:((a=b.owner)==null?void 0:a.id)||""})};return j.jsxs(j.Fragment,{children:[j.jsx("div",{className:"_aar9",children:j.jsxs("div",{className:"_aara",children:[j.jsx(c("PolarisFastLink.react"),{"aria-label":l,className:"_aarb _9zwu",href:a,onClick:e,target:"_blank"}),j.jsx(c("PolarisFastLink.react"),{"aria-label":l,className:"_aarc",href:a,onClick:e,target:"_blank",children:l})]})}),j.jsx(n,{className:"_aard",href:a,onClick:e})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisEmbedVideo.react",["cx","PolarisEmbedLogger","PolarisEmbedVideoWatchAgain.react","PolarisUserTagIndicatorWithSheet.react","PolarisVideoHeight","PolarisVideoPlayButton.react","Run","joinClasses","keyMirror","nullthrows","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j="video/mp4",k=c("keyMirror")({paused:null,playing:null,finished:null}),l="embedVideo";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.$1=i.createRef();c.$2=!1;c.$3=null;c.handleVisiblityChange=function(){c.state.playerState!=null&&document.visibilityState&&document.visibilityState==="hidden"&&c.stop()};c.handleBeforeUnload=function(){c.state.playerState===k.playing&&c.stop()};c.handlePlayerPlayEvent=function(){c.setState({playerState:k.playing})};c.handlePlayerPauseEvent=function(){c.pause()};c.handlePlayerEndedEvent=function(){c.stop()};c.handleContainerClick=function(a){c.state.playerState!==k.playing?c.play():c.pause()};b={playerState:null};c.state=b;return c}var e=b.prototype;e.componentDidMount=function(){document.addEventListener("visibilitychange",this.handleVisiblityChange);this.$3=d("Run").onBeforeUnload(this.handleBeforeUnload);var a=c("nullthrows")(this.$1.current);a.addEventListener("play",this.handlePlayerPlayEvent);a.addEventListener("pause",this.handlePlayerPauseEvent);a.addEventListener("ended",this.handlePlayerEndedEvent)};e.componentDidUpdate=function(a){this.props.isVisible===!1&&a.isVisible===!0&&this.pause()};e.componentWillUnmount=function(){this.handleBeforeUnload();document.removeEventListener("visibilitychange",this.handleVisiblityChange);this.$3!=null&&(this.$3.remove(),this.$3=null);var a=c("nullthrows")(this.$1.current);a.removeEventListener("play",this.handlePlayerPlayEvent);a.removeEventListener("pause",this.handlePlayerPauseEvent);a.removeEventListener("ended",this.handlePlayerEndedEvent)};e.play=function(){if(this.state.playerState===k.playing)return;if(this.$2===!1){var a;d("PolarisEmbedLogger").logEmbedAction({actionName:"videoFirstPlayClick",mediaId:this.props.post.id,mediaType:"video",ownerId:((a=this.props.post.owner)==null?void 0:a.id)||""});this.$2=!0}c("nullthrows")(this.$1.current).play()};e.pause=function(){if(this.state.playerState!==k.playing)return;c("nullthrows")(this.$1.current).pause();this.setState({playerState:k.paused})};e.stop=function(){if(this.state.playerState===k.finished)return;var a=c("nullthrows")(this.$1.current);a.pause();a.currentTime=0;this.setState({playerState:k.finished})};e.render=function(){var a=this.props,b=a.className;a=a.post;var e=this.state.playerState,f={},g={};d("PolarisVideoHeight").setVideoHeightCompensation(a,!0,f,g);var h=e===k.finished;e=!e||e===k.paused;return i.jsxs("div",{className:c("joinClasses")(b,"_aand"),style:f,children:[i.jsx("div",{style:g,children:i.jsx("video",{className:"_aane",controls:!1,controlsList:void 0,loop:!1,playsInline:!0,poster:a.src,preload:"none",ref:this.$1,src:a.videoUrl,type:j})}),h?i.jsx(c("PolarisEmbedVideoWatchAgain.react"),{post:a}):i.jsx(c("PolarisVideoPlayButton.react"),{onClick:this.handleContainerClick,showPlayButton:e}),a.usertags&&a.usertags.length>=1&&i.jsx(c("PolarisUserTagIndicatorWithSheet.react"),{analyticsContext:l,mediaId:a.id,post:a,usertags:a.usertags})]})};return b}(i.Component);g["default"]=a}),98);
__d("PolarisFeedSeenStateUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return function(c){a.addImpressionFromPost(b,c)}}f.makeSeenStateAction=a}),66);
__d("PolarisPhotoWrapper.react",["PolarisClickEventLoggerProvider.react","PolarisExternalLink.react","PolarisODS","PolarisSponsoredPostContext.react","PolarisTrackingNodeProvider.react","PolarisUA","react","usePolarisOffsiteTrackingDataURLParams"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext;function j(a){var b=a.children,d=a.externalURL;a=a.wrappedRef;var e=function(){c("PolarisODS").incr("web.ads.feed.link_click")};return h.jsx(c("PolarisClickEventLoggerProvider.react"),{ignoreDoubleClick:!0,children:h.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:86,children:h.jsx("div",{ref:a,children:h.jsx(c("PolarisExternalLink.react"),{href:d,ignoreDoubleClick:!0,onClick:e,queryParams:c("usePolarisOffsiteTrackingDataURLParams")(d),children:b})})})})}j.displayName=j.name+" [from "+f.id+"]";function a(a,b){var c=a.adInfo,e=a.children;a=a.post;var f=i(d("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext),g=f.carouselImagesAsCta;f=f.singleImageAdAsCta;g=g||f;f=c==null?void 0:(f=c.ctaItems)==null?void 0:(c=f.get(a.id))==null?void 0:c.ctaLinkUrl;return f!=null&&g&&d("PolarisUA").isDesktop()?h.jsx(j,{externalURL:f,wrappedRef:b,children:e}):h.jsx("div",{ref:b,children:e})}a.displayName=a.name+" [from "+f.id+"]";b=h.forwardRef(a);g["default"]=b}),98);
__d("PolarisMedia.react",["PolarisDoubleTappable","PolarisEmbedVideo.react","PolarisFeedSeenState.react","PolarisFeedSeenStateUtils","PolarisIGCoreToast","PolarisIsLoggedInDesktop","PolarisLikeAnimation","PolarisMediaVideo","PolarisPhoto.react","PolarisPhotoWithIndicator.react","PolarisPhotoWrapper.react","PolarisSensitivityOverlay.react","PolarisSidecarMedia.react","PolarisVideoViewedTimeAction","PolarisViewpointReact.react","nullthrows","polarisVideoUtils","polarisWithRemountOnChange","react","usePolarisMediaSensitivityOverlay"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useState;function a(a){var b=i(!1),e=b[0],f=b[1];b=i(!1);var g=b[0],j=b[1];b=i(0);var k=b[0],l=b[1];b=d("PolarisFeedSeenState.react").usePolarisFeedSeenStateManager();var m=function(){a.onLike&&(a.onLike(),l(k+1))},n=function(){f(!0)},o=function(){f(!1)},p=function(c,d){var e=a.onMediaRendered,b=a.post;if(b.isVideo===!0)return;e&&e({timeTaken:d,resourceName:c,mediaType:"Photo"})},q=function(a){switch(a.state){case"entered":case"updated":a=a.percentVisible>.2;g!==a&&j(a);break;case"exited":j(!1)}},r=function(b,c){if(b===!0&&a.autoplay===!0){if(d("polarisVideoUtils").isFeed(a.analyticsContext))return!1;if(c===0&&d("PolarisIsLoggedInDesktop").isLoggedInDesktop())return!0}return!1},s=a.adInfo,t=a.analyticsContext,u=a.asSidecarChild,v=a.autoplay;a.checkIsSensitivityOverlayDisabledCallback;var w=a.commentsAreStacked,x=a.firstSidecarChildSrc;a.hasViewInsights;var y=a.id;a.initialCarouselIndex;var z=a.isEmbed,A=a.isVisible,B=a.mediaFooter;a.onLike;a.onMediaRendered;var C=a.onSensitivityOverlayCleared;a.onSetModal;var D=a.onSidecarChildIndexChange,E=a.onToastClose,F=a.onVideoFinished,G=a.onVideoLoop,H=a.post,I=a.relationship,J=a.sensitivityOverlayMediaOverlayInfoLoggingProps,aa=a.showToast,K=a.toastString,ba=a.viewer,ca=a.visiblePosition,L=babelHelpers.objectWithoutPropertiesLoose(a,["adInfo","analyticsContext","asSidecarChild","autoplay","checkIsSensitivityOverlayDisabledCallback","commentsAreStacked","firstSidecarChildSrc","hasViewInsights","id","initialCarouselIndex","isEmbed","isVisible","mediaFooter","onLike","onMediaRendered","onSensitivityOverlayCleared","onSetModal","onSidecarChildIndexChange","onToastClose","onVideoFinished","onVideoLoop","post","relationship","sensitivityOverlayMediaOverlayInfoLoggingProps","showToast","toastString","viewer","visiblePosition"]),M=H||{},N=M.dimensions,da=M.displayResources,O=M.upcomingEvent,P=M.id,Q=M.isVideo;Q=Q===void 0?!1:Q;var R=M.mediaPreview,S=M.owner,T=M.sidecarChildren;T=T===void 0?[]:T;var U=M.src;M=M.usertags;var V=T&&T.length>0,W=[];!V&&b!=null&&d("polarisVideoUtils").isFeed(t)&&W.push(d("PolarisFeedSeenStateUtils").makeSeenStateAction(b,H));b=!1;C=c("usePolarisMediaSensitivityOverlay")(H,t,C,a.checkIsSensitivityOverlayDisabledCallback);var ea=C.handleHideSensitivityOverlay,X=C.mediaOverlayCoverInfo;C=C.shouldShowSensitivityOverlay;if(S&&C){C=J||{};J=C.checkIfMediaOverlayInfoImpressionLoggingDisabled;C=C.onLoggedMediaOverlayInfoImpression;J=h.jsx(c("PolarisSensitivityOverlay.react"),{analyticsContext:t,asSidecarChild:u,dimensions:N,disableMediaOverlayInfoImpressionLogging:J!=null?J(P):!1,isPhoto:!Q&&!V,isVisible:A,mediaId:P,mediaOverlayCoverInfo:X,onLoggedMediaOverlayInfoImpression:C,onShowPostClicked:function(){return ea(H)},ownerId:S.id,previewData:R})}else if(V){if(w===!0)b=!0,P=a;else{a.mediaFooter;X=babelHelpers.objectWithoutPropertiesLoose(a,["mediaFooter"]);P=X}J=h.jsx(c("PolarisSidecarMedia.react"),babelHelpers["extends"]({},P,{onChildIndexChange:D,sidecarChildren:T}))}else if(Q){var Y=g;C=[q];var Z=h.createRef();s!=null&&s.tracking_token!=null&&C.push(d("PolarisVideoViewedTimeAction").makeVideoViewTimeAction(a.post,Z,t,s.tracking_token));J=h.jsx(d("PolarisViewpointReact.react").Viewpoint,{action:[].concat(C,W),id:H.id,children:function(b){return h.jsxs("div",{ref:b,children:[z===!0?h.jsx(c("PolarisEmbedVideo.react"),{className:a.className,isVisible:Y,post:H}):h.jsx(c("PolarisMediaVideo"),{adInfo:s,analyticsContext:t,asSidecarChild:u,autoplay:v,className:a.className,firstSidecarChildSrc:x,isVisible:Y,onFinished:F,onLoop:G,post:H,ref:Z,relationship:I,shouldAutoPlay:r(Y,ca),upcomingEventMediaId:y}),aa===!0&&K!=null&&h.jsx(c("PolarisIGCoreToast"),{absolutePosition:!0,duration:3e3,onClose:E,wide:!0,children:K})]})}})}else if(a.post.productType==="text_post")J=h.jsxs(d("PolarisDoubleTappable").DoubleTappable,{onBlur:o,onDoubleClick:m,onFocus:n,role:"button",children:[h.jsx("h1",{style:{textAlign:"center",fontSize:"20px;"},children:a.post.caption}),h.jsx(c("PolarisLikeAnimation"),{likeEventCount:k},k)]});else{S={dimensions:N,likeEventCount:k,onPhotoRendered:p,src:c("nullthrows")(U),srcSet:da};var $;M&&M.length>0||O?$=h.jsx(d("PolarisPhotoWithIndicator.react").PhotoWithIndicator,babelHelpers["extends"]({},L,S,{analyticsContext:t,isFocused:e,isVisible:A,upcomingEvent:O,upcomingEventMediaId:y,upcomingEventThumbnailSrc:c("nullthrows")(u===!0?x:U),usertags:M,viewer:ba})):$=h.jsx(c("PolarisPhoto.react"),babelHelpers["extends"]({},L,S,{analyticsContext:t}));R=[].concat(W);V=h.jsx(d("PolarisViewpointReact.react").Viewpoint,{action:R,id:H.id,children:function(a){return h.jsx(c("PolarisPhotoWrapper.react"),{adInfo:s,post:H,ref:a,children:$})}});J=h.jsxs(d("PolarisDoubleTappable").DoubleTappable,{onBlur:o,onDoubleClick:m,onFocus:n,role:"button",children:[V,h.jsx(c("PolarisLikeAnimation"),{likeEventCount:k},k)]})}B!=null&&!b&&(J=h.jsxs(h.Fragment,{children:[J,B]}));return J}a.displayName=a.name+" [from "+f.id+"]";function b(a,b){return a.id!==b.id}e=c("polarisWithRemountOnChange")(b)(a);g["default"]=e}),98);
__d("PolarisSidecarChild.react",["IGDSBox.react","PolarisLoggedOutSidecarUpsell.react","PolarisMedia.react","PolarisOrganicImpressionAction","PolarisViewpointReact.react","PolarisVpvdImpressionAction","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.analyticsContext,e=a.index,f=a.isVisible,g=a.media;a.mediaFooter;var i=a.mediaWidth,j=a.onMediaRendered,k=a.post,l=a.sidecarChildIndex,m=a.sidecarChildren;a=babelHelpers.objectWithoutPropertiesLoose(a,["analyticsContext","index","isVisible","media","mediaFooter","mediaWidth","onMediaRendered","post","sidecarChildIndex","sidecarChildren"]);var n=g.isUpsell===!0?h.jsx(c("PolarisLoggedOutSidecarUpsell.react"),{upsellSidecarChild:g}):h.jsx(c("PolarisMedia.react"),babelHelpers["extends"]({},a,{accessibilityCaption:g.accessibilityCaption,analyticsContext:b,asSidecarChild:!0,firstSidecarChildSrc:m[0].src,isVisible:l===e?f:!1,onMediaRendered:j,post:g}));return e===0?h.jsx(c("IGDSBox.react"),{position:"relative",width:i,children:n},g.id):h.jsx(d("PolarisViewpointReact.react").Viewpoint,{action:[d("PolarisOrganicImpressionAction").makeCarouselImpressionAction(g,b),d("PolarisVpvdImpressionAction").makeCarouselVpvdImpressionAction(g,m[0],e,k.id,b)],id:g.id,children:function(a){return h.jsx(c("IGDSBox.react"),{containerRef:a,position:"relative",width:i,children:n})}},g.id)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("usePolarisSidecarMediaOrUpsell",["PolarisUA","polarisIsUserLoggedIn"],(function(a,b,c,d,e,f,g){"use strict";var h=4,i=2;function a(a){var b=a.post;a=a.sidecarChildren;if(d("polarisIsUserLoggedIn").isUserLoggedIn()||d("PolarisUA").isDesktop()||a.some(function(a){return a.mediaOverlayInfo!=null})||b.dimensions===null||b.owner===null)return a;a=[].concat(a);var c=a.length>=h?i:null;if(c!=null&&a[c-1].mediaPreview!=null){b={dimensions:b.dimensions,id:"",isUpsell:!0,isVideo:!1,mediaPreview:a[c-1].mediaPreview,owner:b.owner,src:""};a.splice(c,0,b)}return a}g["default"]=a}),98);
__d("PolarisSidecarMedia.react",["PolarisSidecar.react","PolarisSidecarChild.react","react","useMergeRefs","usePolarisCarouselAutoplay","usePolarisSidecarMediaOrUpsell","usePolarisSidecarMediaVisibility"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback;function a(a){var b,e=a.initialCarouselIndex,f=a.post,g=a.sidecarChildren,j=babelHelpers.objectWithoutPropertiesLoose(a,["initialCarouselIndex","post","sidecarChildren"]);a=c("usePolarisSidecarMediaVisibility")();var k=a.isSidecarMediaVisible;a=a.sidecarMediaVisibilityRef;b=c("usePolarisCarouselAutoplay")(e,g,((b=j.adInfo)==null?void 0:b.isLuxuryVerticalAd)===!0||((b=j.adInfo)==null?void 0:b.isSensitiveVerticalAd)===!0);var l=b.carouselAutoplayRef,m=b.handleChildIndexChange,n=b.handleInteract,o=b.handleSetScrollRef,p=b.handleVideoLoop;b=c("useMergeRefs")(a,l);var q=i(function(a,b,c){return[j.onChildIndexChange,m].filter(Boolean).forEach(function(d){return d(a,b,c)})},[j.onChildIndexChange,m]),r=c("usePolarisSidecarMediaOrUpsell")({sidecarChildren:g,post:f});g=function(a,b){return r.map(function(d,e){return h.jsx(c("PolarisSidecarChild.react"),babelHelpers["extends"]({index:e,media:d,mediaWidth:a,onVideoLoop:p,post:f,sidecarChildIndex:b,sidecarChildren:r},j),e)})};var s=r.map(function(a){a=a.dimensions;return a}).filter(Boolean);s=h.jsx(d("PolarisSidecar.react").Sidecar,{dimensions:s,initialCarouselIndex:e,isSidecarMediaVisible:k,mediaFooter:j.mediaFooter,numSidecarChildren:r.length,onChildIndexChange:q,onInteract:n,onSetScrollRef:o,renderSidecarChildren:g});return a!=null||l!=null?h.jsx("div",{ref:b,children:s}):s}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisMediaContainer.react",["PolarisMedia.react","PolarisReactRedux","polarisPostSelectors","react"],(function(a,b,c,d,e,f,g){"use strict";d("react");function a(a,b){return{onMediaRendered:d("polarisPostSelectors").getOnMediaRendered(a,b.onPostMediaRendered)}}function b(a,b){return{onSidecarChildIndexChange:function(a,c,d){a=b.onPostSidecarChildIndexChange;a&&a(c)}}}function e(a,b,c){c.onPostMediaRendered;c.onPostSidecarChildIndexChange;c=babelHelpers.objectWithoutPropertiesLoose(c,["onPostMediaRendered","onPostSidecarChildIndexChange"]);return babelHelpers["extends"]({},c,a,b)}f=d("PolarisReactRedux").connect(a,b,e)(c("PolarisMedia.react"));g["default"]=f}),98);
__d("PolarisInFeedPostModalContext",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react").createContext;b=a(c("emptyFunction"));g.InFeedPostModalContext=b}),98);
__d("PolarisPostCommentInputPicker",["cx","CometPlaceholder.react","JSResourceForInteraction","PolarisPanavisionQEHelpers","cr:3597","react","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","xigRequireInterop"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");e=i.forwardRef(function(a,e){var f=c("usePolarisIsOnFeedPage")(),g=c("usePolarisIsOnAdsActivityPage")();f=(f||g)&&a.inModal!==!0&&d("PolarisPanavisionQEHelpers").hasFamiliarFeed();return i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx("div",{className:(f?"":"_aan1")+(f?" _ajpo":"")}),name:"PostCommentInputPicker",children:i.jsx(b("cr:3597"),babelHelpers["extends"]({},a,{ref:e}))})});function a(){return c("JSResourceForInteraction")("PolarisPostCommentInput.react").__setRef("PolarisPostCommentInputPicker").load().then(function(a){return c("xigRequireInterop")(a)})}g.PostCommentInputPicker=e;g.waitForCommentInputLoad=a}),98);
__d("PolarisPostFastCommentLikeButton.react",["PolarisCommentActions","PolarisConfig","PolarisInteractionsLogger","PolarisLikeButton.react","PolarisReactRedux","react","usePolarisAnalyticsContext","usePolarisComment","usePolarisPost"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a,b){var e=d("usePolarisComment").useComment(a,function(a){return a.id}),f=d("usePolarisPost").usePost(b,d("PolarisInteractionsLogger").getMediaTypeFromPost),g=d("usePolarisPost").usePostAndOwner(b,function(a,b){return b.id}),h=c("usePolarisAnalyticsContext")();return{commentAuthorId:e,commentId:a,containerModule:h,mediaAuthorId:g,mediaId:b,mediaType:f,userId:(e=d("PolarisConfig").getViewerId())!=null?e:""}}function a(a){var b=a.color,e=a.commentId;a=a.postId;var f=d("PolarisReactRedux").useDispatch(),g=i(e,a);a=d("usePolarisComment").useComment(e,function(a){return a.likedByViewer});e=function(a){a?f(d("PolarisCommentActions").likeComment(g)):f(d("PolarisCommentActions").unlikeComment(g))};return h.jsx(c("PolarisLikeButton.react"),{color:b,isLiked:a,large:!1,onChange:e})}a.displayName=a.name+" [from "+f.id+"]";b=h.memo(a);g["default"]=b}),98);
__d("PolarisPostFastOptionsButton.react",["fbt","CarouselAutoplayContext","IGDSBox.react","InstagramAdActionMenuFalcoEvent","PolarisContainerModuleUtils","PolarisIGCoreMoreHorizontalPanoOutlineIcon","PolarisIGCoreMoreVerticalPanoOutline24Icon","PolarisIGCoreSVGIconButton","PolarisLogger","PolarisPostModalContext.react","PolarisViewpointActionUtils","polarisAdsSelectors","react","usePolarisAnalyticsContext","usePolarisPost","usePolarisViewer"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useContext,k=h._("More options");function l(a){var b=a.color;a=a.orientation;a=a==="horizontal"?c("PolarisIGCoreMoreHorizontalPanoOutlineIcon"):c("PolarisIGCoreMoreVerticalPanoOutline24Icon");return i.jsx(c("IGDSBox.react"),{alignItems:"center",height:24,justifyContent:"center",position:"relative",width:24,children:i.jsx(a,{alt:k,color:b})})}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=a.orientation;b=b===void 0?"horizontal":b;var e=a.padding,f=a.postId,g=d("PolarisPostModalContext.react").useSetPostModal(),h=c("usePolarisAnalyticsContext")(),k=d("PolarisContainerModuleUtils").getContainerModule(h),m=d("usePolarisPost").usePost(f,function(a){return!!a.isVideo}),n=d("usePolarisPost").usePost(f,function(a){return a});a=c("usePolarisViewer")();var o=a==null?void 0:a.id,p=d("polarisAdsSelectors").useFeedAdInfo(f,function(a){return a==null?void 0:a.ad_id}),q=d("polarisAdsSelectors").useFeedAdInfo(f,function(a){return a==null?void 0:a.tracking_token}),r=d("PolarisViewpointActionUtils").getMPKForFeedMedia(n);a=j(c("CarouselAutoplayContext"));var s=a.pauseCarouselAutoplay;a=function(){s(),d("PolarisLogger").logAction("postOptionsClick",{mediaId:f,source:h,type:m?"video":"photo"}),n.isSponsored===!0&&o!=null&&c("InstagramAdActionMenuFalcoEvent").log(function(){return{ad_id:p,m_pk:r,source_of_action:k,tracking_token:q,pigeon_reserved_keyword_module:k,pk:o}}),g("options")};return i.jsx(c("PolarisIGCoreSVGIconButton"),{"data-testid":void 0,hover:i.jsx(l,{color:"ig-secondary-text",orientation:b}),onClick:a,padding:e,children:i.jsx(l,{color:"ig-primary-text",orientation:b})})}a.displayName=a.name+" [from "+f.id+"]";b=i.memo(a);g["default"]=b}),98);
__d("PolarisPostFastPreviewCaption.react",["CarouselAutoplayContext","IGDSBox.react","PolarisPostFastCommentPrimitive.react","PolarisUA","nullthrows","polarisCommentSelectors","react","usePolarisIsOnFeedPage","usePolarisPost"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext;function a(a){var b=a.inModal;a=a.postId;var e=c("usePolarisIsOnFeedPage")();e=e&&b!==!0&&d("PolarisUA").isDesktop();b=d("usePolarisPost").usePostAndOwner(a,function(a,b){return c("nullthrows")(b.id)});var f=d("usePolarisPost").usePostAndOwner(a,function(a,b){return c("nullthrows")(b.username)}),g=d("usePolarisPost").usePostAndOwner(a,function(a,b){return b.isVerified}),j=d("usePolarisPost").usePost(a,function(a){return a.caption});a=d("usePolarisPost").usePost(a,function(a){return a.captionCommentId});a=d("polarisCommentSelectors").useCommentTranslation(a);var k=i(c("CarouselAutoplayContext")),l=k.pauseCarouselAutoplay;k=function(){l()};if(j==null||j==="")return null;(a==null?void 0:a.showTranslatedText)===!0&&a.translatedText!=null&&(j=a.translatedText);return h.jsx(c("IGDSBox.react"),{marginBottom:e?2:1,position:"relative",children:h.jsx(c("PolarisPostFastCommentPrimitive.react"),{isAuthorVerified:g,isCaption:!0,onMoreClick:k,text:j,userId:b,username:f})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostFastPreviewComment.react",["PolarisPostFastCommentPrimitive.react","nullthrows","react","usePolarisComment"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){a=a.commentId;var b=d("usePolarisComment").useCommentAndOwner(a,function(a,b){return c("nullthrows")(b.id)}),e=d("usePolarisComment").useCommentAndOwner(a,function(a,b){return c("nullthrows")(b.username)}),f=d("usePolarisComment").useComment(a,function(a){return a.text});a=d("usePolarisComment").useComment(a,function(a){return a.isAuthorVerified});return h.jsx(c("PolarisPostFastCommentPrimitive.react"),{isAuthorVerified:a,text:f,userId:b,username:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostFastViewAllComments.react",["fbt","IGDSText.react","PolarisBigNumber.react","PolarisConfig","PolarisFastLink.react","PolarisFeedActionOpenPostModalForId","PolarisInFeedPostModalContext","PolarisInteractionsLogger","PolarisLoggedOutCtaLogger","PolarisNavigationActions","PolarisReactRedux","PolarisSponsoredPostContext.react","PolarisTrackingConstants","PolarisUA","XPolarisMobileAllCommentsControllerRouteBuilder","nullthrows","polarisPostModalHelpers","react","usePolarisAnalyticsContext","usePolarisPost"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");e=d("react");var j=e.useCallback,k=e.useContext;function a(a){var b=a.onLoggedOutIntentClickLoginModal,e=a.postId;a=d("usePolarisPost").usePost(e,function(a){return a.numComments||0});var f=d("usePolarisPost").usePost(e,function(a){return c("nullthrows")((a=a.owner)==null?void 0:a.id)}),g=d("usePolarisPost").usePost(e,d("PolarisInteractionsLogger").getMediaTypeFromPost),l=k(d("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext),m=l.canUserSeePersistentCta,n=d("usePolarisPost").usePost(e,function(a){return c("XPolarisMobileAllCommentsControllerRouteBuilder").buildURL((a={shortcode:c("nullthrows")(a.code)},a[d("PolarisTrackingConstants").ENABLE_PERSISTENT_CTA]=m,a))}),o=d("PolarisReactRedux").useDispatch(),p=c("usePolarisAnalyticsContext")(),q=k(d("PolarisInFeedPostModalContext").InFeedPostModalContext),r=!d("PolarisConfig").isLoggedIn()&&d("PolarisUA").isMobile();l=r||d("PolarisConfig").isLoggedIn()&&d("PolarisUA").isDesktop();var s=j(function(a,c){d("PolarisConfig").isLoggedIn()?(d("PolarisInteractionsLogger").logInteractionAction({containerModule:p,eventName:"instagram_organic_comment_view_all",mediaAuthorId:f,mediaId:e,mediaType:g}),d("PolarisUA").isDesktop()&&(a.preventDefault(),o(d("PolarisFeedActionOpenPostModalForId").openPostModalForId(e)),d("polarisPostModalHelpers").logPostModalOpen(p,g,"feed_view_all_comments"),q(e))):r&&(a.preventDefault(),d("PolarisLoggedOutCtaLogger").logLoggedOutCtaEvent({ctaType:"user_action",ctaVersion:"",eventName:"post_comment_view_all_click",module:p||""}),b(c,"post_comment_view_all",e))},[p,o,b,f,e,g,r,q]);return i.jsx(c("PolarisFastLink.react"),{"data-testid":void 0,href:n,onClick:function(a){return s(a,n)},shouldOpenModal:l,children:i.jsx(c("IGDSText.react"),{color:"secondaryText",zeroMargin:!0,children:a===1?h._("View 1 comment"):h._("View all {count} comments",[h._param("count",i.jsx(c("PolarisBigNumber.react"),{value:a}))])})})}a.displayName=a.name+" [from "+f.id+"]";function b(a){return{onLoggedOutIntentClickLoginModal:function(b,c,e){var f=d("PolarisUA").isDesktop()||d("PolarisConfig").isNetzDGEligible()?"feature_wall":"content_wall";a(d("PolarisNavigationActions").openLoginModal(f,b,c,null,!0,e))}}}e=d("PolarisReactRedux").connect(null,b)(a);g["default"]=e}),98);
__d("PolarisPostFastPreviewCommentsList.react",["IGDSBox.react","PolarisConfig","PolarisPanavisionQEHelpers","PolarisPostFastCommentLikeButton.react","PolarisPostFastPreviewComment.react","PolarisPostFastViewAllComments.react","PolarisReactRedux","PolarisUA","polarisCommentSelectors","qex","react","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","usePolarisPost"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useMemo;function j(a){var b=a.postId;a=a.previewCommentIds;var e=c("usePolarisIsOnFeedPage")(),f=c("usePolarisIsOnAdsActivityPage")();e=(e||f)&&d("PolarisUA").isDesktop();var g=e&&d("PolarisPanavisionQEHelpers").hasFamiliarFeed();if(d("PolarisConfig").isNetzDGEligible())return null;return a.length>0?h.jsx(c("IGDSBox.react"),{marginBottom:e?1:0,position:"relative",children:a.map(function(a){return h.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",marginBottom:1,position:"relative",children:[h.jsx(c("PolarisPostFastPreviewComment.react"),{commentId:a}),d("PolarisConfig").isLoggedIn()&&h.jsx(c("IGDSBox.react"),{marginStart:g?2:0,position:"relative",children:h.jsx(c("PolarisPostFastCommentLikeButton.react"),{color:g?"ig-secondary-icon":void 0,commentId:a,postId:b})})]},a)})}):null}j.displayName=j.name+" [from "+f.id+"]";function a(a){var b=a.inModal,e=a.postId;a=c("usePolarisIsOnFeedPage")();a=a&&b!==!0&&d("PolarisUA").isDesktop();b=d("usePolarisPost").usePost(e,function(a){return!a.commentsDisabled});var f=d("PolarisReactRedux").useSelector(function(a){return d("polarisCommentSelectors").getPreviewCommentsForPostId(a,e)}),g=i(function(){return f.map(function(a){return a.id})},[f]),k=d("usePolarisPost").usePost(e,function(a){return(a=a.numComments)!=null?a:0}),l=k>g.length;if(!b||k<=0)return null;b=!d("PolarisConfig").isLoggedIn()&&g.length>0&&c("qex")._("345")!==!0;return h.jsxs(h.Fragment,{children:[l&&h.jsx(c("IGDSBox.react"),{alignItems:"start",marginBottom:a?2:1,position:"relative",children:h.jsx(c("PolarisPostFastViewAllComments.react"),{postId:e})}),h.jsx(j,{postId:e,previewCommentIds:b?g.slice(-1):g})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostOptionsButtonPicker.react",["PolarisPostFastOptionsButton.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx("div",{className:a.buttonClassName,children:h.jsx(c("PolarisPostFastOptionsButton.react"),{postId:a.id})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostPreviewCommentsPicker.react",["CometPlaceholder.react","IGDSBox.react","IGDSSpinner.react","JSResourceForInteraction","PolarisPanavisionQEHelpers","PolarisPostCaptionTranslationPrompt.react","PolarisPostFastPreviewCaption.react","PolarisPostFastPreviewCommentsList.react","PolarisPostVariants","PolarisUA","qex","react","stylex","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","xigRequireInterop"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i,j,k={root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",order:"x9ek82g",overflowY:"x1rife3k",position:"x1n2onr6",$$css:!0},commentsContent:{height:"x3igimt",overflowY:"x1rife3k",paddingStart:"x1swvt13",paddingEnd:"x1pi30zi",position:"x10l6tqk",start:"x17qophe",width:"x1t0p1hu",$$css:!0},commentsContentHeightInModal:{height:"x5yr21d",$$css:!0}};function l(a){var b;j||(j=h.lazy(function(){return c("JSResourceForInteraction")("PolarisPostDesktopCommentsContainer.next").__setRef("PolarisPostPreviewCommentsPicker.react").load().then(function(a){return c("xigRequireInterop")(a)})}));return h.jsx("div",{className:"x78zum5 xdt5ytf x1iyjqo2 x9ek82g x1rife3k x1n2onr6",children:h.jsx("div",{className:c("stylex")(k.commentsContent,a.inModal===!0&&k.commentsContentHeightInModal),children:j!=null&&h.jsx(j,{captionAuthor:{id:a.ownerId,isUnublished:(b=a.owner)==null?void 0:b.isUnpublished,profilePicUrl:(b=a.owner)==null?void 0:b.profilePictureUrl,isVerified:(b=a.owner)==null?void 0:b.isVerified,username:(b=a.owner)==null?void 0:b.username},captionProperties:{id:a.captionId,hasTranslation:a.captionHasTranslation,createdAt:String(a.captionCreatedAt),isEdited:a.captionIsEdited,text:a.caption},mediaId:a.postId})})})}l.displayName=l.name+" [from "+f.id+"]";function m(a){i||(i=h.lazy(function(){return c("JSResourceForInteraction")("PolarisPostComments.react").__setRef("PolarisPostPreviewCommentsPicker.react").load().then(function(a){return c("xigRequireInterop")(a)})}));return h.jsx(i,babelHelpers["extends"]({},a))}m.displayName=m.name+" [from "+f.id+"]";function a(a){var e=c("usePolarisIsOnFeedPage")(),f=c("usePolarisIsOnAdsActivityPage")();e=(e||f)&&d("PolarisPanavisionQEHelpers").hasFamiliarFeed();f=a.variant!==d("PolarisPostVariants").VARIANTS.feed&&!d("PolarisUA").isMobile();var g=c("qex")._("986")===!0;if(f){f=g?l:m;return h.jsx(c("CometPlaceholder.react"),{fallback:h.jsx("div",{className:a.className,children:h.jsx(c("IGDSSpinner.react"),{position:"absolute"})}),children:h.jsx(f,babelHelpers["extends"]({},a))})}g=c("xigRequireInterop")(b("PolarisPostFastPreviewCommentsList.react"))["default"];f=c("xigRequireInterop")(b("PolarisPostFastPreviewCaption.react"))["default"];return h.jsx("div",{className:a.className,children:h.jsxs(c("IGDSBox.react"),{position:"relative",children:[h.jsx(f,{inModal:a.inModal,postId:a.id}),e&&h.jsx(c("PolarisPostCaptionTranslationPrompt.react"),{inFeed:!0,marginBottom:2,postId:a.id}),h.jsx(g,{inModal:a.inModal,postId:a.id})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisHotKeys.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useContext;b={keyMap:{}};var j=h.createContext(b);function a(a){var b=a.children,c=a.className,d=a.isButton;d=d===void 0?!1:d;var e=a.keyMap;a=i(j).keyMap;var f=function(a){return!(a.ctrlKey||a.altKey||a.metaKey)},g=function(){var a;return((a=document.activeElement)==null?void 0:a.tagName.toLowerCase())!=="textarea"&&((a=document.activeElement)==null?void 0:a.tagName.toLowerCase())!=="input"};a=function(a){if(e[a.key]!=null&&g()&&f(a)){var b=e[a.key];b();a.stopPropagation()}};var k=d?"button":"presentation";d=d?"0":"-1";return h.jsx(j.Provider,{value:{keyMap:e},children:typeof b==="function"?b(a,k,d):h.jsx("div",{className:c,onKeyUp:a,role:k,tabIndex:d,children:b})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostFeedbackControls.react",["cx","CarouselAutoplayContext","IGRouter","PolarisCommentButton.react","PolarisFeedActionOpenPostModalForId","PolarisHasMobileIndicator","PolarisInFeedPostModalContext","PolarisInteractionsLogger","PolarisLikeButton.react","PolarisLinkBuilder","PolarisLogger","PolarisNavigationActions","PolarisPostVariants","PolarisReactRedux","PolarisSaveButton.react","PolarisScaledStepIndicator.react","PolarisSponsoredPostContext.react","PolarisTrackingConstants","PolarisUA","XPolarisMobileAllCommentsControllerRouteBuilder","cr:676","joinClasses","polarisPostModalHelpers","qex","react","usePolarisMQTT"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");e=d("react");var j=e.useCallback,k=e.useContext;function a(a){var e=a.analyticsContext,f=a.canViewerProvideFeedback,g=a.canViewerReshare,h=a.className,l=a.code,m=a.commentsDisabled,n=a.containerRef,o=a.currSidecarIndex,p=a.customAlignment,q=a.hideShareButton,r=a.history,s=a.isBlocked,t=a.isLoggedIn,u=a.isSidecar,v=a.isVideo,w=a.likedByViewer,x=a.mediaId,y=a.numSteps,z=a.onCommentClick,A=a.onLikeChange,B=a.onSaveChange,C=a.ownerIsPrivate,D=a.ownerUsername,E=a.postId,F=a.savedByViewer,G=a.sharingFrictionInfo,H=a.variant,I=d("PolarisReactRedux").useDispatch();a=c("usePolarisMQTT")();var J=k(d("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext),K=J.canUserSeePersistentCta,L=k(d("PolarisInFeedPostModalContext").InFeedPostModalContext);J=k(c("CarouselAutoplayContext"));var M=J.pauseCarouselAutoplay,N=j(function(a){var b;switch(a){case"comment":b="post_feedback_comment";break;case"direct":b="post_feedback_direct";break;case"like":b="post_feedback_like";break;case"save":default:b="post_feedback_save";break}d("PolarisUA").isDesktop()?I(d("PolarisNavigationActions").openLoginModal("feature_wall",d("PolarisLinkBuilder").buildMediaLink(l),b)):I(d("PolarisNavigationActions").openLoggedOutIntentDialog(b,D))},[l,I,D]);J=j(function(a){t?A(a,"button"):N("like")},[t,A,N]);var O=j(function(a){t?B(a):N("save")},[t,B,N]),P=j(function(){var a=d("PolarisUA").isMobile();d("PolarisLogger").logAction("commentButtonClicked",{source:e,type:v?"video":"photo",isLoggedIn:t});if(t)if(d("PolarisUA").isDesktop()&&H===d("PolarisPostVariants").VARIANTS.feed)M(),I(d("PolarisFeedActionOpenPostModalForId").openPostModalForId(E)),L(E),d("polarisPostModalHelpers").logPostModalOpen(e,d("PolarisInteractionsLogger").getMediaTypeFromPost({isVideo:v,isSidecar:u}),"feed_comment");else if(H===d("PolarisPostVariants").VARIANTS.feed||a){a=c("XPolarisMobileAllCommentsControllerRouteBuilder").buildURL((a={shortcode:l},a[d("PolarisTrackingConstants").ENABLE_PERSISTENT_CTA]=K,a));r.push(a)}else z();else N("comment")},[e,v,t,H,M,I,E,L,u,r,l,z,N,K]);f=!t||f;if(s||!f)return null;s=C!==!0&&Boolean(g);f=a!=null||c("qex")._("605")===!0;C=u===!0&&d("PolarisHasMobileIndicator").hasMobileIndicator();g=i.jsxs(i.Fragment,{children:[i.jsx(c("PolarisLikeButton.react"),{className:"_aamw","data-testid":void 0,isLiked:w,onChange:J}),!m&&i.jsx(c("PolarisCommentButton.react"),{className:"_aamx","data-testid":void 0,onClick:P}),(s||f)&&q!==!0&&i.jsx("span",{className:"_aamy",children:i.jsx(b("cr:676"),{analyticsContext:e,"data-testid":void 0,mediaId:x,postId:E,sharingFrictionInfo:G})})]});return i.jsxs("section",{className:c("joinClasses")((C?"":"_aamu")+(C?" _alrv":"")+(p==="left"?" _aamv":""),h),ref:n,children:[C?i.jsxs(i.Fragment,{children:[i.jsx("div",{children:g}),i.jsx(c("PolarisScaledStepIndicator.react"),{numSteps:(a=y)!=null?a:0,selectedStep:(w=o)!=null?w:0})]}):g,i.jsx("span",{className:"_aamz",children:i.jsx(c("PolarisSaveButton.react"),{analyticsContext:e,"data-testid":void 0,isSaved:F,onChange:O,postId:E})})]})}a.displayName=a.name+" [from "+f.id+"]";h=d("IGRouter").withIGRouter(a);g["default"]=h}),98);
__d("PolarisPostFooter.react",["IGDSBox.react","PolarisBoostUtils","PolarisPostBoostButton.react","PolarisPostViewInsights.react","nullthrows","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.analyticsContext,e=a.bloksAppId,f=a.boostedStatus,g=a.boostUnavailableReason,i=a.className,j=a.hasViewInsights,k=a.mediaId,l=a.productType;a=a.viewerId;var m=d("PolarisBoostUtils").useGetEligibilityTypeForBoostAdEntries({useCaseIsEligibleForBoostAd:f!=null&&a!=null})!==d("PolarisBoostUtils").BoostEligibilityEnum.INELIGIBLE;return!j&&!m?null:h.jsx("section",{className:i,children:h.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",justifyContent:j?"between":"end",paddingX:4,paddingY:3,position:"relative",children:[j&&h.jsx(c("PolarisPostViewInsights.react"),{bloksAppId:e,mediaId:k}),m&&h.jsx(c("PolarisPostBoostButton.react"),{analyticsContext:b,boostedStatus:c("nullthrows")(f),boostUnavailableReason:g,mediaId:k,productType:c("nullthrows")(l),viewerId:c("nullthrows")(a)})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostLikers.react",["IGDSBox.react","IGDSText.react","IGRouter","PolarisConfig","PolarisFacepile.react","PolarisLikedByListActions","PolarisLikedByListButton.react","PolarisLikedByText.react","PolarisLinkBuilder","PolarisLogger","PolarisNavigationActions","PolarisPostUtils","PolarisReactRedux","PolarisUA","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.$2=function(){c.props.onLike()};c.$3=function(a){c.$1(),!c.props.viewer&&c.props.inModal!==!0?(a.preventDefault(),c.props.onGoToLoginModal(c.props.code)):d("PolarisUA").isDesktop()&&(a.preventDefault(),c.props.onViewLikedByList({code:c.props.code,mediaId:c.props.mediaId}),c.props.onLikeCountClick(a))};return c}var e=b.prototype;e.$1=function(){d("PolarisLogger").logAction("likeCountClick")};e.render=function(){var a=d("PolarisPostUtils").getOrderedUsersForLikedByList(this.props.users,this.props.viewer).map(function(a){return a.id}),b=h.jsx(c("PolarisFacepile.react"),{avatarSize:this.props.avatarSize,border:"transparent",userIds:a}),e=!!this.props.viewer;return h.jsxs(c("IGDSBox.react"),{direction:"row",flex:"grow",position:"relative",children:[a.length>0&&e===!0&&h.jsx(c("IGDSBox.react"),{alignItems:"start",direction:"column",justifyContent:"start",marginEnd:1,position:"relative",children:h.jsx(c("PolarisLikedByListButton.react"),{code:this.props.code,inModal:this.props.inModal,onClick:this.$3,children:b})}),h.jsx(c("IGDSBox.react"),{alignItems:"start",direction:"column",flex:"grow",margin:"auto",position:"relative",wrap:!0,children:h.jsx(c("IGDSText.react"),{zeroMargin:!0,children:h.jsx(c("PolarisLikedByText.react"),{code:this.props.code,hideCounts:this.props.hideCounts,inModal:!!this.props.inModal,onClick:this.$3,onLike:this.$2,topLikers:this.props.topLikers,totalCount:this.props.totalCount,users:this.props.users})})})]})};return b}(h.Component);function a(a){return{onGoToLoginModal:function(b){b=d("PolarisLinkBuilder").buildMediaLink(b);a(d("PolarisNavigationActions").openLoginModal("content_wall",b,null,null,!0,b));return},onViewLikedByList:function(b){b.code;b=b.mediaId;return a(d("PolarisLikedByListActions").requestNativeLikedByList(b))},onLoggedOutIntentClickLoginModal:function(b,c){var e=d("PolarisUA").isDesktop()||d("PolarisConfig").isNetzDGEligible()?"feature_wall":"content_wall";a(d("PolarisNavigationActions").openLoginModal(e,b,c,null,!0,b))}}}e=d("IGRouter").withIGRouter(d("PolarisReactRedux").connect(null,a)(b));g["default"]=e}),98);
__d("PolarisPostSocialProof.react",["PolarisPanavisionQEHelpers","PolarisPostLikers.react","PolarisPostVariants","PolarisPostViews.react","PolarisShouldHideLikeCountsWithControls","PolarisUA","nullthrows","polarisGetPostFromGraphMediaInterface","react","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.analyticsContext,e=a.canLike,f=a.className,g=a.code,i=a.containerRef,j=a.inModal,k=a.likeAndViewCountsDisabled,l=a.likedByViewer,m=a.likers,n=a.mediaId,o=a.numPreviewLikes,p=a.onLikeChange,q=a.onLikeCountClick,r=a.productType,s=a.topLikers,t=a.variant,u=a.videoViews,v=a.viewer;a=a.viewerIsOwner;var w=u!=null&&u>0,x=o!==0,y=c("usePolarisIsOnFeedPage")(),z=c("usePolarisIsOnAdsActivityPage")();t===d("PolarisPostVariants").VARIANTS.feed?t=x||w:t=x||w||e;x=d("PolarisShouldHideLikeCountsWithControls").shouldHideLikeCountsWithControls(v==null?void 0:v.hideLikeAndViewCounts,k,a);e=w&&!x&&!d("polarisGetPostFromGraphMediaInterface").isClipsProductType(r);if(!t)return null;k=(y||z)&&j!==!0&&d("PolarisUA").isDesktop()&&d("PolarisPanavisionQEHelpers").hasFamiliarFeed();return h.jsx("section",{className:f,ref:i,children:e?h.jsx(c("PolarisPostViews.react"),{analyticsContext:b,likeCount:o,viewCount:c("nullthrows")(u)}):h.jsx(c("PolarisPostLikers.react"),{avatarSize:k?"micro":void 0,code:g,hideCounts:x,inModal:!!j,likedByViewer:l,mediaId:n,onLike:function(){p(!0,"beTheFirstPrompt")},onLikeCountClick:q,topLikers:s,totalCount:o,users:m,viewer:v})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostDetailsSection.react",["cx","IGDSBox.react","IGDSText.react","PolarisAsyncCommentLikedByListContainer","PolarisAsyncLikedByListContainer","PolarisConfig","PolarisFeedPageConstants","PolarisGenericStrings","PolarisHoldoutChecks","PolarisHotKeys.react","PolarisInteractionsLogger","PolarisLikedByListVariant","PolarisPanavisionQEHelpers","PolarisPendingCommentState","PolarisPoliticalContextButton.react","PolarisPostCaptionTranslationPrompt.react","PolarisPostCommentInputPicker","PolarisPostConstants","PolarisPostFeatures","PolarisPostFeedbackControls.react","PolarisPostFooter.react","PolarisPostModalRenderingContext","PolarisPostPreviewCommentsPicker.react","PolarisPostSocialProof.react","PolarisPostTimestamp.react","PolarisPostVariants","PolarisReactRedux","PolarisUA","isStringNullOrEmpty","nullthrows","polarisAdsSelectors","react","usePolarisDisplayProperties","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","usePrevious"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useEffect,k=b.useRef,l=b.useState;function a(a){var b=a.analyticsContext,e=a.bloksAppId,f=a.currSidecarIndex,g=a.currSidecarItem,h=a.handleLikeChange,m=a.handleSaveChange,n=a.hasDenserFeedRedesign,o=a.hasSidebarInRedesign,p=a.hasViewInsights,q=a.initialCommentsQuery,r=a.owner,s=a.permalinkedCommentId,t=a.permalinkedReplyId,u=a.post,v=a.postAuthorId,w=a.postAuthorUsername,x=a.postFeedbackControlsRef,y=a.postHeader,z=a.redesignWithoutSidebar,A=a.redesignWithSidebar,B=a.showDetailsAsSidebar,C=a.variant,D=a.viewer,E=!d("PolarisUA").isDesktop()&&c("PolarisHoldoutChecks").H12023.rollout();a=l(null);var F=a[0],G=a[1];a=l(!1);var aa=a[0],H=a[1];a=l(!1);var ba=a[0],I=a[1];a=c("usePolarisDisplayProperties")();var ca=a.viewportWidth,J=k(null),K=function(){return u.commentsDisabled!==!0&&u.commentingDisabledForViewer!==!0&&(ba||ca>=d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF)};a=d("PolarisReactRedux").useSelector(function(a){return a.pendingComments.get(u.id,d("PolarisPendingCommentState").EMPTY_PENDING_COMMENT)});var L=a.committing,M=c("usePrevious")(L);a=d("PolarisPostModalRenderingContext").usePolarisPostModalRenderingContext();var N=a.isInModal,O=function(){I(!0),J.current&&J.current.focusAndScroll()},da=function(){H(!1)},ea=function(a){H(!0)},fa=function(){G(null)},ga=function(a){G(a)};a=D?{c:function(){u.commentsDisabled!==!0&&O()}}:{};var P=c("usePrevious")(u);j(function(){P!=null&&u!=null&&P!==u&&(G(null),H(!1))},[u,P]);j(function(){M===!0&&L===!1&&I(!1)},[L,M]);var Q=d("PolarisPostFeatures").usePolarisPostFeatures({post:u,owner:r,variant:C}),R=Q.canViewerProvideFeedback,S=Q.commentsAreStacked,T=Q.hasThreadedSidebarComments,U=Q.isBlocked,V=Q.isLoggedIn,W=Q.isSidecar,ha=Q.isStackedScreenSize,ia=Q.showPostButton,X=d("polarisAdsSelectors").useFeedAdInfo(u==null?void 0:u.id,function(a){return a}),Y=X==null?void 0:(Q=X.political_context)==null?void 0:Q.byline_text;Q=c("usePolarisIsOnFeedPage")();var Z=c("usePolarisIsOnAdsActivityPage")();Q=(Q||Z)&&N!==!0&&d("PolarisUA").isDesktop();var $=Q&&d("PolarisPanavisionQEHelpers").hasFamiliarFeed();Z=i.jsx(c("IGDSBox.react"),{flex:A?"grow":"none",position:"relative",children:i.jsx(c("PolarisHotKeys.react"),{keyMap:a,children:function(a,j,k){return i.jsxs("div",{className:(!N===!0?"_ae1h":"")+(C===d("PolarisPostVariants").VARIANTS.feed?" _ae1i":"")+(B&&!N===!0?" _ae1j":"")+(N?" _ae1k":"")+(!N===!0&&n?" _ae1l":"")+(z?" _ae1m":"")+(N===!0?" _ae2q":"")+(A?" _ae2r":""),onKeyUp:a,role:j,tabIndex:k,children:[(N===!0?o:!S)?y:null,i.jsxs("div",{className:"_ae2s"+(B?" _ae3v":"")+(T?" _ae3w":"")+(p?" _ae3x":"")+($?" _aggd":""),children:[i.jsx(c("PolarisPostFooter.react"),{analyticsContext:b,bloksAppId:e,boostedStatus:u.boostedStatus,boostUnavailableReason:u.boostUnavailableReason,className:(d("PolarisUA").isMobile()?"_alfb":"")+(d("PolarisUA").isMobile()?"":" _ae3y")+(o?"":" _ae3z")+(S&&W?" _ae3-":""),hasViewInsights:p,mediaId:u.id,productType:u.productType,viewerId:D==null?void 0:D.id}),i.jsx(c("PolarisPostFeedbackControls.react"),{analyticsContext:b,canViewerProvideFeedback:R,canViewerReshare:u.viewerCanReshare,className:"_ae3_"+(n?" _ae40":"")+(n&&T?" _ae41":"")+(B?" _ae47":"")+(T?" _ae48":"")+($?" _agge":""),code:c("nullthrows")(u.code),commentsDisabled:!!u.commentsDisabled,containerRef:x,currSidecarIndex:f,hideShareButton:u.igMediaSharingDisabled===!0,isBlocked:U,isLoggedIn:V,isSidecar:W,isVideo:!!u.isVideo,likedByViewer:!!u.likedByViewer,mediaId:g!=null?g.id:u.id,numSteps:(a=u.sidecarChildren)==null?void 0:a.length,onCommentClick:O,onLikeChange:h,onSaveChange:m,ownerIsPrivate:r.isPrivate,ownerUsername:r.username,postId:u.id,savedByViewer:!!u.savedByViewer,shareIds:u.shareIds,sharingFrictionInfo:g!=null?g.sharingFrictionInfo:u.sharingFrictionInfo,variant:C}),Y!=null&&i.jsx(c("PolarisPoliticalContextButton.react"),{className:"_ae52"+(T?" _ae5k":"")+(n&&T?" _ae5l":""),text:Y}),u.code!=null&&i.jsx(c("PolarisPostSocialProof.react"),{analyticsContext:b,canLike:!U&&R,className:"_ae5m"+(B?" _ae5n":"")+(T?" _ae5o":"")+(n&&T?" _ae5p":"")+($?" _agge":""),code:c("nullthrows")(u.code),inModal:N,likeAndViewCountsDisabled:u.likeAndViewCountsDisabled,likedByViewer:!!u.likedByViewer,likers:u.likers||[],mediaId:u.id,numPreviewLikes:u.numPreviewLikes||0,onLikeChange:h,onLikeCountClick:ea,productType:u.productType,topLikers:u.topLikers,variant:C,videoViews:u.videoViews,viewer:D,viewerIsOwner:v===(D==null?void 0:D.id)}),i.jsx(c("PolarisPostPreviewCommentsPicker.react"),{analyticsContext:b,caption:u.caption,captionCreatedAt:u.captionCreatedAt,captionHasTranslation:u.captionHasTranslation,captionId:u.captionCommentId,captionIsEdited:u.captionIsEdited,className:"_ae5q"+(E?"":" _akdn")+(E?" _akdo":"")+(B?" _ae5r":"")+(T?" _ae5s":"")+(n&&T?" _ae5t":"")+($?" _agge":""),code:u.code,commentingDisabledForViewer:(j=u.commentingDisabledForViewer)!=null?j:!1,commentsAreStacked:S,commentsDisabled:u.commentsDisabled,hasRankedComments:u.hasRankedComments,id:u.id,initialCommentsQuery:q,inModal:N,mediaType:d("PolarisInteractionsLogger").getMediaTypeFromPost(u),onLikeCountClick:ga,owner:r,ownerId:v,permalinkedCommentId:s,permalinkedReplyId:t,postedAt:c("nullthrows")(u.postedAt),postId:u.id,showCommentOptionsInline:!0,title:u.title,variant:C}),!$&&i.jsx("div",{className:(E?"":"_ae5u")+(E?" _akdp":"")+(B?" _ae5v":"")+(T?" _ae5w":"")+(n&&T?" _ae5x":""),children:u.isSponsored?null:i.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",position:"relative",children:[i.jsx(c("PolarisPostTimestamp.react"),{code:c("nullthrows")(u.code),postedAt:c("nullthrows")(u.postedAt)}),b===d("PolarisFeedPageConstants").FEED_PAGE_ANALYTICS_CONTEXT&&i.jsx(c("IGDSBox.react"),{marginStart:2,position:"relative",children:i.jsx(c("PolarisPostCaptionTranslationPrompt.react"),{inFeed:!0,postId:u.id})})]})}),(d("PolarisConfig").isIOS()||K())&&i.jsx(d("PolarisPostCommentInputPicker").PostCommentInputPicker,{adInfo:X,analyticsContext:b,canViewerProvideFeedback:R,className:"_ae5y"+(B?" _ae5z":"")+(n?" _ae5_":"")+(n&&T?" _ae60":"")+(K()?"":" _ae61")+(ha?"":" _ae62"),hasPostButton:ia,id:u.id,inModal:N,isLoggedIn:V,isRevampVersion:!1,isVideo:u.isVideo,ownerId:r.id,ref:J},u.id),!K()&&d("PolarisUA").isDesktop()&&u.commentsDisabled!==!0&&u.commentingDisabledForViewer===!0&&i.jsx("div",{className:"_ae63"+(n?" _ae64":"")+($?" _agnb":""),children:i.jsx(c("IGDSText.react"),{color:"tertiaryText",textAlign:"center",children:d("PolarisGenericStrings").COMMENTING_LIMITED})})]}),aa&&i.jsx(c("PolarisAsyncLikedByListContainer"),{display:c("PolarisLikedByListVariant").Modal,isOwnerTheViewer:(D==null?void 0:D.id)===v,likeAndViewCountsDisabled:u.likeAndViewCountsDisabled,likeCount:u.numLikes||0,mediaId:u.id,onClose:da,ownerUsername:w,productType:(k=u.productType)!=null?k:"",shortcode:c("nullthrows")(u.code),viewCount:u.videoViews}),!c("isStringNullOrEmpty")(F)&&i.jsx(c("PolarisAsyncCommentLikedByListContainer"),{commentId:F,display:c("PolarisLikedByListVariant").Modal,inSidebar:!S,onClose:fa})]})}})});return A?i.jsx("div",{className:"_ae65",children:Z}):Z}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostHeader.react",["cx","fbt","IGDSBox.react","IGDSButton.react","IGDSText.react","PolarisAudioAttributionText.react","PolarisAvatarWithStoriesContainer.react","PolarisClipsHelpers","PolarisEligibleForCommissionUnit.react","PolarisFeedPageConstants","PolarisFollowButtonContainer.react","PolarisGroupProfileAvatar.react","PolarisGroupProfileUtils","PolarisHashtagLink.react","PolarisIGCoreText","PolarisIGCoreVerifiedBadge","PolarisLinkBuilder","PolarisLocationLink.react","PolarisMiddleDot.react","PolarisPanavisionQEHelpers","PolarisProfileClickEventLoggerProvider.react","PolarisQueryParams","PolarisSponsoredLabel.react","PolarisSponsoredPostContext.react","PolarisSponsorsUnit.react","PolarisTagAvatar.react","PolarisTimestamp.react","PolarisTrackingNodeProvider.react","PolarisTransparencyLabel.react","PolarisTransparencyUtils","PolarisUA","PolarisUserAvatar.react","PolarisUserAvatarWithStories.react","PolarisUserHoverCard.react","PolarisUserLink.react","URI","err","nullthrows","react","usePolarisIsOnAdsActivityPage","usePolarisIsOnFeedPage","usePolarisTrackingDataProfileURLParams"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");b=d("react");var k=b.useContext,l=b.useState,m=i._("and");function n(a,b){a=a;var c=a==null?void 0:a.song_name,d=a==null?void 0:a.artist_name;b=(a==null?void 0:a.uses_original_audio)&&b===a.artist_name;return{audioName:c,audioArtist:d,isMediaOwnerOriginalSound:b}}function o(a){a=a.owner;var b=d("usePolarisTrackingDataProfileURLParams").usePolarisTrackingDataProfileURLParams(k(d("PolarisSponsoredPostContext.react").PolarisSponsoredPostContext).canUserSeePersistentCta);b=new(c("URI"))(d("PolarisLinkBuilder").buildUserLink(c("nullthrows")(a.username))).setQueryData(b).toString();return j.jsx(c("IGDSButton.react"),{display:"inline",href:b,label:c("nullthrows")(a.username),variant:"secondary_link"})}o.displayName=o.name+" [from "+f.id+"]";function p(a){var b=a.clipsAudioAttributionInfo,d=a.onDisabledClipsAudioAttributionClick;a=a.owner;b=b;var e=n(b,a.username),f=e.audioArtist,g=e.audioName;e=e.isMediaOwnerOriginalSound;var h=b==null?void 0:b.audio_id;a=a.isPrivate===!0;var i=(b==null?void 0:b.should_mute_audio)===!0;b=b==null?void 0:b.should_mute_audio_reason;return j.jsx(c("PolarisAudioAttributionText.react"),{audioArtist:f,audioID:h,audioName:g,className:"_aaqn",isMediaOwnerOriginalSound:e,isMutedAudio:i,isOwnerPrivate:a,muteAudioReason:b,onDisabledClipsAudioAttributionClick:d})}p.displayName=p.name+" [from "+f.id+"]";function q(a){var b=a.audioAttributionText,e=a.clipsAudioAttributionInfo,f=a.followHashtagInfo,g=a.isOwnerGroupProfile,h=a.isSponsored,i=a.location,k=a.mediaId,l=a.owner,m=a.postAuthor,o=a.showEligibleForCommissions,p=a.showSponsors,q=a.sponsoredLabel;a=a.sponsors;var r=c("usePolarisIsOnAdsActivityPage")(),s=d("PolarisTransparencyUtils").shouldShowTransparencyLabel(l)&&j.jsx(c("PolarisTransparencyLabel.react"),{mediaId:k,screen:"feed",user:l});p=p&&j.jsx(c("PolarisSponsorsUnit.react"),{className:"_aaqi",loggingData:{mediaId:k},sponsors:a||[]});k=f&&j.jsx(c("PolarisUserLink.react"),{className:"_adkn",username:c("nullthrows")(l.username)});a=o&&j.jsx(c("PolarisEligibleForCommissionUnit.react"),{className:"_aaqi"});f=i&&j.jsx(c("PolarisIGCoreText").Body2,{color:"ig-secondary-text",display:"truncated",zeroMargin:!0,children:j.jsx(c("PolarisLocationLink.react"),{className:"_aaqk",location:c("nullthrows")(i)})});o=g===!0&&(m==null?void 0:m.username)!=null&&j.jsx(c("PolarisUserLink.react"),{className:"_adkn",username:c("nullthrows")(m.username),children:d("PolarisGroupProfileUtils").getGroupMediaPostAuthorAttributionText(c("nullthrows")(m.username))});i=n(e,l.username);if(h===!0&&q==null&&!r)throw c("err")("Unexpected: a feed ad is being rendered without a sponsored label");return j.jsxs("div",{className:"_aaql",children:[j.jsx(c("IGDSText.react").Body2,{zeroMargin:!0,children:j.jsxs("div",{className:"x78zum5 xdt5ytf",children:[o,s,p,q!=null&&j.jsx(c("PolarisSponsoredLabel.react"),{label:q,placementHasBasicAds:!0}),a,k]})}),d("PolarisClipsHelpers").hasAudioAttributionText(i)?b:j.jsx("div",{className:"_aaqm",children:f})]})}q.displayName=q.name+" [from "+f.id+"]";function r(a){var b=a.analyticsContext,e=a.coauthorProducers,f=a.followHashtagInfo,g=a.headerAvatarSize,h=a.isOwnerGroupProfile,i=a.isTagAvatarLink,k=a.onTagAvatarShowRing,l=a.owner;a=a.postAuthor;function m(){return b===d("PolarisFeedPageConstants").FEED_PAGE_ANALYTICS_CONTEXT?"reel_feed_timeline_item_header":"reel_feed_timeline"}if(f){var n=f.name;f=f.profile_pic_url;return j.jsx(c("PolarisAvatarWithStoriesContainer.react"),{animateOnLoad:!0,entrypoint:"reel_feed_timeline",onShowRing:k,size:30,tagName:n,children:j.jsxs(j.Fragment,{children:[f!=null&&f.length>0&&j.jsx(c("PolarisTagAvatar.react"),{isLink:i,profilePictureUrl:f,tagName:n}),j.jsx("div",{className:"_aaqo",children:"#"})]})})}if(e==null?void 0:e.length){k=e[0];return j.jsxs(c("IGDSBox.react"),{height:32,position:"relative",width:32,children:[j.jsx(c("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:k.profilePictureUrl,size:24,username:k.username}),j.jsx("div",{className:"_aaqp",children:j.jsx(c("IGDSBox.react"),{alignItems:"end",direction:"row",justifyContent:"end",position:"relative",children:j.jsx(c("PolarisUserAvatar.react"),{isLink:!1,profilePictureUrl:l.profilePictureUrl,size:24,username:l.username})})})]})}return h===!0&&a?j.jsx(c("PolarisGroupProfileAvatar.react"),{groupProfile:l,postAuthor:a}):j.jsx(c("PolarisUserHoverCard.react"),{display:"block",isUserAvailable:!l.isUnpublished,triggerAnalyticsContext:"post_owner_avatar",userId:l.id,children:j.jsx(c("PolarisUserAvatarWithStories.react"),{className:"_aaqq",isLink:!l.isUnpublished,profilePictureUrl:l.profilePictureUrl,showRingWhenSeen:!1,size:g,storyEntrypoint:m(),userId:l.id,username:l.username})})}r.displayName=r.name+" [from "+f.id+"]";function s(a){var b=a.coauthorProducers,d=a.followHashtagInfo,e=a.owner;a=a.showVerifiedBadge;if(d)return j.jsx(c("IGDSText.react").Body,{zeroMargin:!0,children:j.jsx(c("PolarisHashtagLink.react"),{className:"_aaqr",tag:d.name})});if(e.isUnpublished===!0)return j.jsx(c("IGDSText.react").Body,{color:"secondaryText",zeroMargin:!0,children:j.jsx("span",{className:"_aaqs",children:e.fullName!=null&&e.fullName!==""?e.fullName:e.username})});if(b==null?void 0:b.length){d=b[0];return j.jsx("div",{className:"_aaqt _aaqu",children:j.jsxs(c("IGDSText.react").BodyEmphasized,{zeroMargin:!0,children:[j.jsx(c("PolarisUserHoverCard.react"),{display:"inline",isUserAvailable:!e.isUnpublished,triggerAnalyticsContext:"post_owner",userId:e.id,children:j.jsx(o,{owner:e})}),j.jsxs(c("IGDSText.react").Body,{children:[j.jsx("span",{className:"_aaqv"}),m,j.jsx("span",{className:"_aaqv"})]}),j.jsx(c("PolarisUserHoverCard.react"),{display:"inline",isUserAvailable:!d.isUnpublished,triggerAnalyticsContext:"post_owner",userId:d.id,children:j.jsx(o,{owner:d})})]})})}return j.jsx("div",{className:"_aaqt",children:j.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",display:"flex",position:"relative",children:[j.jsx(c("IGDSText.react").BodyEmphasized,{zeroMargin:!0,children:j.jsx(c("PolarisUserHoverCard.react"),{display:"inline",isUserAvailable:!e.isUnpublished,triggerAnalyticsContext:"post_owner",userId:e.id,children:j.jsx(o,{owner:e})})}),a===!0&&e.isVerified===!0&&j.jsx(c("IGDSBox.react"),{marginStart:1,position:"relative",children:j.jsx(c("PolarisIGCoreVerifiedBadge"),{size:"small"})})]})})}s.displayName=s.name+" [from "+f.id+"]";function a(a){var b=a.analyticsContext,e=a.clipsAudioAttributionInfo,f=a.coauthorProducers,g=a.followHashtagInfo,h=a.headerAvatarSize,i=a.inModal,k=a.isAffiliate,m=a.isOwnerGroupProfile,n=a.isPaidPartnership,o=a.isSponsored,t=a.location,u=a.mediaId,v=a.onDisabledClipsAudioAttributionClick,w=a.onProfileClick,x=a.owner,y=a.postAuthor,z=a.postedAt,A=a.reducedAvatarMargin,B=a.shouldShowFollowButton,C=a.showVerifiedBadge,D=a.sidebarVariantOptionsButton,E=a.sponsoredLabel,F=a.sponsors;a=a.viewer;var G=l(!0),H=G[0],I=G[1];G=!g&&n;n=!g&&!n&&k;function J(){I(!1)}k=j.jsx(p,{clipsAudioAttributionInfo:e,onDisabledClipsAudioAttributionClick:v,owner:x});v=c("usePolarisIsOnFeedPage")();var K=c("usePolarisIsOnAdsActivityPage")();v=(v||K)&&i!==!0&&d("PolarisUA").isDesktop();K=v&&d("PolarisPanavisionQEHelpers").hasFamiliarFeed();return j.jsx(c("PolarisProfileClickEventLoggerProvider.react"),{onProfileClick:w,children:j.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:230,children:j.jsxs("header",{className:"_aaqw"+(v?" _aaqx":"")+(K?" _aggb":""),"data-testid":void 0,children:[j.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:69,children:j.jsx("div",{children:j.jsx(r,{analyticsContext:b,coauthorProducers:f,followHashtagInfo:g,headerAvatarSize:h,isOwnerGroupProfile:m,isTagAvatarLink:H,onTagAvatarShowRing:J,owner:x,postAuthor:y})})}),j.jsxs("div",{className:"_aaqy"+(D&&!v?" _aaqz":"")+(D&&v?" _aaq-":"")+(A===!0?" _aaq_":""),children:[j.jsxs("div",{className:"_aar0"+(B?" _ad95":"")+(D?" _aar1":""),children:[j.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:10,children:j.jsx("div",{className:"x78zum5",children:j.jsx(s,{coauthorProducers:f,followHashtagInfo:g,owner:x,showVerifiedBadge:C})})}),!o&&z!=null&&K&&j.jsx(c("IGDSBox.react"),{alignItems:"center",direction:"row",display:"flex",position:"relative",children:j.jsx("div",{className:"_ajqd",children:j.jsxs(c("IGDSText.react"),{color:"secondaryText",size:"body",zeroMargin:!0,children:[j.jsx(c("PolarisMiddleDot.react"),{color:"ig-secondary-text"}),j.jsx(c("PolarisTimestamp.react"),{isLong:!1,value:z})]})})}),B&&j.jsxs("div",{className:"_aar2",children:[j.jsx("div",{className:"_aar3",children:j.jsx(c("PolarisMiddleDot.react"),{color:K?"ig-secondary-text":void 0})}),j.jsx(c("PolarisFollowButtonContainer.react"),{analyticsContext:b,borderless:!0,"data-testid":void 0,isInline:!0,isUserGroupProfile:m,shouldPromptToFollow:a!=null&&d("PolarisQueryParams").isFromLoginWithFollowParam(),userId:x.id,username:(i=x.username)!=null?i:""})]})]}),j.jsx(q,{audioAttributionText:k,clipsAudioAttributionInfo:e,followHashtagInfo:g,isOwnerGroupProfile:m,isSponsored:o,location:t,mediaId:u,owner:x,postAuthor:y,postId:u,showEligibleForCommissions:n,showSponsors:G,sponsoredLabel:E,sponsors:F})]})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostHeaderFavoritedIconButton.react",["IGDSBox.react","PolarisFavoritesStrings","PolarisIGCoreSVGIconButton","PolarisIGCoreStarPanoFilledGradientIcon","PolarisLogger","PolarisPostModalContext.react","react","usePolarisAnalyticsContext"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){a=a.isFavorited;var b=d("PolarisPostModalContext.react").useSetPostModal(),e=c("usePolarisAnalyticsContext")();if(a&&(e==="feedPage"||e==="postPage"))return h.jsx(c("PolarisIGCoreSVGIconButton"),{onClick:function(){d("PolarisLogger").logAction("favoriteIconInPostHeaderClick"),b("favorites")},children:h.jsx(c("IGDSBox.react"),{marginEnd:2,position:"relative",children:h.jsx(c("PolarisIGCoreStarPanoFilledGradientIcon"),{alt:d("PolarisFavoritesStrings").FAVORITED_ICON_ALT,size:16})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisUnsaveFromCollectionDialog.react",["fbt","IGCoreDialog","PolarisGenericStrings","PolarisUA","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=a.onClose,c=a.onUnsaveFromAll;a=a.onUnsaveFromCollection;return i.jsxs(d("IGCoreDialog").IGCoreDialog,{body:a?h._("You can remove from this collection or remove it from everything you've saved."):h._("Removing this from saved will also remove it from collections."),onModalClose:b,title:h._("Remove From Saved and Collections?"),children:[a&&i.jsx(d("IGCoreDialog").IGCoreDialogItem,{color:"ig-error-or-destructive",onClick:a,children:h._("Remove from collection")}),i.jsx(d("IGCoreDialog").IGCoreDialogItem,{color:d("PolarisUA").isDesktop()?"ig-error-or-destructive":"ig-primary-button",onClick:c,children:h._("Remove")}),i.jsx(d("IGCoreDialog").IGCoreDialogItem,{onClick:b,children:d("PolarisGenericStrings").CANCEL_TEXT})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPost.react",["cx","IGDSBox.react","PolarisCarouselAutoplayProvider.react","PolarisErrorBoundary.react","PolarisGroupProfileUtils","PolarisHoldoutChecks","PolarisHotKeys.react","PolarisIGCoreConstants","PolarisInsightsUtils","PolarisLogger","PolarisMediaContainer.react","PolarisOrganicImpressionAction","PolarisPanavisionQEHelpers","PolarisPostActionLikePost","PolarisPostActionRemovePostFromCollection","PolarisPostActionSavePost","PolarisPostActionUnlikePost","PolarisPostActionUnsavePost","PolarisPostConstants","PolarisPostDetailsSection.react","PolarisPostFeatures","PolarisPostHeader.react","PolarisPostHeaderFavoritedIconButton.react","PolarisPostModalContext.react","PolarisPostModalRenderingContext","PolarisPostOptionsButtonPicker.react","PolarisPostOverlayInfoFooterCTA.react","PolarisPostPageRouteReferrerContext.react","PolarisPostSuggestedHeader.react","PolarisPostToast.react","PolarisPostToastProvider.react","PolarisPostUtils","PolarisPostVariants","PolarisReactRedux","PolarisSavedPostsActionEditCollection","PolarisSavedPostsTypes","PolarisShareSheetContext","PolarisSponsoredPostCTAFooter.react","PolarisTrackingNodeProvider.react","PolarisUA","PolarisUnsaveFromCollectionDialog.react","PolarisViewpointActionUtils","PolarisViewpointReact.react","PolarisVpvdImpressionAction","browserHistory","hero-tracing","joinClasses","nullthrows","polarisAdsSelectors","polarisDeveloperSettings","polarisPostModalHelpers","polarisPostSelectors","polarisRelationshipSelectors","polarisUserSelectors","polarisWithPPRLogging","qex","react","useMergeRefs","usePolarisDisplayProperties","usePolarisIsOnFeedPage","usePolarisShowFooterCTA","usePrevious"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");e=d("react");var j=e.useContext,k=e.useEffect,l=e.useRef,m=e.useState;function a(a){var b=a.analyticsContext,e=a.autoplay,f=a.className,g=a.id,h=a.initialCarouselIndex,n=a.initialCommentsQuery,o=a.isVisible,aa=a.lightLetterbox,p=a.onMediaRendered,ba=a.permalinkedCommentId,ca=a.permalinkedReplyId,q=a.position,r=a.variant,s=r===void 0?d("PolarisPostVariants").VARIANTS.flexible:r,da=a.visiblePosition,t=a.willScrollTo;r=a.isSponsored;r=r===void 0?!1:r;var ea=a.adImpressionRefs,fa=a.viewpointActionsForSponsoredPost,u=a.onProfileClick,ga=a.shortcode,v=d("PolarisReactRedux").useDispatch(),w=d("PolarisReactRedux").useSelector(function(a){return d("polarisPostSelectors").getPostById(a,g)}),x=c("nullthrows")(w.owner).id;a=(a=w.group)==null?void 0:a.id;var ha=(a=a)!=null?a:x;a=j(c("PolarisPostPageRouteReferrerContext.react"));a=a.referrerTracePolicy;var y=d("PolarisReactRedux").useSelector(function(a){return d("polarisUserSelectors").getUserById(a,x)}),z=d("PolarisReactRedux").useSelector(function(a){return d("polarisUserSelectors").getUserById(a,ha)}),ia=d("PolarisReactRedux").useSelector(function(a){return d("polarisRelationshipSelectors").getRelationship(a.relationships,ha)}),A=d("PolarisReactRedux").useSelector(d("polarisUserSelectors").getViewer),ja=!!(A==null?void 0:A.canSeeOrganicInsights),B=!!w.canSeeInsightsAsBrand,C=d("polarisAdsSelectors").useFeedAdInfo(w==null?void 0:w.id,function(a){return a}),D=c("usePolarisDisplayProperties")(),ka=D.viewportHeight;D=D.viewportWidth;var E=d("PolarisPostModalRenderingContext").usePolarisPostModalRenderingContext(),F=E.isInModal,G=(h=(E=h)!=null?E:d("PolarisPostUtils").getInitialSidecarIndexFromPost(w))!=null?h:0;w.isSidecar===!0&&(G<0||w.sidecarChildren!=null&&G>=w.sidecarChildren.length)&&(G=0);E=m(G);var H=E[0],la=E[1];h=m({});var I=h[0],ma=h[1];E=m(!1);h=E[0];var na=E[1];E=m({});var J=E[0],oa=E[1];E=m(!1);var pa=E[0],K=E[1];E=m(!1);var qa=E[0],ra=E[1];E=m(null);var sa=E[0],ta=E[1];E=l(null);k(function(){t==="top"&&window.setTimeout(function(){window.scrollTo(0,0)})},[t]);var L=c("usePrevious")(w);k(function(){L!=null&&w.id!==L.id&&(ma({}),oa({}))},[w,L]);k(function(){ga!=null&&c("qex")._("971")===!0&&window.history.replaceState(babelHelpers["extends"]({},history.state),"","?img_index="+(H+1))},[H,ga]);var ua=function(a){na(!0),p!=null&&p(w.id,a)},va=function(a){la(a)},M=function(a,c){c={sourceOfLike:c,source:b,mediaId:w.id,trackingToken:w.trackingToken,mediaAuthorId:(c=w.owner)==null?void 0:c.id};var e=null;(C==null?void 0:C.ad_id)!=null&&(C==null?void 0:C.tracking_token)!=null&&Y!=null&&(e={adId:C==null?void 0:C.ad_id,adTrackingToken:C==null?void 0:C.tracking_token,viewerId:Y});a?w.likedByViewer!==!0&&v(d("PolarisPostActionLikePost").likePost(w.id,c,e)):v(d("PolarisPostActionUnlikePost").unlikePost(w.id,c,e))},wa=function(){M(!0,"double_tap_media")},xa=function(a){var c={source:b},e=null;(C==null?void 0:C.ad_id)!=null&&(C==null?void 0:C.tracking_token)!=null&&Y!=null&&(e={adId:C==null?void 0:C.ad_id,adTrackingToken:C==null?void 0:C.tracking_token,analyticsContext:b,followStatus:d("PolarisViewpointActionUtils").getFollowStatus(ia),post:w,viewerId:Y});a?w.savedByViewer!==!0&&v(d("PolarisPostActionSavePost").savePost(w.id,c,e)):w.savedByViewer===!0&&(w.savedByViewerToCollection===!0?(d("PolarisLogger").logAction("removeSavedItemFromCollectionDialogShown"),K(!0)):v(d("PolarisPostActionUnsavePost").unsavePost(w.id,c,e)))},ya=function(){d("PolarisLogger").logAction("removeSavedItemFromCollectionDialogCancelled"),K(!1)},za=function(){K(!1),v(d("PolarisPostActionUnsavePost").unsavePost(w.id,{source:b})),d("PolarisLogger").logAction("removeSavedItemFromCollectionDialogAccepted")},Aa=function(){var e={source:b};K(!1);var a=d("browserHistory").browserHistory.location.pathname;a=d("polarisPostModalHelpers").getCollectionIdFromPath(a);a!=null&&A!=null&&(v(d("PolarisPostActionRemovePostFromCollection").removePostFromCollection({collectionId:a,postId:w.id,analyticsData:e})),v(d("PolarisSavedPostsActionEditCollection").editCollection({collectionId:a,postIdsToRemove:[w.id],userId:c("nullthrows")(A==null?void 0:A.id),source:e.source})))},Ba=function(a){Da(a)&&Fa(a.id)},Ca=function(a){Ga(a)},Da=function(a){return I[a.id]===!0},Ea=function(a){return J[a]===!0},Fa=function(a){var b=babelHelpers["extends"]({},I);b[a]=!0;ma(b)},Ga=function(a){var b=babelHelpers["extends"]({},J);b[a]=!0;oa(b)},N=function(a){ra(!0),ta(a)},Ha=function(){ra(!1)},O=d("browserHistory").browserHistory.location.pathname,P=d("PolarisPostFeatures").usePolarisPostFeatures({post:w,owner:z,variant:s,path:O}),Q=P.commentsAreStacked,Ia=P.hasPhotosOfYouOption,Ja=P.hasThreadedSidebarComments,R=P.isFavorited,Ka=P.isSidecar,La=P.isStackedScreenSize;P=P.showFollowButton;O=d("polarisPostModalHelpers").getCollectionIdFromPath(O);var Ma=O!=null&&O!==d("PolarisSavedPostsTypes").SAVED_COLLECTION_TYPE.ALL_MEDIA_AUTO_COLLECTION;O=!!P&&(!w.coauthorProducers||w.coauthorProducers.length===0)&&!r;var S=D>=d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF,Na=S&&F===!0,T=!S&&F===!0,Oa=F===!0?S:!Q;P=c("usePolarisIsOnFeedPage")();var U=b==="adsActivityFeed",V=(P||U)&&F!==!0&&d("PolarisUA").isDesktop(),W=(P||U)&&F!==!0&&d("PolarisUA").isDesktop()&&d("PolarisPanavisionQEHelpers").hasFamiliarFeed(),Pa=d("PolarisPostUtils").getCurrentSidecarItemFromPost(w,H),Qa=i.jsxs("div",{className:"_aasi"+(V?" _aasj":"")+(T?" _aask":"")+(W?" _ai9a":""),children:[w.inventorySource==="mixed_unconnected"&&P&&!F&&i.jsx(c("PolarisPostSuggestedHeader.react"),{postId:w.id,title:(U=w.explore)==null?void 0:U.title}),i.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",position:"relative",children:[i.jsx(c("PolarisPostHeader.react"),{analyticsContext:b,clipsAudioAttributionInfo:w.clipsMusicAttributionInfo,coauthorProducers:w.coauthorProducers,followHashtagInfo:w.followHashtagInfo,headerAvatarSize:c("PolarisIGCoreConstants").AVATAR_SIZES.small,inModal:F,isAffiliate:w.isAffiliate===!0,isOwnerGroupProfile:d("PolarisGroupProfileUtils").getIsUserGroupProfile(z),isPaidPartnership:w.isPaidPartnership===!0,isSponsored:w.isSponsored,isVideo:!!w.isVideo,location:w.location,mediaId:w.id,onDisabledClipsAudioAttributionClick:N,onProfileClick:u,owner:z,postAuthor:y,postedAt:w.postedAt,shouldShowFollowButton:O,showVerifiedBadge:!0,sidebarVariantOptionsButton:Ja,sponsoredLabel:C==null?void 0:C.label,sponsors:w.sponsors,viewer:A},w.id),i.jsx(c("PolarisPostHeaderFavoritedIconButton.react"),{isFavorited:R}),i.jsx(c("PolarisPostOptionsButtonPicker.react"),{buttonClassName:"_aasm"+(V?" _aasn":"")+(W?" _agh1":""),id:w.id})]})]});P=d("PolarisInsightsUtils").getViewInsightsInfo(A,x,w,B,ja);var Ra=P.bloksAppId,X=P.hasViewInsights,Y=A==null?void 0:A.id;U=r&&fa!=null?fa:[d("PolarisOrganicImpressionAction").makePostImpressionAction(w,b,a,q),d("PolarisVpvdImpressionAction").makePostVpvdImpressionAction(w,b)];N=d("PolarisViewpointReact.react").useViewpoint({action:U,id:w.id});var Sa=c("useMergeRefs").apply(void 0,[N].concat((u=ea)!=null?u:[])),Ta=A?{l:function(){M(!w.likedByViewer,"button")},s:function(){xa(!w.savedByViewer)}}:{};O=c("usePolarisShowFooterCTA")(w,H,I,r);var Z=null;r?Z=i.jsx(c("PolarisSponsoredPostCTAFooter.react"),{isMediaRendered:h,post:w,sidecarIndex:H}):(O||!F||!c("PolarisHoldoutChecks").H12023.rollout())&&(Z=i.jsx(d("PolarisPostOverlayInfoFooterCTA.react").PolarisPostOverlayInfoFooterCTA,{analyticsContext:b,currentSidecarIndex:H,dynamicFooterRef:E,idsWithClearedBlurOverlays:I,idsWithDisabledMediaOverlayInfoImpressionLogging:J,onLogOverlayImpression:function(a){return Ca(a)},rootPost:w}));R=Z!=null;var $=d("polarisPostModalHelpers").getMediaContainerProps({dimensions:w.dimensions,footerHeight:R?(B=E.current)==null?void 0:B.offsetHeight:void 0,viewportHeight:ka,viewportWidth:D,hasSidebarInRedesign:S,hasFooter:R}),Ua=!1,Va={border:w.isSeen===!0?"2px solid green":"2px solid red"};return i.jsx(c("PolarisCarouselAutoplayProvider.react"),{children:i.jsx(c("PolarisShareSheetContext").Provider,{value:{currPostSidecarChildItem:Pa},children:i.jsx(d("PolarisPostToastProvider.react").PostToastProvider,{children:function(a){return i.jsx(d("PolarisPostModalContext.react").PostModalContext,{post:w,children:i.jsx(d("hero-tracing").HeroPagelet,{name:"post_"+((q==null?void 0:q.toString())||"0"),ref:Sa,children:function(g,h){return i.jsx(c("PolarisHotKeys.react"),{keyMap:Ta,children:function(j,k,l){return i.jsx(c("PolarisTrackingNodeProvider.react"),{trackingNode:301,children:i.jsxs("article",{className:c("joinClasses")(f,"_aatb"+(s===d("PolarisPostVariants").VARIANTS.feed?" _aatc":"")+(La?" _aatd":"")+(La?"":" _aate")+(Q?" _aatf":"")+(Oa?" _aatg":"")+(Ka?" _aath":"")+(Ja?" _aati":"")+(X?" _aatj":"")),"data-testid":void 0,onKeyUp:j,ref:g,role:k,style:Ua?Va:{},tabIndex:l,children:[i.jsxs(c("IGDSBox.react"),{alignSelf:T?"center":void 0,direction:(F===!0?S:!Q)?"row":"column",display:"flex",justifyContent:"center",maxHeight:"inherit",maxWidth:T&&($==null?void 0:$.style)!=null?$.style.maxWidth:"inherit",position:"relative",children:[(F===!0?!S:Q)?Qa:null,i.jsx("div",babelHelpers["extends"]({},F===!0?$:{},{className:"_aatk"+(F===!0?" _aatl":"")+(Na&&w.dimensions!=null&&w.dimensions.width>=w.dimensions.height?" _aatm":"")+(aa===!0?" _aatn":"")+(W?" _aiao":""),children:i.jsx(c("PolarisMediaContainer.react"),{accessibilityCaption:w.accessibilityCaption,adInfo:C,analyticsContext:b,autoplay:e,checkIsSensitivityOverlayDisabledCallback:function(a){return Da(a)},className:"_aato",commentsAreStacked:Q,hasPhotosOfYouOption:Ia,hasViewInsights:X,id:w.id,initialCarouselIndex:G,inModal:F,isVisible:o,mediaFooter:Z,onLike:A?wa:null,onPostMediaRendered:ua,onPostSidecarChildIndexChange:va,onSensitivityOverlayCleared:Ba,onToastClose:Ha,position:q,post:w,relationship:ia,sensitivityOverlayMediaOverlayInfoLoggingProps:{onLoggedMediaOverlayInfoImpression:function(a){return Ca(a)},checkIfMediaOverlayInfoImpressionLoggingDisabled:function(a){return Ea(a)}},showToast:qa,toastString:sa,viewer:A,visiblePosition:da})})),i.jsx(c("PolarisPostDetailsSection.react"),{analyticsContext:b,bloksAppId:Ra,currSidecarIndex:H,currSidecarItem:Pa,handleLikeChange:M,handleSaveChange:xa,hasDenserFeedRedesign:V,hasSidebarInRedesign:S,hasViewInsights:X,initialCommentsQuery:n,owner:z,permalinkedCommentId:ba,permalinkedReplyId:ca,post:w,postAuthorId:x,postAuthorUsername:y==null?void 0:y.username,postFeedbackControlsRef:a,postHeader:Qa,redesignWithoutSidebar:T,redesignWithSidebar:Na,showDetailsAsSidebar:Oa,variant:s,viewer:A}),pa&&i.jsx(c("PolarisUnsaveFromCollectionDialog.react"),{onClose:ya,onUnsaveFromAll:za,onUnsaveFromCollection:Ma&&d("PolarisUA").isDesktop()?Aa:null}),i.jsx(c("PolarisPostToast.react"),{isFeedVariant:s===d("PolarisPostVariants").VARIANTS.feed,isModal:(j=F)!=null?j:!1,isSidecar:Ka})]}),i.jsx(h,{})]})})}})}})},w.id)}})})})}a.displayName=a.name+" [from "+f.id+"]";var n=c("polarisWithPPRLogging")(a);function o(){d("PolarisLogger").logAction("feedUnitFailure")}function b(a){return i.jsx(c("PolarisErrorBoundary.react"),{errorRenderer:function(a){return null},onError:o,children:i.jsx(n,babelHelpers["extends"]({},a))})}b.displayName=b.name+" [from "+f.id+"]";h=c("qex")._("511")===!0?i.memo(b):b;e=h;g["default"]=e}),98);/*FB_PKG_DELIM*/
__d("PolarisBaseGraphQLEventHandler",[],(function(a,b,c,d,e,f){"use strict";var g="1/graphqlsubscriptions/",h=Object.freeze({PRESENCE:"Presence",BD_CHALLENGE:"BdChallenge",WAVE:"Wave",PINNED_QUESTION:"PinnedQuestion",QUESTION_STATUS:"QuestionStatus",NONE:""});a=function(){function a(){}var b=a.prototype;b.processEventMessage=function(a){return};b.getSubTopic=function(){return null};b.getGraphQLSubsciptionPrefix=function(){return g};b.getType=function(){return h.NONE};return a}();f.GRAPH_QL_EVENT_TYPES=h;f.BaseGraphQLEventHandler=a}),66);
__d("PolarisBdChallengeGraphQLEventHandler",["JSResourceForInteraction","PolarisBaseGraphQLEventHandler","PolarisDirectLogger","uuidv4","xigRequireInterop"],(function(a,b,c,d,e,f,g){"use strict";var h="17935802131473058";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this)||this;e.$BdChallengeGraphQLEventHandler1=new(d("PolarisDirectLogger").DirectLogger)("BDChallengeGraphQLEventHandler",b);e.$BdChallengeGraphQLEventHandler1.debugTrace("bd_challenge_gql_handler_init");e.$BdChallengeGraphQLEventHandler2=e.getGraphQLSubsciptionPrefix()+h+"/"+JSON.stringify({input_data:{client_subscription_id:c("uuidv4")()}});return e}var e=b.prototype;e.processEventMessage=function(a){var b=a.bd_challenge_event;if(b==null){this.$BdChallengeGraphQLEventHandler1.debugTrace("parsed_message_bad_data");return}c("JSResourceForInteraction")("PolarisBDClientSignalCollectionTrigger").__setRef("PolarisBdChallengeGraphQLEventHandler").load().then(function(a){return c("xigRequireInterop")(a)}).then(function(a){a=a.BDClientSignalCollectionTrigger;a.handleBdChallenge(b)})};e.getSubTopic=function(){return this.$BdChallengeGraphQLEventHandler2};e.getType=function(){return d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.BD_CHALLENGE};return b}(d("PolarisBaseGraphQLEventHandler").BaseGraphQLEventHandler);g.BdChallengeGraphQLEventHandler=a}),98);
__d("PolarisDirectBaseSubscription",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c,d){var e=this;this.$5=function(a){e.$4.debugTrace("message_received");var b=e.parsePayload(a);if(b==null)return;if(a.length===0){e.$4.logError("empty_message");return}else a[a.length-1]==="\0"?(b=a.substring(0,a.length-1),e.$4.debugTrace("trimmed_null_char")):b=a;var c={};try{c=JSON.parse(b)}catch(c){typeof c.message==="string"&&c.message.includes("Unexpected token")&&(c.jsonFirstChars=typeof b==="string"?b.substr(0,3):null);e.$4.logError("Cannot parse message "+a,c);return}e.processMessage(c)};this.$1=a;this.$2=b;this.$3=c;this.$4=d;this.$4.debugTrace("ctor")}var b=a.prototype;b.parsePayload=function(a){return a};b.processMessage=function(a){return};b.$6=function(a){var b;return JSON.stringify((b={},b[a]=this.getSubTopics(),b))};b.subscribe=function(){var a=this;if(this.getSubTopics().length<1){this.$4.debugTrace("no_subtopics_to_subscribe");return}this.$4.debugTrace("subscribe_start");this.unsubscribe();this.$3.subscribe(this.$1,this.$5);this.$3.publish(this.$1,this.$6("sub"))["catch"](function(b){return a.$4.logError(b,b==null?void 0:b.message)});this.$4.debugTrace("subscribe_end")};b.unsubscribe=function(){var a=this;if(this.getSubTopics().length<1){this.$4.debugTrace("no_subtopics_to_unsubscribe");return}this.$4.debugTrace("unsubscribe_start");this.$3.publish(this.$1,this.$6("unsub"))["catch"](function(b){return a.$4.logError(b,b==null?void 0:b.message)});this.$3.unsubscribe(this.$1);this.$4.debugTrace("unsubscribe_end")};b.updateSubTopics=function(a){this.$2=a};b.getSubTopics=function(){return this.$2};return a}();f.DirectBaseSubscription=a}),66);
__d("PolarisPinnedQuestionGraphQLEventHandler",["PolarisBaseGraphQLEventHandler","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h="PINNED_QUESTION",i="18005526940184517";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$PinnedQuestionGraphQLEventHandler1=b;e.$PinnedQuestionGraphQLEventHandler2=e.getGraphQLSubsciptionPrefix()+i+"/"+JSON.stringify({input_data:{client_subscription_id:c("uuidv4")(),broadcast_id:String(d.id)}});return e}var e=b.prototype;e.processEventMessage=function(a){a=a.live_active_question_event;if(a==null)return;a={question:a,type:h};this.$PinnedQuestionGraphQLEventHandler1.eventHandler(a)};e.getSubTopic=function(){return this.$PinnedQuestionGraphQLEventHandler2};e.getType=function(){return d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PINNED_QUESTION};return b}(d("PolarisBaseGraphQLEventHandler").BaseGraphQLEventHandler);g.PinnedQuestionGraphQLEventHandler=a}),98);
__d("PolarisPresenceGraphQLEventHandler",["PolarisBaseGraphQLEventHandler","PolarisDirectLogger","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h="17846944882223835";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e){var f;f=a.call(this)||this;f.$PresenceGraphQLEventHandler2=new(d("PolarisDirectLogger").DirectLogger)("PresenceGraphQLEventHandler",e);f.$PresenceGraphQLEventHandler1=b;f.$PresenceGraphQLEventHandler2.debugTrace("presence_gql_handler_init");f.$PresenceGraphQLEventHandler3=f.getGraphQLSubsciptionPrefix()+h+"/"+JSON.stringify({input_data:{client_subscription_id:c("uuidv4")()}});return f}var e=b.prototype;e.processEventMessage=function(a){a=a.presence_event;if(a==null){this.$PresenceGraphQLEventHandler2.debugTrace("parsed_message_bad_data");return}this.$PresenceGraphQLEventHandler1.onPresenceUpdated(a)};e.getSubTopic=function(){return this.$PresenceGraphQLEventHandler3};e.getType=function(){return d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PRESENCE};return b}(d("PolarisBaseGraphQLEventHandler").BaseGraphQLEventHandler);g.PresenceGraphQLEventHandler=a}),98);
__d("PolarisQuestionStatusGraphQLEventHandler",["PolarisBaseGraphQLEventHandler","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h="QUESTION_STATUS",i="18027779584026952";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$QuestionStatusGraphQLEventHandler1=b;e.$QuestionStatusGraphQLEventHandler2=e.getGraphQLSubsciptionPrefix()+i+"/"+JSON.stringify({input_data:{client_subscription_id:c("uuidv4")(),broadcast_id:String(d.id)}});return e}var e=b.prototype;e.processEventMessage=function(a){a=a.live_question_submission_status_event;if(a==null)return;a={status:a,type:h};this.$QuestionStatusGraphQLEventHandler1.eventHandler(a)};e.getSubTopic=function(){return this.$QuestionStatusGraphQLEventHandler2};e.getType=function(){return d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.QUESTION_STATUS};return b}(d("PolarisBaseGraphQLEventHandler").BaseGraphQLEventHandler);g.QuestionStatusGraphQLEventHandler=a}),98);
__d("PolarisWaveGraphQLEventHandler",["PolarisBaseGraphQLEventHandler","PolarisConfig","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h="LIVE_WAVE",i="17882305414154951";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e){var f;f=a.call(this)||this;f.$WaveGraphQLEventHandler1=b;f.$WaveGraphQLEventHandler2=f.getGraphQLSubsciptionPrefix()+i+"/"+JSON.stringify({input_data:{client_subscription_id:c("uuidv4")(),receiver_id:d("PolarisConfig").getViewerId(),broadcast_id:String(e.id)},publish_data:{broadcast_id:String(e.id),receiver_id:d("PolarisConfig").getViewerId(),waver_id:String(e.broadcast_owner)}});return f}var e=b.prototype;e.processEventMessage=function(a){a=a.live_video_wave_event;if(a==null)return;a={type:h,wave:a};this.$WaveGraphQLEventHandler1.eventHandler(a)};e.getSubTopic=function(){return this.$WaveGraphQLEventHandler2};e.getType=function(){return d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE};return b}(d("PolarisBaseGraphQLEventHandler").BaseGraphQLEventHandler);g.WaveGraphQLEventHandler=a}),98);
__d("PolarisDirectGraphQLSubscription",["PolarisBaseGraphQLEventHandler","PolarisBdChallengeGraphQLEventHandler","PolarisDirectBaseSubscription","PolarisDirectLogger","PolarisPinnedQuestionGraphQLEventHandler","PolarisPresenceGraphQLEventHandler","PolarisQuestionStatusGraphQLEventHandler","PolarisWaveGraphQLEventHandler","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";var h="/ig_realtime_sub";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,e){e=new(d("PolarisDirectLogger").DirectLogger)("DirectGraphQLSubscription",e);c=a.call(this,h,[],c,e)||this;c.$DirectGraphQLSubscription2=e;c.$DirectGraphQLSubscription1=b;c.$DirectGraphQLSubscription3=new Map();c.$DirectGraphQLSubscription4();c.getSubTopics();return c}var e=b.prototype;e.$DirectGraphQLSubscription4=function(){var a=Object.keys(d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES);for(var b=0;b<a.length;b++){var c=a[b];d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES[c]!==d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PRESENCE&&d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES[c]!==d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE&&d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES[c]!==d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PINNED_QUESTION&&!this.$DirectGraphQLSubscription5(d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES[c])&&this.$DirectGraphQLSubscription2.debugTrace("invalid_handler_type")}};e.getSubTopics=function(){var a=[];for(var b=this.$DirectGraphQLSubscription3,d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;f[0];f=f[1];f=f.getSubTopic();c("isStringNullOrEmpty")(f)||a.push(f)}this.updateSubTopics(a);return a};e.processMessage=function(b){for(var c=this.$DirectGraphQLSubscription3,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f[0];f=f[1];f.processEventMessage(b)}a.prototype.processMessage.call(this,b)};e.enableOrDisableEventHandlerByType=function(a,b){b?this.$DirectGraphQLSubscription5(a)||this.$DirectGraphQLSubscription2.debugTrace("invalid_handler_type"):this.$DirectGraphQLSubscription3["delete"](a);return this};e.$DirectGraphQLSubscription5=function(a){this.$DirectGraphQLSubscription3||(this.$DirectGraphQLSubscription3=new Map());var b=this.$DirectGraphQLSubscription6(a);if(b!=null){this.$DirectGraphQLSubscription3.set(a,b);return!0}return!1};e.$DirectGraphQLSubscription6=function(a){switch(a){case d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PRESENCE:return new(d("PolarisPresenceGraphQLEventHandler").PresenceGraphQLEventHandler)(this.$DirectGraphQLSubscription1,this.$DirectGraphQLSubscription2.getDebugId());case d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.BD_CHALLENGE:return new(d("PolarisBdChallengeGraphQLEventHandler").BdChallengeGraphQLEventHandler)(this.$DirectGraphQLSubscription2.getDebugId());default:return null}};e.enableLiveEventHandler=function(a,b,c){switch(c){case d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE:this.$DirectGraphQLSubscription3.set(d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE,new(d("PolarisWaveGraphQLEventHandler").WaveGraphQLEventHandler)(b,a));return this;case d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PINNED_QUESTION:this.$DirectGraphQLSubscription3.set(d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PINNED_QUESTION,new(d("PolarisPinnedQuestionGraphQLEventHandler").PinnedQuestionGraphQLEventHandler)(b,a));return this;case d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.QUESTION_STATUS:this.$DirectGraphQLSubscription3.set(d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.QUESTION_STATUS,new(d("PolarisQuestionStatusGraphQLEventHandler").QuestionStatusGraphQLEventHandler)(b,a));return this;default:return this}};e.disableLiveEventHandler=function(a){switch(a){case d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE:this.$DirectGraphQLSubscription3["delete"](d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE);return this;case d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PINNED_QUESTION:this.$DirectGraphQLSubscription3["delete"](d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PINNED_QUESTION);return this;case d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.QUESTION_STATUS:this.$DirectGraphQLSubscription3["delete"](d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.QUESTION_STATUS);return this;default:return this}};e.unsubscribeGraphQL=function(){this.unsubscribe(),this.enableOrDisableEventHandlerByType(d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PRESENCE,!1),this.enableOrDisableEventHandlerByType(d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.WAVE,!1)};return b}(d("PolarisDirectBaseSubscription").DirectBaseSubscription);g.DirectGraphQLSubscription=a}),98);
__d("PolarisDirectIrisSubscription",["PolarisDirectLogger","isObject","polarisUnexpected"],(function(a,b,c,d,e,f,g){"use strict";var h=1,i=2,j=1e3,k=64e3;a=function(){function a(a,b,e,f){var g=this;this.$7=function(){g.$6.logDirectClientEvent("ig_direct_iris_subscription",d("PolarisDirectLogger").DIRECT_CONTAINER_MODULES.ig_direct_realtime,babelHelpers["extends"]({},g.$2,{action:"attempt",attempt_reason:"mqtt-connected"}));g.$1.onIrisConnectivityChanged("Subscribing");var a=JSON.stringify(g.$2);g.$3.publish("/ig_sub_iris",a)["catch"](function(a){g.$6.logDirectClientEvent("ig_direct_iris_subscription",d("PolarisDirectLogger").DIRECT_CONTAINER_MODULES.ig_direct_realtime,babelHelpers["extends"]({},g.$2,{action:"error",error:JSON.stringify(a)})),g.$1.onIrisConnectivityChanged("Unsubscribed")})};this.$8=function(a){var b;if(typeof a==="string"||a instanceof String)try{b=JSON.parse(a)}catch(a){var e="Could not parse sub iris response $(response)";g.$6.logError(e,a);c("polarisUnexpected")(e);b=a}else c("isObject")(a)?b=a:(c("polarisUnexpected")("Unknown sub iris response $(response)"),b={succeeded:!1});if(b.succeeded===!0)g.$6.logDirectClientEvent("ig_direct_iris_subscription",d("PolarisDirectLogger").DIRECT_CONTAINER_MODULES.ig_direct_realtime,babelHelpers["extends"]({},g.$2,{action:"success"})),g.$1.onIrisConnectivityChanged("Subscribed",g.$2.subscription_type);else{g.$6.logDirectClientEvent("ig_direct_iris_subscription",d("PolarisDirectLogger").DIRECT_CONTAINER_MODULES.ig_direct_realtime,babelHelpers["extends"]({},g.$2,b,{action:"error"}));g.$1.onIrisConnectivityChanged("Unsubscribed");if(b.error_type===h)g.$1.onResnapshotRequested(g.$2);else if(b.error_type===i){e=g.$4+Math.floor(Math.random()*1e3);window.setTimeout(g.$7,e);g.$4=Math.min(g.$4*2,k)}}};this.$6=new(d("PolarisDirectLogger").DirectLogger)("DirectIrisSubscription",f);this.$6.debugTrace("ctor",b);this.$1=a;this.$2=b;this.$3=e;this.$4=j}var b=a.prototype;b.subscribe=function(){this.$6.debugTrace("subscribe_start"),this.unsubscribe(),this.$3.subscribe("/ig_sub_iris_response",this.$8),this.$7(),this.$6.debugTrace("subscribe_end")};b.unsubscribe=function(){this.$6.debugTrace("unsubscribe_start"),this.$5&&(window.clearTimeout(this.$5),this.$5=null),this.$3.unsubscribe("/ig_sub_iris_response"),this.$1.onIrisConnectivityChanged("Unsubscribed"),this.$6.debugTrace("unsubscribe_end")};return a}();g.DirectIrisSubscription=a}),98);
__d("PolarisDirectSkywalkerSubscription",["PolarisConfig","PolarisDirectBaseSubscription","PolarisDirectLogger","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h="/pubsub";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e,f){f=new(d("PolarisDirectLogger").DirectLogger)("DirectSkywalkerSubscription",f);e=a.call(this,h,["ig/u/v1/"+c("nullthrows")(d("PolarisConfig").getViewerId())],e,f)||this;e.$DirectSkywalkerSubscription2=f;e.$DirectSkywalkerSubscription1=b;return e}var e=b.prototype;e.parsePayload=function(b){if(b.indexOf("/activity_indicator_id/")===-1){this.$DirectSkywalkerSubscription2.debugTrace("not_activity_indicator_message");return null}return a.prototype.parsePayload.call(this,b)};e.processMessage=function(b){var c=b.data,d=b.event;if(d!=="patch"){this.$DirectSkywalkerSubscription2.debugTrace("skipped_message",{event:d});return}if(!Array.isArray(c)){this.$DirectSkywalkerSubscription2.debugTrace("parsed_message_bad_data",typeof c);return}for(var d=c,c=Array.isArray(d),e=0,d=c?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=d.length)break;f=d[e++]}else{e=d.next();if(e.done)break;f=e.value}f=f;this.$DirectSkywalkerSubscription1.handleDelta(f,"")}a.prototype.processMessage.call(this,b)};return b}(d("PolarisDirectBaseSubscription").DirectBaseSubscription);g.DirectSkywalkerSubscription=a}),98);
__d("PolarisLiveDeltaHandler",[],(function(a,b,c,d,e,f){"use strict";a=function(a){this.eventHandler=a};f["default"]=a}),66);
__d("PolarisChannelClientID",["uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h=c("uuidv4")();a={getID:function(){return h}};b=a;g["default"]=b}),98);
__d("PolarisMqttEnv",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({mqtt_ep_with_sid:0,mqtt_waterfall_log_client_sampling:1,messenger_uses_mqtt_rollout:2,mqtt_ws_polling_enabled:3,mqtt_ws_forced_polling_only:4,mqtt_send_unload_event:6,mqtt_ws_reconnect_reset:7,mqtt_lp_use_fetch:9,mqtt_fast_lp:11});b=function(){var a=b.prototype;a.random=function(){return this.$1!=null?this.$1():Math.random()};a.isUserLoggedInNow=function(){return this.$2!=null?this.$2():!0};a.clearTimeout=function(a){if(this.$3!=null){this.$3(a);return}window.clearTimeout(a)};a.setTimeout=function(a,b){for(var c=arguments.length,d=new Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];return this.$4!=null?this.$4.apply(null,arguments):window.setTimeout.apply(null,arguments)};a.getLoggerInstance=function(){return this.$5!=null?this.$5():g.getInstance()};a.genGk=function(a){return this.$6!=null?this.$6(a):!1};a.createSocket=function(a,b){return this.$7!=null?this.$7(a,b):new WebSocket(a)};a.scheduleCallback=function(a){return this.$8!=null?this.$8(a):a()};a.scheduleLoggingCallback=function(a){return this.$9!=null?this.$9(a):a()};a.configRead=function(a,b){return this.$10!=null?this.$10(a,b):b};a.configWrite=function(a,b){this.$11!=null&&this.$11(a,b)};function b(){this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=null,this.$10=null,this.$11=null}a.initialize=function(a,b,c,d,e,f,g,h,i,j,k){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e,this.$6=f,this.$7=g,this.$8=h,this.$9=i,this.$10=j,this.$11=k};return b}();var g=function(){function a(){}a.getInstance=function(){return new a()};var b=a.prototype;b.setAppId=function(a){};b.eventLogConnect=function(a){a.attemptNumber,a.connectionStatus,a.duration,a.errorCode,a.errorMessage,a.failTotal,a.hostname,a.publishes,a.sessionID,a.subscribedTopics,a.successTotal};b.eventLogPull=function(a){a.duration,a.errorMessage,a.hostname,a.pullEventName,a.sessionID,a.status};b.eventLogDisconnect=function(a){a.duration,a.errorCode,a.errorMessage,a.sessionID};b.eventLogPublish=function(a){a.connectionStatus,a.publishStatus,a.sessionID,a.topic};b.eventLogMiscellaneousError=function(a){a.errorMessage};b.logError=function(a,b){};b.logErrorWarn=function(a,b){};b.logWarn=function(a,b){};b.debugTrace=function(a,b){};b.bumpCounter=function(a){};return a}();e.exports={Env:new b(),MqttGkNames:a}}),null);
__d("PolarisIrisSubscribeChecker",["PolarisMqttEnv"],(function(a,b,c,d,e,f){"use strict";var g=b("PolarisMqttEnv").Env,h=b("PolarisMqttEnv").MqttGkNames;a=function(){function a(a){this.$1=g.getLoggerInstance();this.$2=null;this.$3=!1;this.$4=!1;this.$5=!1;this.$6=!0;this.$7=0;this.$8=a;if(typeof window!=="undefined"){a=window.location.hostname;(a==="m.facebook.com"||a==="mobile.facebook.com"||a==="mtouch.facebook.com")&&(this.$6=!1)}g.genGk(h.messenger_uses_mqtt_rollout)||(this.$6=!1)}var b=a.prototype;b.start=function(){this.$6=!0};b.stop=function(){this.$6=!1,this.$9()};b.onConnectAttempt=function(){};b.onConnectFailure=function(){this.$9()};b.onConnected=function(){var a=this;this.$7++;this.$9();this.$3=!1;this.$4=!1;this.$5=!1;this.$6&&(this.$2=g.setTimeout(function(){a.$10()},8e3))};b.onConnectSuccess=function(){};b.onConnectionLost=function(){this.$9()};b.onSubscribe=function(a){a==="/t_ms"&&(this.$3=!0)};b.onUnsubscribe=function(a){};b.onPublish=function(a){(a==="/messenger_sync_get_diffs"||a==="/messenger_sync_create_queue")&&(this.$4=!0,this.$3&&(this.$5=!0,this.$9()))};b.onMessage=function(a){};b.onWSFatal=function(){};b.$9=function(){this.$2&&(g.clearTimeout(this.$2),this.$2=null)};b.$10=function(){if(this.$4===!1){var a=this.$7===1?"no_iris_session_initialConnect":"no_iris_session";this.$1.bumpCounter(a);this.$1.eventLogMiscellaneousError({errorMessage:a});this.$8()?this.$1.bumpCounter(a+".withProvider"):this.$1.bumpCounter(a+".withoutProvider");this.$3===!0?this.$1.bumpCounter(a+".withTopicSubscribe"):this.$1.bumpCounter(a+".withoutTopicSubscribe")}this.$3===!1&&this.$1.bumpCounter("no_iris_topic_subscribe");this.$3===!0&&this.$4===!0&&this.$5===!1&&this.$1.bumpCounter("session_before_topic_subscribe")};return a}();e.exports=a}),null);
__d("PolarisMqttAnalyticsHook",["PolarisMqttEnv","PolarisODS"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=c("PolarisMqttEnv").Env.getLoggerInstance(),this.$2=0,this.$3=0,this.$4=0,this.$5=0,c("PolarisODS").incr("web.mqtt.session_start"),c("PolarisMqttEnv").Env.isUserLoggedInNow()||c("PolarisODS").incr("web.mqtt.session_start.logout")}var b=a.prototype;b.onConnectAttempt=function(){c("PolarisODS").incr("web.mqtt.ws_connect_attempt")};b.onConnectFailure=function(){this.$3++,c("PolarisODS").incr("web.mqtt.ws_connect_failure")};b.onConnected=function(){c("PolarisODS").incr("web.mqtt.ws_connect_connected")};b.onConnectSuccess=function(){this.$2===0&&c("PolarisODS").incr("web.mqtt.ws_connect_first_success"),this.$2++,c("PolarisODS").incr("web.mqtt.ws_connect_success")};b.onConnectionLost=function(){c("PolarisODS").incr("web.mqtt.ws_disconnect")};b.onSubscribe=function(a){};b.onUnsubscribe=function(a){};b.onPublish=function(a){c("PolarisODS").incr("web.mqtt.ws_publish")};b.onMessage=function(a){c("PolarisODS").incr("web.mqtt.message_arrived")};b.onWSFatal=function(){c("PolarisODS").incr("web.mqtt.ws_fatal")};b.onPollRequestSent=function(){c("PolarisODS").incr("web.mqtt.polling_request_send")};b.onPollRequestSuccess=function(){c("PolarisODS").incr("web.mqtt.polling_request_succeed"),this.$4===0&&c("PolarisODS").incr("web.mqtt.polling_first_success"),this.$4++};b.onPollResponse=function(a){c("PolarisODS").incr("web.mqtt.lp.message_arrived")};b.onPollFinish=function(){};b.onPollRequestFailed=function(a){c("PolarisODS").incr("web.mqtt.polling_request_failed"),this.$5++};return a}();g["default"]=a}),98);
__d("PolarisMqttConnectionHookCollection",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.addHook=function(a){this.$1.add(a)};b.removeHook=function(a){this.$1["delete"](a)};b.onConnectAttempt=function(){this.$1.forEach(function(a){a.onConnectAttempt()})};b.onConnectFailure=function(){this.$1.forEach(function(a){a.onConnectFailure()})};b.onConnected=function(){this.$1.forEach(function(a){a.onConnected()})};b.onConnectSuccess=function(){this.$1.forEach(function(a){a.onConnectSuccess()})};b.onConnectionLost=function(){this.$1.forEach(function(a){a.onConnectionLost()})};b.onSubscribe=function(a){this.$1.forEach(function(b){b.onSubscribe(a)})};b.onUnsubscribe=function(a){this.$1.forEach(function(b){b.onUnsubscribe(a)})};b.onPublish=function(a){this.$1.forEach(function(b){b.onPublish(a)})};b.onMessage=function(a){this.$1.forEach(function(b){b.onMessage(a)})};b.onWSFatal=function(){this.$1.forEach(function(a){a.onWSFatal()})};return a}();f["default"]=a}),66);
__d("PolarisMqttProtocolUtils",["PolarisMqttEnv"],(function(a,b,c,d,e,f){"use strict";var g=b("PolarisMqttEnv").Env;function a(a,b){if(a==null)return b;var c=new Uint8Array(a.length+b.length);c.set(a);c.set(b,a.length);return c}function c(a,b){b=b;var c=0,d=1,e;do{if(b===a.length)return null;e=a[b++];c+=(e&127)*d;d*=128}while((e&128)!==0);return{value:c,offset:b}}function d(a){a=a;var b=new Array(1);for(var c=0;c<4;c++){var d=a%128;a>>=7;if(a>0)b[c]=d|128;else{b[c]=d;break}}return b}function h(a,b,c){c=c;b[c++]=a>>8;b[c++]=a%256;return c}function f(a,b){return 256*a[b]+a[b+1]}function i(a){var b=0;for(var c=0,d=a.length;c<d;c++){var e=a.charCodeAt(c);e<128?b+=1:e<2048?b+=2:e>=55296&&e<=56319?(b+=4,c++):b+=3}return b}function j(a,b,c,d){d=h(b,c,d);k(a,c,d);return d+b}function k(a,b,c){c=c;for(var d=0,e=a.length;d<e;d++){var f=a.charCodeAt(d);f<128?b[c++]=f:f<2048?(b[c++]=192|f>>6,b[c++]=128|f&63):f<55296||f>=57344?(b[c++]=224|f>>12,b[c++]=128|f>>6&63,b[c++]=128|f&63):(f=65536+((f&1023)<<10|a.charCodeAt(++d)&1023),b[c++]=240|f>>18,b[c++]=128|f>>12&63,b[c++]=128|f>>6&63,b[c++]=128|f&63)}}function l(a,b,c){var d=[],e=b,f=0;while(e<b+c){var g=a[e++];if(g<128)d[f++]=String.fromCharCode(g);else if(g>191&&g<224){var h=a[e++];d[f++]=String.fromCharCode((g&31)<<6|h&63)}else if(g>239&&g<365){h=a[e++];var i=a[e++],j=a[e++];h=((g&7)<<18|(h&63)<<12|(i&63)<<6|j&63)-65536;d[f++]=String.fromCharCode(55296+(h>>10));d[f++]=String.fromCharCode(56320+(h&1023))}else{i=a[e++];j=a[e++];d[f++]=String.fromCharCode((g&15)<<12|(i&63)<<6|j&63)}}return d.join("")}b=function(){function a(a,b,c){this.$1=a*1e3,this.$4=b,this.$5=c,this.$3=!1}var b=a.prototype;b.$6=function(){var a=this;this.$3?(this.$3=!1,this.$4(),this.$2=g.setTimeout(function(){a.$6()},this.$1)):this.$5()};b.reset=function(){var a=this;this.$3=!0;this.$2&&(g.clearTimeout(this.$2),this.$2=null);this.$1>0&&(this.$2=g.setTimeout(function(){a.$6()},this.$1))};b.cancel=function(){this.$2&&(g.clearTimeout(this.$2),this.$2=null)};return a}();e.exports={UTF8Length:i,convertStringToUTF8:k,concatBuffers:a,decodeMultiByteInt:c,convertUTF8ToString:l,encodeMultiByteInt:d,writeUInt16BE:h,readUInt16BE:f,writeString:j,Pinger:b}}),null);
__d("PolarisMqttUtils",["PolarisMqttEnv"],(function(a,b,c,d,e,f){"use strict";var g=b("PolarisMqttEnv").Env,h=b("PolarisMqttEnv").MqttGkNames;c={endpointWithSessionId:function(a,b){return!g.genGk(h.mqtt_ep_with_sid)?a:this.endpointWithExtraParameter(a,"sid",b.toString())},endpointWithExtraParameters:function(a,b){var c=this,d=a;b.forEach(function(a,b,e){d=c.endpointWithExtraParameter(d,b,a)});return d},endpointWithExtraParameter:function(a,b,c){return a.indexOf("?")>0?a+"&"+b+"="+c:a+"?"+b+"="+c},generateSessionId:function(){return Math.floor(g.random()*Number.MAX_SAFE_INTEGER)},promiseDone:function(a,b,c){var d=arguments.length>1?a.then(b,c):a;d.then(null,function(a){g.setTimeout(function(){if(a instanceof Error)throw a;else throw new Error("promiseDone")},0)})},sprintf:function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=0;return a.replace(/%s/g,function(){return String(c[e++])})},hasWSSupport:function(){return"WebSocket"in a&&a.WebSocket!==null}};e.exports=c}),null);
__d("PolarisMqttProtocolCodec",["PolarisMqttProtocolUtils","PolarisMqttUtils"],(function(a,b,c,d,e,f){"use strict";var g=(c=b("PolarisMqttProtocolUtils")).UTF8Length,h=c.convertStringToUTF8,i=c.convertUTF8ToString,j=c.decodeMultiByteInt,k=c.encodeMultiByteInt,l=c.readUInt16BE,m=c.writeString,n=c.writeUInt16BE,o=b("PolarisMqttUtils").sprintf,p=Object.freeze({CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14}),q=[0,6,77,81,73,115,100,112,3];function r(a,b){b=b;var c=b,d=a[b],e=d>>4;b+=1;var f=j(a,b);if(f==null)return{wireMessage:null,position:c};b=f.offset;f=b+f.value;if(f>a.length)return{wireMessage:null,position:c};var g;switch(e){case p.CONNACK:c=a[b++];c=!!(c&1);var h=a[b++];g=new u(c,h);break;case p.PUBLISH:c=d&15;h=c>>1&3;d=l(a,b);b+=2;var k=i(a,b,d);b+=d;d=null;h===1&&(d=l(a,b),b+=2);var m=w.createWithBytes(a.subarray(b,f)),n=(c&1)===1;c=(c&8)===8;g=new x(k,m,h,d,n,c);break;case p.PINGREQ:g=new s("PINGREQ");break;case p.PINGRESP:g=new s("PINGRESP");break;case p.PUBACK:case p.UNSUBACK:k=l(a,b);g=new v(e===p.PUBACK?"PUBACK":"UNSUBACK",k);break;case p.SUBACK:m=l(a,b);b+=2;h=a.subarray(b,f);g=new t(m,h);break;default:throw new Error(o("Invalid MQTT message type %s.",e))}return{wireMessage:g,position:f}}function a(a){var b=[],c=0;while(c<a.length){var d=r(a,c),e=d.wireMessage;c=d.position;if(e)b.push(e);else break}d=null;c<a.length&&(d=a.subarray(c));return{messages:b,remaining:d}}d=function(){function a(a){this.messageType=p[a]}var b=a.prototype;b.encode=function(){throw new TypeError("Cannot abstract class WireMessage")};return a}();var s=function(b){babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,a)||this}var c=a.prototype;c.encode=function(){var a=new ArrayBuffer(2),b=new Uint8Array(a);b[0]=(this.messageType&15)<<4;return a};return a}(d);f=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,"DISCONNECT")||this}var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=new ArrayBuffer(2),c=new Uint8Array(b);c[0]=a;c.set(k(0),1);return b};return b}(d);var t=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"SUBACK")||this;d.messageIdentifier=a;d.returnCode=c;return d}return a}(d),u=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"CONNACK")||this;d.sessionPresent=a;d.returnCode=c;return d}return a}(d),v=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.messageIdentifier=c;return a}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=2,c=k(b),d=c.length+1;b=new ArrayBuffer(b+d);var e=new Uint8Array(b);e[0]=a;e.set(c,1);d=n(this.messageIdentifier,e,d);return b};return a}(d);c=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this,"CONNECT")||this;d.clientId=b;d.connectOptions=c;return d}var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=q.length+3;b+=g(this.clientId)+2;b+=g(this.connectOptions.userName)+2;var c=k(b);b=new ArrayBuffer(1+c.length+b);var d=new Uint8Array(b);d[0]=a;a=1;d.set(c,1);a+=c.length;d.set(q,a);a+=q.length;c=2|128;d[a++]=c;a=n(this.connectOptions.keepAliveInterval,d,a);a=m(this.clientId,g(this.clientId),d,a);a=m(this.connectOptions.userName,g(this.connectOptions.userName),d,a);return b};return b}(d);b=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e){var f;f=a.call(this,b)||this;f.topic=c;if(d<0&&d>1||d===1&&e==null)throw new TypeError(o("Argument Invalid. qos: %s messageType: %s.",d,b));f.qos=d;f.messageIdentifier=e;return f}var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4;a|=2;var b=g(this.topic),c=2+b+2;this.messageType===p.SUBSCRIBE&&(c+=1);var d=k(c);c=new ArrayBuffer(1+d.length+c);var e=new Uint8Array(c);e[0]=a;a=1;e.set(d,1);a+=d.length;this.messageIdentifier!=null&&(a=n(this.messageIdentifier,e,a));a=m(this.topic,b,e,a);this.messageType===p.SUBSCRIBE&&this.qos!=null&&(e[a++]=this.qos);return c};return b}(d);var w=function(){function a(a,b){this.payloadString=a,this.payloadBytes=b}a.createWithString=function(b){var c=new Uint8Array(new ArrayBuffer(g(b)));h(b,c,0);return new a(b,c)};a.createWithBytes=function(b){var c=0,d=b.length;while(c<b.length&&b[c]!==123&&b[c]!==91)c++,d--;var e=i(b,c,d);b=b.subarray(c,d);return new a(e,b)};var b=a.prototype;b.string=function(){return this.payloadString};b.bytes=function(){return this.payloadBytes};return a}(),x=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d,e,f,g){var h;h=b.call(this,"PUBLISH")||this;h.topic=a;h.payloadMessage=c;h.qos=d;h.messageIdentifier=e;h.retained=f!=null?f:!1;h.duplicate=g!=null?g:!1;if(h.qos===1&&h.messageIdentifier==null)throw new TypeError("Argument Invalid. messageIdentifier: null and qos: 1");return h}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4;this.duplicate&&(a|=8);a=a|=this.qos<<1;this.retained&&(a|=1);var b=g(this.topic),c=b+2;c+=this.messageIdentifier==null?0:2;var d=this.payloadMessage.bytes();c+=d.byteLength;var e=k(c);c=new ArrayBuffer(1+e.length+c);var f=new Uint8Array(c);f[0]=a;f.set(e,1);a=1+e.length;a=m(this.topic,b,f,a);this.messageIdentifier!=null&&(a=n(this.messageIdentifier,f,a));f.set(d,a);return c};return a}(d);e.exports={MESSAGE_TYPE:p,WireMessage:{Base:d,PubAckUnsubAck:v,Ping:s,ConnAck:u,Connect:c,Disconnect:f,Subscription:b,Publish:x},createMessageWithString:w.createWithString,decodeMessage:r,decodeByteMessages:a}}),null);
__d("PolarisMqttTypes",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b){this.errorCode=a,this.errorMessage=b};b=function(a,b){this.mqttError=a,this.connAck=b};c=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){d===void 0&&(d=null);c=a.call(this,c)||this;c.isRecoverable=b;c.originalError=d;return c}return b}(babelHelpers.wrapNativeSuper(Error));e.exports={MqttError:a,MqttChannelError:c,ConnectFailure:b}}),null);
__d("PolarisMqttProtocolClient",["PolarisMqttEnv","PolarisMqttProtocolCodec","PolarisMqttProtocolUtils","PolarisMqttTypes"],(function(a,b,c,d,e,f){"use strict";var g=b("PolarisMqttEnv").Env,h=(a=b("PolarisMqttProtocolCodec")).MESSAGE_TYPE,i=a.WireMessage,j=a.createMessageWithString,k=a.decodeByteMessages,l=b("PolarisMqttProtocolUtils").Pinger,m=b("PolarisMqttProtocolUtils").concatBuffers,n=b("PolarisMqttTypes").ConnectFailure;c=b("PolarisMqttTypes").MqttError;var o=30,p=6e4,q={SOCKET_ERROR:new c(1,"Socket error"),SOCKET_MESSAGE:new c(2,"Unable to parse invalid socket message"),INVALID_DATA_TYPE:new c(3,"Received non-arraybuffer from socket."),CONNECT_TIMEOUT:new c(4,"Connect timed out"),CONNACK_FAILURE:new c(5,"Connection failure due to connack"),PING_TIMEOUT:new c(6,"Ping timeout"),APP_DISCONNECT:new c(7,"Disconnect initiated by app"),SERVER_DISCONNECT:new c(8,"Disconnect message sent my server"),SOCKET_CLOSE:new c(9,"Socket connection closed")};d=function(){function a(a){var b=this;this.handleMessage=function(a){switch(a.messageType){case h.CONNACK:b.$7!=null&&(g.clearTimeout(b.$7),b.$7=null);if(a instanceof i.ConnAck){var c=a;if(c.returnCode!==0){b.$9.bumpCounter("protocol.error.connack.invalidreturncode");b.setConnected(!1);b.$11(q.CONNACK_FAILURE,c.returnCode);return}g.scheduleCallback(function(){b.$2.onConnectSuccess()});b.$8!=null&&b.$8.reset()}break;case h.PUBLISH:if(a instanceof i.Publish){var d=a;g.scheduleCallback(function(){b.$2.onMessageArrived(d.topic,d.payloadMessage.payloadString)});c=d.messageIdentifier;b.$9.bumpCounter("protocol.publish.received");if(d.qos===1&&c!=null){c=new i.PubAckUnsubAck("PUBACK",c);b.$12(c)}}break;case h.PUBACK:if(a instanceof i.PubAckUnsubAck){c=a;var e=c.messageIdentifier;b.$9.bumpCounter("protocol.puback.received");g.scheduleCallback(function(){b.$2.onMessageDelivered("",e)})}break;case h.PINGRESP:b.$8!=null&&b.$8.reset();break;case h.DISCONNECT:b.$11(q.SERVER_DISCONNECT);break;case h.SUBACK:b.$9.bumpCounter("protocol.suback.received");break;case h.UNSUBACK:b.$9.bumpCounter("protocol.unsuback.received");break;default:b.$9.logError(new Error("MqttProtocolClient: Received unhandled message type: "+a.messageType),"Received unhandled message type");b.$9.bumpCounter("protocol.error.handlemessage.unsupportedtype");break}};this.$3=a;this.$2={userName:"",mqttVersion:3,keepAliveInterval:10,ignoreSubProtocol:!1,onConnectSuccess:function(){},onConnectFailure:function(a){},onConnection:function(){},onConnectionError:function(a){},onConnectionLost:function(a){},onMessageArrived:function(a,b){},onMessageDelivered:function(a,b){}};this.$1="mqttwsclient";this.$4=0;this.$5=!1;this.$9=g.getLoggerInstance()}var b=a.prototype;b.connect=function(a){var b=this;if(this.$5)throw new Error("Invalid state: connect - already connected");this.$2=a;this.setConnected(!1);this.$7!=null&&(g.clearTimeout(this.$7),this.$7=null);this.$7=g.setTimeout(function(){b.$9.bumpCounter("protocol.error.connect.timeout"),b.$11(q.CONNECT_TIMEOUT)},o*1e3);this.$6=g.createSocket(this.$3);this.$6.binaryType="arraybuffer";this.$6.onopen=function(){b.setConnected(!0),b.$12(new i.Connect(b.$1,a)),a.onConnection()};this.$6.onmessage=function(a){a=a.data;if(!(a instanceof ArrayBuffer)){b.$9.bumpCounter("protocol.error.onmessage.type");b.$11(q.INVALID_DATA_TYPE);return}try{a=new Uint8Array(a);b.$10!=null&&(a=m(b.$10,a),b.$9.bumpCounter("protocol.debug.usingMessagesBuffer"),delete b.$10,b.$10=null);a=k(a);var c=a.messages;b.$10=a.remaining;for(a=0;a<c.length;a++)b.handleMessage(c[a])}catch(a){b.$10=null,b.$9.logError(a,q.SOCKET_MESSAGE.errorMessage),b.$9.bumpCounter("protocol.error.onmessage.parse"),b.$11(q.SOCKET_MESSAGE)}};this.$6.onerror=function(a){b.$9.bumpCounter("protocol.error.socket"),b.$11(q.SOCKET_ERROR)};this.$6.onclose=function(a){b.$9.bumpCounter("protocol.socket.close"),b.$11(q.SOCKET_CLOSE)};this.$8!=null&&this.$8.cancel();this.$8=new l(a.keepAliveInterval,this.$12.bind(this,new i.Ping("PINGREQ")),this.$11.bind(this,q.PING_TIMEOUT))};b.$13=function(){this.setConnected(!1),this.$8!=null&&this.$8.cancel(),this.$7!=null&&(g.clearTimeout(this.$7),this.$7=null),this.$6!=null&&(this.$6.onopen=function(a){},this.$6.onmessage=function(a){},this.$6.onerror=function(a){},this.$6.onclose=function(a){},this.$6.readyState===this.$6.OPEN&&this.$6.close(),delete this.$6,this.$6=null),this.$2.onConnectSuccess=function(){},this.$2.onConnectFailure=function(a){},this.$2.onConnection=function(){},this.$2.onConnectionError=function(a){},this.$2.onConnectionLost=function(a){},this.$2.onMessageArrived=function(a,b){},this.$2.onMessageDelivered=function(a,b){}};b.disconnect=function(){if(this.$6==null||this.$6.readyState!==this.$6.OPEN||!this.$5){this.$13();return}this.$12(new i.Disconnect());this.$9.bumpCounter("protocol.debug.disconnect");this.$11(q.APP_DISCONNECT)};b.isConnected=function(){return this.$5};b.setConnected=function(a){this.$5=a};b.subscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.subscribe.notconnected");throw new Error("Invalid state: subscribe - not connected")}this.$9.bumpCounter("protocol.subscribe."+a);a=new i.Subscription("SUBSCRIBE",a,0,this.$14());this.$12(a)};b.unsubscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.unsubscribe.notconnected");throw new Error("Invalid state: unsubscribe - not connected")}this.$9.bumpCounter("protocol.unsubscribe."+a);a=new i.Subscription("UNSUBSCRIBE",a,0,this.$14());this.$12(a)};b.publish=function(a,b,c){this.$5||this.$9.bumpCounter("protocol.error.publish.notconnected");this.$9.bumpCounter("protocol.publish."+a);var d=this.$14();a=new i.Publish(a,j(b),c,d);this.$12(a);return d};b.$14=function(){++this.$4===p&&(this.$4=1);return this.$4};b.$11=function(a,b){var c=this.$5,d=this.$2,e=d.onConnectFailure,f=d.onConnectionLost;this.setConnected(!1);c?g.scheduleCallback(function(){f(a)}):g.scheduleCallback(function(){e(new n(a,b!=null?b:-1))});this.$13()};b.$12=function(a){var b=this.$6;if(b==null)return;if(b.readyState!==b.OPEN)return;b.send(a.encode())};return a}();e.exports=d}),null);
__d("PolarisMqttUserName",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c,d,e,f,g){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e,this.$6=f,this.$8=g,this.$7=typeof document==="object"&&document&&document.hasFocus()}var b=a.prototype;b.gen=function(a,b,c){a={u:this.$1,s:a,cp:this.$3,ecp:this.$2,chat_on:this.$6,fg:this.$7,d:this.$4,ct:"cookie_auth",mqtt_sid:"",aid:this.$5,st:b,pm:c,dc:"",no_auto_fg:!0,asi:void 0,a:navigator.userAgent};this.$8&&this.$8.appSpecificInfo&&(a.asi=this.$8.appSpecificInfo);return JSON.stringify(a)};b.setForegroundState=function(a){this.$7=a};b.setChatVisibility=function(a){this.$6=a};return a}();f["default"]=a}),66);
__d("PolarisMqttConnection",["PolarisMqttConnectionHookCollection","PolarisMqttEnv","PolarisMqttProtocolClient","PolarisMqttTypes","PolarisMqttUserName","PolarisMqttUtils","PolarisODS","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h=10,i="publish",j="subscribe",k="unsubscribe";function l(a){}var m=18e4,n=5*1e3,o=15,p=21;a=function(){function a(a,b){var d=this;this.$41=function(a){var b=new Set(a);b.forEach(function(a){d.$14.has(a)||d.unsubscribe(a)});a=new Set(d.$14);a.forEach(function(a){b.has(a)||d.subscribe(a)})};this.$38=function(a,b){try{c("PolarisODS").incr("web.mqtt.js_error_in_init");var e=a?a.message:"error";d.$10.debugTrace("onError",b+": "+e);d.$2(a)}catch(a){c("PolarisODS").incr("web.mqtt.js_error_in_error_logging"),d.$10.logError(a,"JS error while trying to log previous error")}};this.$8=!1;this.$10=c("PolarisMqttEnv").Env.getLoggerInstance();this.$11="Disconnected";this.$14=new Set();this.$15=new Map();this.$17=0;this.$18=0;this.$12=0;this.$13=0;this.$8=!1;this.$5="";this.$6=new(c("PolarisMqttUserName"))(0,0,1,"",0,!0);this.$9=0;this.$7=null;b=function(){};this.$1=b;this.$2=b;this.$3=b;this.$19=new(c("PolarisMqttConnectionHookCollection"))();this.$4=function(){return[]};this.$16=a}var d=a.prototype;d.run=function(a){var b=this,c=a.endpoint,d=a.extraConnectMessageProvider,e=a.mqttUserName,f=a.onJSError,g=a.onMessageReceived,h=a.onStateChange;a=a.subscribedTopics;if(this.$8){this.$10.debugTrace("run","Run called while in running state.");return}this.$1=h;this.$3=g;this.$5=c;this.$6=e;this.$8=!0;this.$12=0;this.$2=f||l;a&&a.forEach(function(a){return b.$14.add(a)});this.$4=d;this.$20();this.$21()};d.shutdown=function(){this.$22(),this.$23("shutdown"),this.$8=!1,this.$10.debugTrace("shutdown","Shutdown")};d.subscribe=function(a){this.$14.add(a);this.ensureConnected(j)&&this.$24(a);return!0};d.publish=function(a,c,d){var e={resolve:function(){},reject:function(a){}},f=new(b("Promise"))(function(a,b){e.resolve=a,e.reject=b}),g=this.ensureConnected(i),h="connection_unknown";if(!g)h="connection_not_connected",e.reject(new Error("Client disconnected"));else{c=this.$25(a,c,d,e);h=c===!0?"connection_published":"connection_failed"}this.$10.eventLogPublish({sessionID:this.$9,topic:a,connectionStatus:g,publishStatus:h});return f};d.unsubscribe=function(a){this.$14["delete"](a);this.ensureConnected(k)&&this.$26(a);return!0};d.addHook=function(a){this.$19.addHook(a)};d.removeHook=function(a){this.$19.removeHook(a)};d.isRunning=function(){return this.$8};d.getSessionId=function(){return this.$9};d.ensureConnected=function(a){if(!this.$8){this.$10.debugTrace("ensureConnected","Mqtt connection: "+a+" called when not running");return!1}if(this.$7==null){this.$10.debugTrace("ensureConnected","Mqtt connection: "+a+" called when not connected, ignored");return!1}var b=this.$7.isConnected();if(!b){this.$10.debugTrace("ensureConnected","Mqtt connection: "+a+" called with client not connected");return!1}return!0};d.connectionState=function(){return this.$11};d.testOnlyGetSubscribedTopics=function(){return this.$14};d.$20=function(){var a=this;c("PolarisMqttEnv").Env.genGk(c("PolarisMqttEnv").MqttGkNames.mqtt_send_unload_event)&&typeof window!=="undefined"&&window.addEventListener("unload",function(b){return a.$27(b)})};d.$27=function(a){this.publish("/browser_close","{}",0)};d.$22=function(){this.$8&&this.$7!=null&&(this.$28("Disconnected"),this.$7!=null&&this.$7.disconnect(),this.$7=null)};d.$28=function(a){a!==this.$11&&(this.$11=a,this.$1(a))};d.$21=function(){var a=this;if(!this.$8)return;this.$28("Connecting");var b=Date.now();this.$9=c("PolarisMqttUtils").generateSessionId();var d=Array.from(this.$14),e=c("PolarisMqttUtils").endpointWithSessionId(this.$5,this.$9);try{this.$7=new(c("PolarisMqttProtocolClient"))(e);var f=this.$29(),g=f.map(function(a){return a.topic});e=this.$6.gen(this.$9,d,f);this.$7!=null&&(this.$7.connect({userName:e,mqttVersion:3,keepAliveInterval:h,ignoreSubProtocol:!0,onConnectFailure:function(c){return a.$30(c,b,d,g)},onConnectSuccess:function(){return a.$31(b,d,g)},onConnection:function(){return a.$32(f,d)},onConnectionError:function(b){return a.$33(b)},onConnectionLost:function(b){return a.$34(b)},onMessageArrived:function(b,c){return a.$35(b,c)},onMessageDelivered:function(b,c){return a.$36(b,c)}}),c("PolarisODS").incr("web.mqtt.protocol.connectattempt"),this.$19.onConnectAttempt())}catch(a){c("PolarisODS").incr("web.mqtt.js_error_in_init_exception"),this.$28("Disconnected"),this.$37(!1,b,d,[],14,a.message),a&&this.$10.logErrorWarn(a,"ws_js_error"),this.$19.onWSFatal(),this.$38(new(c("PolarisMqttTypes").MqttChannelError)(!1,"ws_js_error",a),"client_init")}};d.$29=function(){var a=this.$4(),b=65536;return a.map(function(a){a.messageId=b--;return a})};d.$24=function(a){try{if(this.$7!=null){this.$7.subscribe(a);this.$10.debugTrace("_doSubscribe","Subscribing to "+a);this.$19.onSubscribe(a);c("PolarisODS").incr("web.mqtt.protocol.subscribe");return!0}}catch(a){this.$10.logError(a,"Exception subscribing"),c("PolarisODS").incr("web.mqtt.subscribe_exception"),c("PolarisODS").incr("web.mqtt.protocol.subscribe.error")}return!1};d.$26=function(a){try{if(this.$7!=null){this.$7.unsubscribe(a);this.$10.debugTrace("_doUnsubscribe","Unsubscribing to "+a);this.$19.onUnsubscribe(a);c("PolarisODS").incr("web.mqtt.protocol.unsubscribe");return!0}}catch(a){this.$10.logError(a,"Exception unsubscribing"),c("PolarisODS").incr("web.mqtt.unsubscribe_exception"),c("PolarisODS").incr("web.mqtt.protocol.unsubscribe.error")}return!1};d.$25=function(a,b,d,e){if(this.$7!=null)try{b=this.$7.publish(a,b,d);c("PolarisODS").incr("web.mqtt.protocol.publish");var f=b!=null?b:"null";this.$10.debugTrace("_doPublish","publish "+a+" with messageId:"+f+" qos:"+d);this.$19.onPublish(a);b!=null?this.$15.set(b,e):e.resolve();return!0}catch(a){this.$10.logError(a,"Exception publishing");c("PolarisODS").incr("web.mqtt.publish_exception");e.reject(a);c("PolarisODS").incr("web.mqtt.protocol.publish.error");return!1}else return!1};d.$39=function(a){var b=this;a===void 0&&(a=null);if(!this.$8)return;this.$22();this.$23("reconnect");this.$40();this.$9=-1;this.$13=0;a=a!=null?a:Math.pow(2,Math.min(this.$12,6))*(1e3+c("PolarisMqttEnv").Env.random()*200);this.$10.debugTrace("_scheduleReconnect","Reconnect in "+a+" ms");c("PolarisMqttEnv").Env.setTimeout(function(){b.$21()},a);this.$12+=1};d.$40=function(){if(!c("PolarisMqttEnv").Env.genGk(c("PolarisMqttEnv").MqttGkNames.mqtt_ws_reconnect_reset))return;var a=Date.now()-this.$13,b=this.$13!==0&&a>n,d=this.$12>o;(b||d)&&(this.$12=0);this.$13!==0&&a<=n&&c("PolarisODS").incr("web.mqtt.short_lived_session");d&&c("PolarisODS").incr("web.mqtt.connection_attempt_limit")};d.$37=function(a,b,c,d,e,f){a===!0?this.$18++:this.$17++,this.$10.eventLogConnect({sessionID:this.$9,connectionStatus:a,duration:Date.now()-b,hostname:this.$5,attemptNumber:this.$12,failTotal:this.$17,successTotal:this.$18,subscribedTopics:c,publishes:d,errorCode:e,errorMessage:f})};d.$30=function(a,b,d,e){var f=a.mqttError,g=f.errorMessage;this.$10.debugTrace("connect","Connect failed "+g);c("PolarisODS").incr("web.mqtt.protocol.onconnectfailure");this.$19.onConnectFailure();this.$37(!1,b,d,e,f.errorCode,g);if(a.connAck!=null){c("PolarisODS").incr("web.mqtt.protocol.connect_failure");if(a.connAck===p){this.$39(m);return}}this.$39()};d.$32=function(a,b){var d=this;c("PolarisODS").incr("web.mqtt.protocol.onconnection");this.$10.debugTrace("Connect","Socket established");this.$19.onConnected();b.forEach(function(a){d.$19.onSubscribe(a)});a.forEach(function(a){d.$19.onPublish(a.topic)});this.$28("TransportConnected")};d.$31=function(a,b,d){c("PolarisODS").incr("web.mqtt.protocol.onconnectsuccess"),this.$10.debugTrace("connect","Connect success"),this.$19.onConnectSuccess(),this.$37(!0,a,b,d),this.$28("Connected"),this.$41(b),c("PolarisMqttEnv").Env.genGk(c("PolarisMqttEnv").MqttGkNames.mqtt_ws_reconnect_reset)||(this.$12=0),this.$13=Date.now()};d.$34=function(a){c("PolarisODS").incr("web.mqtt.protocol.onconnectionlost"),a.errorCode&&this.$10.eventLogDisconnect({sessionID:this.$9,errorCode:a.errorCode,errorMessage:a.errorMessage,duration:Date.now()-this.$13}),this.$10.debugTrace("connect","connection lost"),this.$19.onConnectionLost(),this.$39()};d.$33=function(a){};d.$35=function(a,b){c("PolarisODS").incr("web.mqtt.protocol.onmessagearrived");this.$10.debugTrace("onMessageArrived","Message received on "+a);this.$19.onMessage(a);try{this.$3(a,b)}catch(a){this.$10.logError(a,"Listener threw error"),c("PolarisODS").incr("web.mqtt.listener_error")}};d.$36=function(a,b){c("PolarisODS").incr("web.mqtt.protocol.onmessagedelivered");a=b!=null?b:"null";this.$10.debugTrace("onMessageDelivered","Delivered Message {ID: "+a+"}");if(b==null)return;a=this.$15.get(b);if(a==null)return;this.$15["delete"](b);a.resolve()};d.$23=function(a){this.$15.forEach(function(b,c,d){b.reject(new Error(a))}),this.$15.clear()};return a}();g["default"]=a}),98);
__d("PolarisMqttChannel",["PolarisChannelClientID","PolarisIrisSubscribeChecker","PolarisMqttAnalyticsHook","PolarisMqttConnection","PolarisMqttEnv","PolarisMqttUserName","PolarisMqttUtils","PolarisODS","Promise","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h=60*1e3;a=function(){function a(a){var b=this,d=a.appId,e=a.capabilities,f=a.chatVisibility;f=f===void 0?!0:f;var g=a.clientCapabilities,h=a.debugId,i=a.endpoint,j=a.igSpecificOptions,k=a.initialSubscribedTopics,l=a.observer;a=a.userFbid;this.$8=c("PolarisMqttEnv").Env.getLoggerInstance();this.$8.setAppId(d);this.$9=new(c("PolarisMqttUserName"))(a,e,g,c("PolarisChannelClientID").getID(),d,f,j);this.$1=i;this.$5="Disconnected";this.$2=[l];this.$4=new Set();this.$6=new Map();this.$7=new(c("PolarisMqttConnection"))(j,h);j&&j.deviceId?this.$3=j.deviceId:this.$3=c("uuidv4")();this.$13=new(c("PolarisMqttAnalyticsHook"))();this.$7.addHook(this.$13);this.$7.addHook(new(c("PolarisIrisSubscribeChecker"))(function(){return b.$4.size>0}));this.$10=!1;this.$12=new Map();this.$11=[];this.$14(k)}var d=a.prototype;d.$14=function(a){var b=this;if(this.$7.isRunning()){this.$15("run","Connection started calling run again");return}if(c("PolarisMqttEnv").Env.genGk(c("PolarisMqttEnv").MqttGkNames.mqtt_ws_polling_enabled))if(c("PolarisMqttEnv").Env.genGk(c("PolarisMqttEnv").MqttGkNames.mqtt_ws_forced_polling_only)){this.$15("MqttChannel","Websocket disabled, will do long polling only");return}else if(!c("PolarisMqttUtils").hasWSSupport()){this.$15("MqttChannel","Websocket Unavailable, will do long polling only");c("PolarisODS").incr("web.mqtt.ws_unavailable_polling");return}this.$7.run({onStateChange:function(a){b.$16(a)},onJSError:function(a){b.$17(a)},onMessageReceived:function(a,c){b.$18(a,c)},endpoint:this.$1,mqttUserName:this.$9,subscribedTopics:a,extraConnectMessageProvider:function(){return b.$19()}})};d.shutdown=function(){this.$7&&this.$7.shutdown()};d.publish=function(a,b,c){c===void 0&&(c={qos:1,skipBuffer:!1});return c.qos===0?this.$20(a,b):this.$21(a,b,c)};d.$20=function(a,b){return this.$7.publish(a,b,0)};d.$21=function(a,d,e){var f={resolve:function(){},reject:function(a){}},g=new(b("Promise"))(function(a,b){f.resolve=a,f.reject=b}),h=c("PolarisMqttEnv").Env.random();a={topic:a,payload:d,options:e,ack:f,publishToken:h,timeoutId:null};e.skipBuffer?this.$7.connectionState()==="Connecting"?this.$11.push(a):this.$22(a):(a.timeoutId=this.$23(h),this.$12.set(h,a),this.$24(a));return g};d.$22=function(a){c("PolarisMqttUtils").promiseDone(this.$7.publish(a.topic,a.payload,a.options.qos),function(){a.ack.resolve()},function(b){a.ack.reject(b)})};d.$24=function(a){var b=this;c("PolarisMqttUtils").promiseDone(this.$7.publish(a.topic,a.payload,a.options.qos),function(){return b.$25(a)},function(a){})};d.subscribe=function(a,b){this.$7.subscribe(a);var c=this.$6.get(a);!c?(c=[b],this.$6.set(a,c)):c.push(b)};d.subscribeChannelEvents=function(a){this.$2.push(a)};d.registerExtraConnectPayloadProvider=function(a){var b=this;this.$4.add(a);if(this.$7.isRunning()){a=a.getPublishMessages();a.forEach(function(a){b.publish(a.topic,a.payload,{qos:a.qos,skipBuffer:!0})["catch"](function(a){return b.$8.logError(a,a==null?void 0:a.message)})})}};d.unregisterExtraConnectPayloadProvider=function(a){this.$4["delete"](a)};d.unsubscribe=function(a){this.$7.unsubscribe(a),this.$6["delete"](a)};d.getConnectionState=function(){return this.$5};d.getEndpoint=function(){return this.$1};d.addHook=function(a){this.$7.addHook(a)};d.removeHook=function(a){this.$7.removeHook(a)};d.testOnlyMessageReceived=function(a,b){this.$18(a,b)};d.$26=function(a){var b=this.$12.get(a);b!=null&&b.timeoutId!=null&&c("PolarisMqttEnv").Env.clearTimeout(b.timeoutId);this.$12["delete"](a)};d.$23=function(a){var b=this;return c("PolarisMqttEnv").Env.setTimeout(function(a){var d=b.$12.get(a);if(!d)return;var e=d.topic;c("PolarisODS").incr("web.mqtt.publish_timeout");b.$8.debugTrace("publish_timeout","Timeout publishing topic: "+e+" publishToken: "+a);b.$26(a);d.ack.reject(new Error("Publish Timed Out"))},h,a)};d.$25=function(a){var b=a.publishToken,d=this.$12.get(b);if(!d)return;this.$26(b);a.ack.resolve();this.$8.debugTrace("publish_success","Topic: "+a.topic+" publishToken: "+a.publishToken);c("PolarisODS").incr("web.mqtt.publish_success")};d.$18=function(a,b){var d=this.$6.get(a);if(!d)this.$8.debugTrace("_onMessageReceived",a+" being dropped, no listeners");else for(var a=d,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;try{f(b)}catch(a){this.$8.logError(a,"Listener exception"),c("PolarisODS").incr("web.mqtt.listener_error")}}};d.$17=function(a){if(c("PolarisMqttEnv").Env.genGk(c("PolarisMqttEnv").MqttGkNames.mqtt_ws_polling_enabled)){a.isRecoverable?c("PolarisODS").incr("web.mqtt.recoverable_error_skipped"):c("PolarisODS").incr("web.mqtt.unrecoverable_error_skipped");return}a.isRecoverable?c("PolarisODS").incr("web.mqtt.recoverable_error_not_skipped"):c("PolarisODS").incr("web.mqtt.unrecoverable_error_not_skipped");a.isRecoverable||(this.$10=!0);this.$27(a)};d.$27=function(a){for(var b=this.$2,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.onJSError&&e.onJSError(a)}};d.$16=function(a){var b=this;a==="Connecting"?(this.$11.forEach(function(a){a.ack.reject(new Error("Client Reconnecting"))}),this.$11=[]):a==="TransportConnected"&&(this.$11.forEach(function(a){b.$22(a)}),this.$11=[],this.$12.forEach(function(a,c,d){b.$24(a)}));this.$5=this.$28(a);this.$15("_changeState","Connection state = "+a);this.$29()};d.$28=function(a){switch(a){case"Connecting":case"TransportConnected":return"Connecting";case"Connected":return"Connected";case"Disconnected":return"Disconnected"}throw new Error("Unknown state "+a)};d.$29=function(){for(var a=this.$2,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.onMQTTStateChanged(this.$5)}};d.$19=function(){var a=this,b=[];this.$4.forEach(function(d){try{d=d.getPublishMessages();Array.prototype.push.apply(b,d)}catch(b){a.$8.logError(b,"ConnectPayload provider exception"),c("PolarisODS").incr("web.mqtt.connectPayloadProvider_error")}});return b};d.$15=function(a,b){this.$8.debugTrace(a,"Mqtt channel: "+b)};d.setForegroundState=function(a){this.$9&&this.$9.setForegroundState(a)};d.setChatVisibility=function(a){this.$9&&this.$9.setChatVisibility(a)};return a}();g["default"]=a}),98);
__d("PolarisMqttLogger",["PolarisChannelClientID","PolarisDirectLogger","PolarisMqttEnv","PolarisODS"],(function(a,b,c,d,e,f,g){"use strict";a="mqtt_client";var h=null,i=new(d("PolarisDirectLogger").DirectLogger)(a,c("PolarisChannelClientID").getID()),j={CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish",CLIENT_ERROR:"mqtt_client_error"};b=function(){a.getInstance=function(){h||(h=new a());return h};function a(){this.$1=0,this.$2=Date.now(),this.$3=c("PolarisChannelClientID").getID()}var b=a.prototype;b.setAppId=function(a){this.$1===0&&(this.$1=a)};b.eventLogConnect=function(a){var b=a.attemptNumber,d=a.connectionStatus,e=a.duration,f=a.errorCode,g=a.errorMessage;a.failTotal;var h=a.hostname,i=a.publishes,k=a.sessionID,l=a.subscribedTopics;a.successTotal;d?c("PolarisODS").incr("web.mqtt.mqtt_client_connect.success"):c("PolarisODS").incr("web.mqtt.mqtt_client_connect.failed");a={device_id:this.$3,session_id:k,logged_in:c("PolarisMqttEnv").Env.isUserLoggedInNow(),href:window.location.hostname,connection_status:d,duration:e,hostname:h,attempt_number:b,subscribed_topics:l,publishes:i,error_code:f,error_message:g};this.$4(j.CONNECT,a)};b.eventLogPull=function(a){var b=a.duration,d=a.errorMessage,e=a.hostname,f=a.pullEventName,g=a.sessionID;a=a.status;g={device_id:this.$3,session_id:g,logged_in:c("PolarisMqttEnv").Env.isUserLoggedInNow(),href:window.location.hostname,connection_status:a,duration:b,hostname:e,error_message:d};this.$4(f,g)};b.eventLogDisconnect=function(a){var b=a.duration,d=a.errorCode,e=a.errorMessage;a=a.sessionID;c("PolarisODS").incr("web.mqtt.mqtt_client_disconnect");a={device_id:this.$3,session_id:a,href:window.location.hostname,duration:b,error_code:d,error_message:e};this.$4(j.DISCONNECT,a)};b.eventLogPublish=function(a){var b=a.connectionStatus,d=a.publishStatus,e=a.sessionID;a=a.topic;c("PolarisODS").incr("web.mqtt.mqtt_client_publish");e={device_id:this.$3,href:window.location.hostname,session_id:e,topic:a,connection_status:b,publish_status:d};this.$4(j.PUBLISH,e)};b.logError=function(a,b){c("PolarisMqttEnv").Env.scheduleLoggingCallback(function(){i.logError(b,a)})};b.eventLogMiscellaneousError=function(a){a=a.errorMessage;a={device_id:this.$3,logged_in:c("PolarisMqttEnv").Env.isUserLoggedInNow(),href:window.location.hostname,error_message:a,time_passed:Date.now()-this.$2};this.$4(j.CLIENT_ERROR,a)};b.logErrorWarn=function(a,b){c("PolarisMqttEnv").Env.scheduleLoggingCallback(function(){i.logError(b,a)})};b.logWarn=function(a,b){};b.debugTrace=function(a,b){c("PolarisMqttEnv").Env.scheduleLoggingCallback(function(){i.debugTrace(a,b)})};b.bumpCounter=function(a){};b.$4=function(a,b){var d=this;c("PolarisMqttEnv").Env.scheduleLoggingCallback(function(){b.event_type=a,b.app_id=d.$1,b.online=d.$5(),i.logDirectEvent(a,b)})};b.$5=function(){return window.navigator&&window.navigator.onLine!==void 0?window.navigator.onLine:!1};return a}();g["default"]=b}),98);
__d("polarisSetTimeoutAcrossTransitions",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){for(var c=arguments.length,d=new Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];return setTimeout.apply(void 0,[a,b].concat(d))}f["default"]=a}),66);
__d("PolarisMqttEnvInitializer",["PolarisConfig","PolarisMqttEnv","PolarisMqttLogger","PolarisWebStorage","polarisSetTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h="mqtt:";a={initialize:function(){d("PolarisMqttEnv").Env.initialize(null,d("PolarisConfig").isLoggedIn,null,c("polarisSetTimeoutAcrossTransitions"),function(){return c("PolarisMqttLogger").getInstance()},null,null,null,null,function(a,b){var d=c("PolarisWebStorage").getLocalStorage();if(d){d=d.getItem(h+a);if(d!=null)return d}return b},function(a,b){var d=c("PolarisWebStorage").getLocalStorage();d&&(b==null?d.removeItem(h+a):d.setItem(h+a,b))})}};b=a;g["default"]=b}),98);
__d("polarisArraySplitChunks",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=[];for(var d=0;d<a.length;d+=b)c.push(a.slice(d,d+b));return c}f["default"]=a}),66);
__d("polarisNextTick",[],(function(a,b,c,d,e,f){"use strict";process&&typeof process.nextTick==="function"?a=function(a){process.nextTick(a)}:typeof setImmediate==="function"?a=function(a){setImmediate(a)}:typeof window.setTimeout==="function"?a=function(a){window.setTimeout(a,0)}:a=function(a){a()};b=a;f["default"]=b}),66);
__d("polarisForEachAsync",["Promise","polarisNextTick"],(function(a,b,c,d,e,f,g){"use strict";function a(a,d){return new(b("Promise"))(function(b,e){var f=0;if(a.length===0){b();return}function g(){try{d(a[f])}catch(a){e(a);return}f++;f>=a.length?b():c("polarisNextTick")(g)}g()})}g["default"]=a}),98);
__d("PolarisDirectMQTT",["PolarisBaseGraphQLEventHandler","PolarisCallGatingHelpers","PolarisConfig","PolarisDeviceOrMachineId","PolarisDirectConstants","PolarisDirectDeltaHandlers","PolarisDirectGraphQLSubscription","PolarisDirectIrisSubscription","PolarisDirectLogger","PolarisDirectSkywalkerSubscription","PolarisLiveDeltaHandler","PolarisMediaOverlayInfoTypes","PolarisMqttChannel","PolarisMqttEnvInitializer","PolarisODS","PolarisReactRedux","nullthrows","polarisArraySplitChunks","polarisDeveloperSettings","polarisForEachAsync","polarisGenerateOfflineThreadingId","randomInt"],(function(a,b,c,d,e,f,g){"use strict";var h=20;a=function(){function a(a,b){var e=this;this.$8=0;this.$14=function(a){var b;try{b=JSON.parse(a.substr(0,a.length-1))}catch(a){e.$4.logError("Could not parse mqttMessages",a);return}a=b.payload.header;if(a.type===4&&a.conferenceName.includes("ROOM")){var d,f;d=((d=b.payload.body)==null?void 0:(d=d.ringRequest)==null?void 0:d.ringType)%2===1;f=(f=b.payload.body)==null?void 0:(f=f.ringRequest)==null?void 0:(f=f.appMessages)==null?void 0:f.find(function(a){return a.body.genericMessage.topic==="ring_data"});var g="",h="",i="",j=[];if(f){f=JSON.parse(f==null?void 0:(f=f.body)==null?void 0:(f=f.genericMessage)==null?void 0:f.data);var k=f.display_name,l=f.display_uri,m=f.group_name,n=f.ig_thread_id;f=f.participant_usernames;g=n;i=k;j.push(l);if(m)h=m;else{try{f=JSON.parse(f)}catch(a){}h=Array.isArray(f)?[k].concat(f).join(", "):k}}e.$6(a.type,a.serverInfoData,g,d,h,j,i);c("PolarisODS").incr("web.rtc.ack_ring_message");e.$15(a.conferenceName,a.sequenceNumber,a.serverInfoData,a.transactionId,a.type,a.conferenceType)}else a.type===5&&a.conferenceName.includes("ROOM")?(e.$6(a.type,a.serverInfoData,"",!1,"",[],""),c("PolarisODS").incr("web.rtc.ack_dismiss_message"),e.$15(a.conferenceName,a.sequenceNumber,a.serverInfoData,a.transactionId,a.type,a.conferenceType)):c("PolarisODS").incr("web.rtc.rtc_message_ignored")};this.$15=function(a,b,d,f,g,h){if(e.$7==null){var i=c("randomInt")(0,4294967294)+1;e.$7=String(i)}i={endpoint:{appId:e.$12(),deviceId:e.$13(),userId:e.$11()},jsonPayload:{header:{clientSessionId:e.$7,clientStack:5,conferenceType:h,conferenceName:a,messageTags:[],responseStatusCode:200,retryCount:0,sequenceNumber:b,serverInfoData:d,transactionId:f,type:g},body:{ringResponse:{deviceCapabilities:[],deviceStatus:0}}}};c("nullthrows")(e.$5).publish("/rtc_multi",JSON.stringify(i))["catch"](function(a){var b;g===4?c("PolarisODS").incr("web.rtc.ack_ring_message_failed"):g===5?c("PolarisODS").incr("web.rtc.ack_dismiss_message_failed"):c("PolarisODS").incr("web.rtc.ack_message_failed");b=(b=(b=e.$5)==null?void 0:b.getConnectionState())!=null?b:"Unknown";e.$4.logError("ack_rtc_message_failed",a,{message_type:g,conference_type:h,mqtt_state:b});throw a})};this.$16=function(a){var b=c("nullthrows")(e.$1),f;try{f=JSON.parse(a)}catch(a){e.$4.logError("Could not parse mqttMessages",a);return}if(!Array.isArray(f)){e.$4.debugTrace("parsed_message_not_array",typeof f);return}c("polarisForEachAsync")(c("polarisArraySplitChunks")(f,h),function(a){d("PolarisReactRedux").batch(function(){for(var c=a,d=Array.isArray(c),f=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(d){if(f>=c.length)break;g=c[f++]}else{f=c.next();if(f.done)break;g=f.value}g=g;var h=g.data,i=g.event,j=g.mutation_token;g=g.seq_id;e.$4.debugTrace("parsed_message",{event:i,mutation_token:j});if(i!=="patch"){e.$4.debugTrace("skipped_message",{event:i});return}if(!Array.isArray(h)){e.$4.debugTrace("parsed_message_bad_operations",typeof h);return}for(var i=h,h=Array.isArray(i),k=0,i=h?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var l;if(h){if(k>=i.length)break;l=i[k++]}else{k=i.next();if(k.done)break;l=k.value}l=l;b.handleDelta(l,j)}if(g){l=e.$2.subscription_type;e.$4.debugTrace("seq_id",{seq_id:g,subscriptionType:l});l==="message"&&b.onSeqIdUpdated(g)}}})})};this.$17=function(a){try{a=JSON.parse(a);if(a.status==="ok"){var b;(a==null?void 0:(b=a.payload)==null?void 0:b.activity_status)==null?e.$4.logDirectEvent("send_message_response_success"):e.$4.logDirectEvent("send_activity_response_success")}else{(a==null?void 0:(b=a.payload)==null?void 0:b.activity_status)==null?e.$4.logError("send_message_response_failed"):e.$4.logDirectEvent("send_activity_response_failed")}}catch(a){e.$4.logError("send_message_response_parse_failed",a)}};this.$18=function(a){e.$4.debugTrace("state_changed",a);var b=c("nullthrows")(e.$1);if(a==="Connected"){var f=c("nullthrows")(e.$5);f.subscribe("/ig_message_sync",e.$16);f.subscribe("/ig_send_message_response",e.$17);d("PolarisCallGatingHelpers").isIncomingCallEnabled()&&!d("PolarisCallGatingHelpers").isZenonIncomingRingEnabled()&&f.subscribe("/pubsub",e.$14);e.$3||(e.$3=new(d("PolarisDirectIrisSubscription").DirectIrisSubscription)(b,e.$2,f,e.$4.getDebugId()));e.$3.subscribe();e.$10||(e.$10=new(d("PolarisDirectGraphQLSubscription").DirectGraphQLSubscription)(b,f,e.$4.getDebugId()));e.$2.subscription_type==="message"?(e.$9||(e.$9=new(d("PolarisDirectSkywalkerSubscription").DirectSkywalkerSubscription)(b,f,e.$4.getDebugId())),e.$9.subscribe(),e.$10&&e.$10.enableOrDisableEventHandlerByType(d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PRESENCE,!0)):(e.$4.debugTrace("skip_skywalker",e.$2),e.$10&&e.$10.enableOrDisableEventHandlerByType(d("PolarisBaseGraphQLEventHandler").GRAPH_QL_EVENT_TYPES.PRESENCE,!1));e.$10&&e.$10.subscribe()}else if(a==="Disconnected"){e.$3&&(e.$3.unsubscribe(),e.$3=null);e.$9&&(e.$9.unsubscribe(),e.$9=null);e.$10&&(e.$10.unsubscribeGraphQL(),e.$10=null);f=e.$5;f&&(f.unsubscribe("/ig_message_sync"),f.unsubscribe("/ig_send_message_response"),d("PolarisCallGatingHelpers").isIncomingCallEnabled()&&!d("PolarisCallGatingHelpers").isZenonIncomingRingEnabled()&&f.unsubscribe("/pubsub"))}b.onMqttConnectivityChanged(a)};this.$19=function(a){e.$4.logDirectEvent("send_attempt",{action:a.action,type:a.item_type||""});return c("nullthrows")(e.$5).publish("/ig_send_message",JSON.stringify(babelHelpers["extends"]({client_context:c("polarisGenerateOfflineThreadingId")(),device_id:e.$13()},a)))["catch"](function(a){e.$4.logError("send_message_failed",a);throw a})};this.$4=new(d("PolarisDirectLogger").DirectLogger)("DirectMQTT",b);this.$4.debugTrace("ctor",a);this.$1=null;this.$2=a;this.$3=null;this.$5=null;this.$9=null;this.$10=null}var b=a.prototype;b.$11=function(){return parseInt(c("nullthrows")(d("PolarisConfig").getViewerId()),10)};b.$12=function(){return parseInt(d("PolarisConfig").getIGAppID(),10)};b.$13=function(){return d("PolarisDeviceOrMachineId").getDeviceOrMachineId()};b.sendRtcHangupRequest=function(a){var b=this;a={endpoint:{appId:this.$12(),deviceId:this.$13(),userId:this.$11()},jsonPayload:{header:{clientSessionId:this.$7,clientStack:5,messageTags:[],retryCount:0,sequenceNumber:this.$8++,serverInfoData:a,transactionId:String(c("randomInt")(0,4294967294)+1),type:2},body:{hangupRequest:{detailedReasonString:"",reason:0}}}};return c("nullthrows")(this.$5).publish("/rtc_multi",JSON.stringify(a))["catch"](function(a){b.$4.logError("send_rtc_hangup_message_failed",a);throw a})};b.sendTextMessage=function(a,b,c,e,f){return this.$19({action:"send_item",item_type:d("PolarisDirectConstants").ThreadItemType.TEXT,mutation_token:c,replied_to_item_id:e,replied_to_client_context:f,text:b,thread_id:a})};b.sendMediaShare=function(a,b,c){return(c==null?void 0:c.overlay_layout)===d("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_LAYOUTS.MEDIA_COVER||(c==null?void 0:c.overlay_layout)===d("PolarisMediaOverlayInfoTypes").MEDIA_OVERLAY_LAYOUTS.MEDIA_COVER_WITH_BOTTOM_BANNER?this.$19({action:"send_item",item_type:d("PolarisDirectConstants").ThreadItemType.MEDIA_SHARE,media_id:b,thread_id:a,share_treatment_type:d("PolarisDirectConstants").InformTreatmentTypeValues.WARNING_SCREENS,share_treatment_title:d("PolarisDirectConstants").InformTreatmentTitleValues.FALLBACK}):this.$19({action:"send_item",item_type:d("PolarisDirectConstants").ThreadItemType.MEDIA_SHARE,media_id:b,thread_id:a})};b.sendLike=function(a,b){return this.$19({action:"send_item",item_type:d("PolarisDirectConstants").ThreadItemType.LIKE,mutation_token:b,thread_id:a})};b.indicateTypingActivity=function(a,b){return this.$19({action:"indicate_activity",thread_id:b,activity_status:a})};b.markVisualItemSeen=function(a,b){return this.$19({action:"mark_visual_item_seen",target_item_type:"voice_media",thread_id:b,item_ids:JSON.stringify([a])})};b.modifyLikeReaction=function(a,b,c,d,e){return this.$19({action:"send_item",item_id:a,item_type:"reaction",node_type:"item",reaction_status:d,reaction_type:"like",target_item_type:b,thread_id:c,emoji:(a=e)!=null?a:""})};b.disconnect=function(){this.$4.debugTrace("disconnect_start"),this.$3?(this.$4.debugTrace("unsubscribe_iris"),c("nullthrows")(this.$3).unsubscribe(),this.$3=null):this.$4.debugTrace("no_iris"),this.$9?(this.$4.debugTrace("unsubscribe_skywalker"),this.$9=null):this.$4.debugTrace("no_skywalker"),this.$10?(this.$4.debugTrace("unsubscribe_graphql"),this.$10=null):this.$4.debugTrace("no_graphql"),this.$5?(this.$4.debugTrace("shutdown_channel"),c("nullthrows")(this.$5).shutdown(),this.$5=null):this.$4.debugTrace("no_channel"),this.$1&&(this.$1=null),this.$4.debugTrace("disconnect_end")};b.connect=function(a,b){var e=this;this.$4.debugTrace("connect_start");this.disconnect();this.$1=new(d("PolarisDirectDeltaHandlers").DirectDeltaHandlers)(a,this.$4.getDebugId());this.$6=b;a={onMQTTStateChanged:this.$18,onJSError:function(a){e.$4.logError("mqtt_js_error",a)}};b={appSpecificInfo:{},deviceId:this.$13()};var f=d("PolarisConfig").getLanguageCode();f!=null&&(b.appSpecificInfo["Accept-Language"]=f);c("PolarisMqttEnvInitializer").initialize();f={endpoint:d("PolarisDirectConstants").PROD_MQTT_GATEWAY,userFbid:this.$11(),appId:this.$12(),initialSubscribedTopics:[],igSpecificOptions:b,observer:a,debugId:this.$4.getDebugId(),capabilities:0,clientCapabilities:1,chatVisibility:!0};this.$5=new(c("PolarisMqttChannel"))(f);this.$4.debugTrace("connect_end")};b.subscribeToLiveEvent=function(a,b,d){var e=this.$10;if(e==null)return;b=new(c("PolarisLiveDeltaHandler"))(b);e.enableLiveEventHandler(a,b,d);e.subscribe()};b.unsubscribeToLiveEvent=function(a){var b=this.$10;if(b==null)return;b.disableLiveEventHandler(a);b.subscribe()};b.getLogger=function(){return this.$4};return a}();g.DirectMQTT=a}),98);
__d("PolarisDiscoveryModuleFalcoEvent",["PolarisFalcoLogger","PolarisLogger","PolarisLoggerUtils"],(function(a,b,c,d,e,f,g){"use strict";var h={falco:!0,pigeon:!1};function i(a){return babelHelpers["extends"]({},d("PolarisLogger").getExtra(a),{objid:d("PolarisLoggerUtils").trimAndSanitizeUrl(window.location.href)})}a={log:function(a){a=babelHelpers["extends"]({},i(a()));d("PolarisFalcoLogger").FalcoLogger.log("instagram_web_discovery_module",a,{},h)}};b=a;g["default"]=b}),98);
__d("PolarisLoggedOutExploreModuleLogger",["PolarisDiscoveryModuleFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.component,d=a.containermodule,e=a.eventName,f=a.key;c("PolarisDiscoveryModuleFalcoEvent").log(function(){return babelHelpers["extends"]({containermodule:d,event_name:e,component:b},f!=null&&{category:f})})}g.logExploreModuleEvent=a}),98);/*FB_PKG_DELIM*/
__d("IGDPostFastShare.react",["CometPlaceholder.react","PolarisPostFastShareButton","browserHistory","deferredLoadComponent","qex","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=c("deferredLoadComponent")(c("requireDeferred")("IGDPageSetup.react").__setRef("IGDPostFastShare.react"));function a(a){var b=a.analyticsContext,e=a["data-testid"];e=a.mediaId;var f=a.postId;a=a.sharingFrictionInfo;var g=d("browserHistory").getPath(d("browserHistory").browserHistory);g=g.startsWith("/direct");var i=c("qex")._("605")||!1;return!g&&i?h.jsx(j,{analyticsContext:b,"data-testid":void 0,mediaId:e,postId:f,sharingFrictionInfo:a}):h.jsx(c("PolarisPostFastShareButton"),{analyticsContext:b,"data-testid":void 0,mediaId:e,postId:f,sharingFrictionInfo:a})}a.displayName=a.name+" [from "+f.id+"]";function j(a){var b=a.analyticsContext,d=a["data-testid"];d=a.mediaId;var e=a.postId;a=a.sharingFrictionInfo;b=h.jsx(c("PolarisPostFastShareButton"),{analyticsContext:b,"data-testid":void 0,mediaId:d,postId:e,sharingFrictionInfo:a});return h.jsx(c("CometPlaceholder.react"),{fallback:b,children:h.jsx(i,{placeholder:b,children:b})})}j.displayName=j.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisDynamicExplorePostModal.react",["PolarisDynamicExploreMediaHelpers","PolarisDynamicExploreTypes","PolarisIsLoggedInDesktop","PolarisLinkBuilder","PolarisPost.react","PolarisReactRedux","cr:874","polarisDynamicExploreSelectors","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var e=a.analyticsContext,f=a.exploreGridQuery,g=a.exploreGridType,i=a.modalEntryPath,j=a.onClose,k=a.onOpen,l=a.postId;a=d("PolarisReactRedux").useSelector(function(a){return d("polarisDynamicExploreSelectors").getPostModalCompatibleGridItemIds(a,g,f)});var m=d("PolarisReactRedux").useSelector(function(a){return d("polarisDynamicExploreSelectors").getGridItems(a,g,f).find(function(a){return d("PolarisDynamicExploreMediaHelpers").getPostId(a)===l})});return m!=null&&h.jsx(b("cr:874"),{analyticsContext:e,combinedPostIds:a,dimensions:d("PolarisDynamicExploreMediaHelpers").getPostDimensions(m),mediaLinkBuilder:d("PolarisLinkBuilder").buildMediaLink,modalEntryPath:i,onClose:j,onlyReplaceModalHistory:g===d("PolarisDynamicExploreTypes").DYNAMIC_EXPLORE_GRID_TYPES.keyword_grid,onOpen:k,postCode:d("PolarisDynamicExploreMediaHelpers").getPostCode(m),postId:l,children:h.jsx(c("PolarisPost.react"),{analyticsContext:e+"Modal",autoplay:d("PolarisIsLoggedInDesktop").isLoggedInDesktop(),id:l,isVisible:!0,visiblePosition:0})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisMaybeInstantPostModal.react",["cr:874"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:874")}),98);
__d("PolarisMediaBrowserPostModal.react",["invariant","PolarisIsLoggedInDesktop","PolarisMaybeInstantPostModal.react","PolarisPost.react","PolarisPostVariants","PolarisReactRedux","PolarisRoutes","isStringNullOrEmpty","nullthrows","polarisPostSelectors","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useEffect;function a(a){var b=a.analyticsContext,e=a.combinedPosts,f=a.mediaLinkBuilder,g=a.modalEntryPath,k=a.onClose,l=a.onImpression,m=a.onOpen,n=a.postId,o=d("PolarisReactRedux").useSelector(function(a){return d("polarisPostSelectors").getDeletedIds(a)});a=e.map(function(a){return a.id});var p=d("PolarisReactRedux").useSelector(function(a){return d("polarisPostSelectors").getPostOrNullById(a,n)});j(function(){p==null&&(o.includes(n)||h(0,51476),k())},[o,k,p,n]);return p==null?null:i.jsx(c("PolarisMaybeInstantPostModal.react"),{analyticsContext:b,combinedPostIds:a,dimensions:p.dimensions,mediaLinkBuilder:f,modalEntryPath:c("isStringNullOrEmpty")(g)?d("PolarisRoutes").FEED_PATH:g,onClose:k,onOpen:m,postCode:c("nullthrows")(p.code),postId:n,children:i.jsx(c("PolarisPost.react"),{analyticsContext:b+"Modal",autoplay:d("PolarisIsLoggedInDesktop").isLoggedInDesktop(),id:n,isVisible:!0,onImpression:l,variant:d("PolarisPostVariants").VARIANTS.flexible,visiblePosition:0})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisDesktopPostLoadingShimmer.react",["cx","PolarisIGTheme.react","PolarisReactRedux","PolarisSizing","polarisPostModalHelpers","polarisPostSelectors","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function j(a){var b,c=a.dimensions,e=a.postId,f=a.viewportHeight;a=a.viewportWidth;var g=a!=null&&a>d("PolarisSizing").MEDIUM_SCREEN_MIN;b=(b=d("PolarisReactRedux").useSelector(function(a){return d("polarisPostSelectors").getPostOrNullById(a,(a=e)!=null?a:"")}))==null?void 0:b.isSponsored;a=d("polarisPostModalHelpers").getMediaContainerProps({dimensions:c,viewportHeight:(f=f)!=null?f:0,viewportWidth:(f=a)!=null?f:0,hasSidebarInRedesign:g,hasFooter:b});return i.jsx("div",babelHelpers["extends"]({className:"_aas3"+(g&&c!=null&&c.width>=c.height?" _aas4":"")},a,{children:i.jsx(k,{dimensions:c})}))}j.displayName=j.name+" [from "+f.id+"]";function k(a){a=a.dimensions;var b={},c=d("PolarisIGTheme.react").useTheme();a&&(b.paddingBottom=d("PolarisSizing").getHeightPercent(a)+"%");return i.jsx("div",{className:"_aas5"+(c.getTheme()===d("PolarisIGTheme.react").IGTheme.Dark?" _aas6":""),style:b})}k.displayName=k.name+" [from "+f.id+"]";function l(a){var b=a.dimensions;a.onExitModal;var c=a.postId,d=a.viewportHeight;a=a.viewportWidth;return i.jsx(j,{dimensions:b,postId:c,viewportHeight:d,viewportWidth:a})}l.displayName=l.name+" [from "+f.id+"]";function a(a){a.className;var b=a.dimensions,c=a.onExitModal,d=a.postId,e=a.viewportHeight;a=a.viewportWidth;var f={};b&&(f={flexDirection:"row"});return i.jsxs("div",{className:"_aas7",style:f,children:[i.jsx(l,{dimensions:b,onExitModal:c,postId:d,viewportHeight:e,viewportWidth:a}),i.jsxs("div",{className:"_aas8",children:[i.jsxs("div",{className:"_aas9",children:[i.jsx("div",{className:"_aasa"}),i.jsxs("div",{className:"_aasb",children:[i.jsx("div",{className:"_aasc"}),i.jsx("div",{className:"_aasd"})]})]}),i.jsxs("div",{className:"_aase",children:[i.jsx("div",{className:"_aasf"}),i.jsx("div",{className:"_aasg"}),i.jsx("div",{className:"_aash"})]})]})]})}a.displayName=a.name+" [from "+f.id+"]";g.SIDEBAR_VARIANT_CUTOFF=d("PolarisSizing").MEDIUM_SCREEN_MIN;g.DesktopPostLoadingShimmer=a}),98);
__d("PolarisPostModalLoading.react",["IGDSBox.react","IGDSSpinner.react","PolarisDesktopPostLoadingShimmer.react","PolarisPostConstants","PolarisUA","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.dimensions,e=a.onExitModal,f=a.postId,g=a.viewportHeight;a=a.viewportWidth;return d("PolarisUA").isDesktop()&&a>d("PolarisPostConstants").SIDEBAR_VARIANT_CUTOFF?h.jsx(d("PolarisDesktopPostLoadingShimmer.react").DesktopPostLoadingShimmer,{dimensions:b,onExitModal:e,postId:f,viewportHeight:g,viewportWidth:a}):h.jsx(c("IGDSBox.react"),{alignItems:"center",position:"relative",children:h.jsx(c("IGDSSpinner.react"),{color:"light",size:"medium"})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostModalPaginationArrow.react",["cx","IGDSChevronIcon","Locale","PolarisGenericStrings","PolarisIGCoreSVGIconButton","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){a.arrowRef;var b=a.direction,e=a.onClick;a.title;a=c("Locale").isRTL();var f=b==="back"&&!a||b==="next"&&a;a=b==="next"&&!a||b==="back"&&a;return i.jsx("div",{className:(f?"_aaqf":"")+(a?" _aaqg":"")+" _aaqh",children:i.jsx(c("PolarisIGCoreSVGIconButton"),{onClick:e,children:i.jsx(c("IGDSChevronIcon"),{alt:f?d("PolarisGenericStrings").GO_BACK:d("PolarisGenericStrings").NEXT,color:"web-always-black",direction:b,size:16})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostModalInternal.react",["cx","IGCoreModal","IGCoreModalLocation","PolarisAutoplayViewpointManager.react","PolarisDOMListener.react","PolarisLogger","PolarisPostActionLoadPost","PolarisPostModalLoading.react","PolarisPostModalPaginationArrow.react","PolarisPostModalRenderingContext","PolarisReactRedux","PolarisRoutes","PolarisThreadedCommentActions","getPolarisKeyCommandConfig","nullthrows","polarisIsUserLoggedIn","polarisPostModalHelpers","polarisPostSelectors","react","useGlobalKeyCommands"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useCallback,k=b.useEffect,l=b.useMemo,m=b.useRef,n={isInModal:!0};function a(a){var b=a.analyticsContext,e=a.children,f=a.combinedPostIds,g=f===void 0?[]:f;f=a["data-testid"];f=a.dimensions;var h=a.mediaLinkBuilder,o=a.modalEntryPath;o=o===void 0?d("PolarisRoutes").FEED_PATH:o;var p=a.onClose,q=a.onOpen,r=a.onlyReplaceModalHistory,s=a.postCode,t=a.postId,u=a.showLoadingShimmer,v=a.skipMediaInfo,w=d("PolarisReactRedux").useDispatch(),x=m(null);a=d("PolarisReactRedux").useSelector(function(a){return d("polarisPostSelectors").getAreCommentsFetched(a,t)});var y=d("PolarisReactRedux").useSelector(function(a){return d("polarisPostSelectors").getIsPostDataFetched(a,s)}),z=d("polarisIsUserLoggedIn").isUserLoggedIn()===!0?y:y&&a;y=j(function(){z||(v===!0?w(d("PolarisThreadedCommentActions").requestInitialComments(t)):w(d("PolarisPostActionLoadPost").loadPost(s,t)))},[v,z,w,s,t]);k(y,[y]);var A=g.findIndex(function(a){return a===t}),B=j(function(a){return a>=0&&a<g.length},[g.length]),C=j(function(a){a=A+a;B(a)&&q&&q(c("nullthrows")(g[a]),a)},[g,A,B,q]),D=j(function(a){p(a),x.current!=null&&x.current.returnToEntry()},[p]);a=l(function(){return[d("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("postModal","navigateLeft",function(){C(d("polarisPostModalHelpers").LEFT_DELTA)}),d("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("postModal","navigateRight",function(){C(d("polarisPostModalHelpers").RIGHT_DELTA)}),d("getPolarisKeyCommandConfig").getPolarisKeyCommandConfig("postModal","exit",function(){D()})]},[C,D]);c("useGlobalKeyCommands")(a);y=function(a){return function(b){if(b.metaKey||b.ctrlKey)return;b.preventDefault();b.stopPropagation();C(a);d("PolarisLogger").logAction("postModalArrowClick")}};a=j(function(){var a=d("polarisPostModalHelpers").getModalPageIdFromAnalyticsContext(b);a.length>0&&d("PolarisLogger").logPageView(a,{post_id:t,page_id:a})},[b,t]);var E=B(A-1),F=B(A+1);E=i.jsx("div",{className:"_aeap _aeaq",children:i.jsxs("div",{className:"_aear",children:[E&&i.jsx(c("PolarisPostModalPaginationArrow.react"),{direction:"back",onClick:y(d("polarisPostModalHelpers").LEFT_DELTA),title:d("polarisPostModalHelpers").PREVIOUS_ARROW_TITLE}),F&&i.jsx(c("PolarisPostModalPaginationArrow.react"),{direction:"next",onClick:y(d("polarisPostModalHelpers").RIGHT_DELTA),title:d("polarisPostModalHelpers").NEXT_ARROW_TITLE})]})});F=d("PolarisReactRedux").useSelector(function(a){return a.displayProperties.viewportWidth});y=d("PolarisReactRedux").useSelector(function(a){return a.displayProperties.viewportHeight});u=i.jsx(i.Fragment,{children:!z&&u?i.jsx(c("PolarisPostModalLoading.react"),{dimensions:f,postId:t,viewportHeight:y,viewportWidth:F}):e});f=i.jsx(c("IGCoreModal"),{aboveContent:E,backgroundColor:"DEPRECATED_transparent",closeButtonPosition:"background","data-testid":void 0,onClose:D,size:"fullscreenResponsive",children:u});return i.jsxs(i.Fragment,{children:[i.jsx(d("PolarisAutoplayViewpointManager.react").FullscreenAutoplayViewpointClipRegion,{id:"postModal"}),i.jsx(c("IGCoreModalLocation"),{entryPath:o,nativeReplace:!0,onlyReplaceModalHistory:r,onUpdateHistory:a,pageID:"postPage",parentModule:"PolarisPostModal",path:h(s),ref:x}),i.jsx(c("PolarisDOMListener.react"),{event:"popstate",handler:D,once:!0,target:window}),i.jsx(d("PolarisPostModalRenderingContext").PolarisPostModalRenderingContext.Provider,{value:n,children:f})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisPostModal.react",["PolarisPostModalInternal.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx(c("PolarisPostModalInternal.react"),babelHelpers["extends"]({},a,{showLoadingShimmer:!0}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisClipsItemModal.react",["IGRouter","PolarisClipsHelpers","PolarisLinkBuilder","PolarisPost.react","PolarisPostModal.react","PolarisPostVariants","nullthrows","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useRef;function a(a){var b=a.analyticsContext,e=a.clips,f=a.history,g=a.onClose,j=a.onOpen;a=a.postId;f=i(f.location.pathname);var k=d("PolarisClipsHelpers").getClipItemFromPostID(e,a);if(!k)return null;e=e.map(function(a){return c("nullthrows")((a=a.media)==null?void 0:a.pk)});return h.jsx(c("PolarisPostModal.react"),{analyticsContext:b,combinedPostIds:e,dimensions:d("PolarisClipsHelpers").getClipDimensionsFromItemDict(k),mediaLinkBuilder:d("PolarisLinkBuilder").buildClipsMediaLink,modalEntryPath:f.current,onClose:g,onOpen:j,postCode:c("nullthrows")((e=k.media)==null?void 0:e.code),postId:a,children:h.jsx(c("PolarisPost.react"),{analyticsContext:b+"Modal",autoplay:!0,id:a,isVisible:!0,variant:d("PolarisPostVariants").VARIANTS.flexible,visiblePosition:0})})}a.displayName=a.name+" [from "+f.id+"]";b=d("IGRouter").withIGRouter(a);g["default"]=b}),98);
__d("PolarisInstantPostModal.react",["PolarisPostModalInternal.react","PolarisProfileTabTaggedPhotosConstants","polarisPostModalHelpers","react","usePolarisPost"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b,e=!1,f=!1,g=d("polarisPostModalHelpers").getModalPageIdFromAnalyticsContext(a.analyticsContext)==="profilePageModal";b=((b=a.modalEntryPath)==null?void 0:b.endsWith("/"+d("PolarisProfileTabTaggedPhotosConstants").TAGGED_TAB_ID+"/"))===!0;g&&!b&&(e=!0);g=d("usePolarisPost").usePost(a.postId,function(a){return a.isVideo});b&&g===!0&&(f=!0);return h.jsx(c("PolarisPostModalInternal.react"),babelHelpers["extends"]({},a,{showLoadingShimmer:f,skipMediaInfo:e}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("XAsyncRequest",["AsyncRequest"],(function(a,b,c,d,e,f,g){a=function(){function a(a){var b=this;this.setAllowCrossPageTransition=function(a){b.$1.setAllowCrossPageTransition(a);return b};this.$1=new(c("AsyncRequest"))(a)}var b=a.prototype;b.setURI=function(a){this.$1.setURI(a);return this};b.setTimeoutHandler=function(a,b){this.$1.setTimeoutHandler(a,b);return this};b.setOption=function(a,b){this.$1.setOption(a,b);return this};b.setMethod=function(a){this.$1.setMethod(a);return this};b.setData=function(a){this.$1.setData(a);return this};b.setHandler=function(a){this.$1.setHandler(a);return this};b.setPayloadHandler=function(a){this.setHandler(function(b){return a(b.payload)});return this};b.setErrorHandler=function(a){this.$1.setErrorHandler(a);return this};b.send=function(){this.$1.send();return this};b.abort=function(){this.$1.abort()};b.setReadOnly=function(a){this.$1.setReadOnly(a);return this};b.setAllowCrossOrigin=function(a){this.$1.setAllowCrossOrigin(a);return this};b.setAllowCredentials=function(a){this.$1.setAllowCredentials(a);return this};return a}();g["default"]=a}),98);
__d("SecurePostMessage",["invariant"],(function(a,b,c,d,e,f,g){"use strict";var h="*";a={sendMessageToSpecificOrigin:function(a,b,c,d){c!==h||g(0,21157),a.postMessage(b,c,d)},sendMessageForCurrentOrigin:function(a,b){a.postMessage(b)},sendMessageAllowAnyOrigin_UNSAFE:function(a,b,c){a.postMessage(b,h,c)}};e.exports=a}),null);
__d("SecureMessageListener",["SecurePostMessage","URI"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$3=null;this.$4=!1;this.$1=a;this.$5=function(a){b.run(a)}}var b=a.prototype;b.setEventHandler=function(a){this.$2=a;return this};b.setSupportedOrigins=function(a){this.$3=a;return this};b.skipOriginCheck_UNSAFE=function(){this.$4=!0;return this};b.beginListening=function(){this.$1.addEventListener("message",this.$5);return this};b.stopListening=function(){this.$1.removeEventListener("message",this.$5);return this};b.run=function(a){if(this.$3==null||this.$3.length===0){if(!this.$4&&a.origin!==this.$1.location.origin)return}else if(!this.isSupportedOrigin(this.$3,a.origin))return;if(this.$2)if(this.$2.length==1)this.$2(a);else{var b=function(b){d("SecurePostMessage").sendMessageToSpecificOrigin(a.source,b,a.origin)};this.$2(a,b)}};b.isSupportedOrigin=function(a,b){if(!new RegExp("^https://").test(b))return!1;var d=new(c("URI"))(b);return a.some(function(a){return d.isSubdomainOfDomain(a)})};return a}();g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("TetraProfilePhoto.react",["CometProfilePhoto.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a,b){return h.jsx(c("CometProfilePhoto.react"),babelHelpers["extends"]({},a,{ref:b}))}a.displayName=a.name+" [from "+f.id+"]";b=h.forwardRef(a);g["default"]=b}),98);
__d("WebPixelRatio",["SiteData"],(function(a,b,c,d,e,f,g){function a(){return c("SiteData").pr!=null&&c("SiteData").pr>0?c("SiteData").pr:window.devicePixelRatio||1}g.get=a}),98);